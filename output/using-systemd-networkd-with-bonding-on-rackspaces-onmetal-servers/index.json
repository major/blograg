{
  "schema_name": "DoclingDocument",
  "version": "1.4.0",
  "name": "index",
  "origin": {
    "mimetype": "text/markdown",
    "binary_hash": 3610322345230203959,
    "filename": "index.md"
  },
  "furniture": {
    "self_ref": "#/furniture",
    "children": [],
    "content_layer": "furniture",
    "name": "_root_",
    "label": "unspecified"
  },
  "body": {
    "self_ref": "#/body",
    "children": [
      {
        "$ref": "#/texts/0"
      },
      {
        "$ref": "#/groups/0"
      },
      {
        "$ref": "#/pictures/0"
      },
      {
        "$ref": "#/texts/14"
      },
      {
        "$ref": "#/texts/15"
      },
      {
        "$ref": "#/texts/16"
      },
      {
        "$ref": "#/texts/17"
      },
      {
        "$ref": "#/texts/18"
      },
      {
        "$ref": "#/texts/19"
      },
      {
        "$ref": "#/texts/20"
      },
      {
        "$ref": "#/texts/21"
      },
      {
        "$ref": "#/texts/22"
      },
      {
        "$ref": "#/texts/23"
      },
      {
        "$ref": "#/texts/24"
      },
      {
        "$ref": "#/texts/25"
      },
      {
        "$ref": "#/texts/26"
      },
      {
        "$ref": "#/texts/27"
      },
      {
        "$ref": "#/texts/28"
      },
      {
        "$ref": "#/texts/29"
      },
      {
        "$ref": "#/texts/30"
      },
      {
        "$ref": "#/groups/1"
      },
      {
        "$ref": "#/texts/33"
      },
      {
        "$ref": "#/texts/34"
      },
      {
        "$ref": "#/texts/35"
      },
      {
        "$ref": "#/texts/36"
      },
      {
        "$ref": "#/texts/37"
      },
      {
        "$ref": "#/texts/38"
      },
      {
        "$ref": "#/texts/39"
      },
      {
        "$ref": "#/texts/40"
      },
      {
        "$ref": "#/texts/41"
      },
      {
        "$ref": "#/texts/42"
      },
      {
        "$ref": "#/texts/43"
      },
      {
        "$ref": "#/texts/44"
      },
      {
        "$ref": "#/texts/45"
      },
      {
        "$ref": "#/texts/46"
      },
      {
        "$ref": "#/texts/47"
      },
      {
        "$ref": "#/texts/48"
      },
      {
        "$ref": "#/texts/49"
      },
      {
        "$ref": "#/texts/50"
      },
      {
        "$ref": "#/texts/51"
      },
      {
        "$ref": "#/texts/52"
      },
      {
        "$ref": "#/texts/53"
      },
      {
        "$ref": "#/texts/54"
      },
      {
        "$ref": "#/texts/55"
      },
      {
        "$ref": "#/texts/56"
      },
      {
        "$ref": "#/texts/57"
      },
      {
        "$ref": "#/texts/58"
      },
      {
        "$ref": "#/texts/59"
      },
      {
        "$ref": "#/texts/60"
      },
      {
        "$ref": "#/texts/61"
      },
      {
        "$ref": "#/texts/62"
      },
      {
        "$ref": "#/texts/63"
      },
      {
        "$ref": "#/texts/64"
      },
      {
        "$ref": "#/texts/65"
      },
      {
        "$ref": "#/texts/66"
      },
      {
        "$ref": "#/texts/67"
      },
      {
        "$ref": "#/texts/68"
      },
      {
        "$ref": "#/texts/69"
      },
      {
        "$ref": "#/texts/70"
      },
      {
        "$ref": "#/texts/71"
      },
      {
        "$ref": "#/texts/72"
      },
      {
        "$ref": "#/texts/73"
      },
      {
        "$ref": "#/texts/74"
      },
      {
        "$ref": "#/texts/75"
      },
      {
        "$ref": "#/texts/76"
      },
      {
        "$ref": "#/texts/77"
      },
      {
        "$ref": "#/texts/78"
      },
      {
        "$ref": "#/texts/79"
      },
      {
        "$ref": "#/texts/80"
      },
      {
        "$ref": "#/texts/81"
      },
      {
        "$ref": "#/texts/82"
      },
      {
        "$ref": "#/texts/83"
      },
      {
        "$ref": "#/texts/84"
      },
      {
        "$ref": "#/texts/85"
      },
      {
        "$ref": "#/texts/86"
      },
      {
        "$ref": "#/texts/87"
      },
      {
        "$ref": "#/texts/88"
      },
      {
        "$ref": "#/texts/89"
      },
      {
        "$ref": "#/texts/90"
      },
      {
        "$ref": "#/texts/91"
      },
      {
        "$ref": "#/texts/92"
      },
      {
        "$ref": "#/texts/93"
      },
      {
        "$ref": "#/texts/94"
      },
      {
        "$ref": "#/texts/95"
      },
      {
        "$ref": "#/texts/96"
      },
      {
        "$ref": "#/texts/97"
      },
      {
        "$ref": "#/texts/98"
      },
      {
        "$ref": "#/texts/99"
      },
      {
        "$ref": "#/texts/100"
      },
      {
        "$ref": "#/texts/101"
      },
      {
        "$ref": "#/groups/2"
      },
      {
        "$ref": "#/texts/104"
      },
      {
        "$ref": "#/texts/105"
      },
      {
        "$ref": "#/texts/106"
      },
      {
        "$ref": "#/texts/107"
      },
      {
        "$ref": "#/texts/108"
      },
      {
        "$ref": "#/texts/109"
      },
      {
        "$ref": "#/texts/110"
      },
      {
        "$ref": "#/texts/111"
      },
      {
        "$ref": "#/texts/112"
      },
      {
        "$ref": "#/texts/113"
      },
      {
        "$ref": "#/texts/114"
      },
      {
        "$ref": "#/texts/115"
      },
      {
        "$ref": "#/texts/116"
      }
    ],
    "content_layer": "body",
    "name": "_root_",
    "label": "unspecified"
  },
  "groups": [
    {
      "self_ref": "#/groups/0",
      "parent": {
        "$ref": "#/body"
      },
      "children": [
        {
          "$ref": "#/texts/1"
        },
        {
          "$ref": "#/texts/2"
        },
        {
          "$ref": "#/texts/3"
        },
        {
          "$ref": "#/texts/4"
        },
        {
          "$ref": "#/texts/5"
        },
        {
          "$ref": "#/texts/6"
        },
        {
          "$ref": "#/texts/7"
        },
        {
          "$ref": "#/texts/8"
        },
        {
          "$ref": "#/texts/9"
        },
        {
          "$ref": "#/texts/10"
        },
        {
          "$ref": "#/texts/11"
        },
        {
          "$ref": "#/texts/12"
        },
        {
          "$ref": "#/texts/13"
        }
      ],
      "content_layer": "body",
      "name": "list",
      "label": "list"
    },
    {
      "self_ref": "#/groups/1",
      "parent": {
        "$ref": "#/body"
      },
      "children": [
        {
          "$ref": "#/texts/31"
        },
        {
          "$ref": "#/texts/32"
        }
      ],
      "content_layer": "body",
      "name": "list",
      "label": "list"
    },
    {
      "self_ref": "#/groups/2",
      "parent": {
        "$ref": "#/body"
      },
      "children": [
        {
          "$ref": "#/texts/102"
        },
        {
          "$ref": "#/texts/103"
        }
      ],
      "content_layer": "body",
      "name": "list",
      "label": "list"
    }
  ],
  "texts": [
    {
      "self_ref": "#/texts/0",
      "parent": {
        "$ref": "#/body"
      },
      "children": [],
      "content_layer": "body",
      "label": "paragraph",
      "prov": [],
      "orig": "aliases:",
      "text": "aliases:"
    },
    {
      "self_ref": "#/texts/1",
      "parent": {
        "$ref": "#/groups/0"
      },
      "children": [],
      "content_layer": "body",
      "label": "list_item",
      "prov": [],
      "orig": "/2015/08/21/using-systemd-networkd-with-bonding-on-rackspaces-onmetal-servers/",
      "text": "/2015/08/21/using-systemd-networkd-with-bonding-on-rackspaces-onmetal-servers/",
      "enumerated": false,
      "marker": "-"
    },
    {
      "self_ref": "#/texts/2",
      "parent": {
        "$ref": "#/groups/0"
      },
      "children": [],
      "content_layer": "body",
      "label": "list_item",
      "prov": [],
      "orig": "bonding",
      "text": "bonding",
      "enumerated": false,
      "marker": "-"
    },
    {
      "self_ref": "#/texts/3",
      "parent": {
        "$ref": "#/groups/0"
      },
      "children": [],
      "content_layer": "body",
      "label": "list_item",
      "prov": [],
      "orig": "command line",
      "text": "command line",
      "enumerated": false,
      "marker": "-"
    },
    {
      "self_ref": "#/texts/4",
      "parent": {
        "$ref": "#/groups/0"
      },
      "children": [],
      "content_layer": "body",
      "label": "list_item",
      "prov": [],
      "orig": "fedora",
      "text": "fedora",
      "enumerated": false,
      "marker": "-"
    },
    {
      "self_ref": "#/texts/5",
      "parent": {
        "$ref": "#/groups/0"
      },
      "children": [],
      "content_layer": "body",
      "label": "list_item",
      "prov": [],
      "orig": "grub2",
      "text": "grub2",
      "enumerated": false,
      "marker": "-"
    },
    {
      "self_ref": "#/texts/6",
      "parent": {
        "$ref": "#/groups/0"
      },
      "children": [],
      "content_layer": "body",
      "label": "list_item",
      "prov": [],
      "orig": "json",
      "text": "json",
      "enumerated": false,
      "marker": "-"
    },
    {
      "self_ref": "#/texts/7",
      "parent": {
        "$ref": "#/groups/0"
      },
      "children": [],
      "content_layer": "body",
      "label": "list_item",
      "prov": [],
      "orig": "networking",
      "text": "networking",
      "enumerated": false,
      "marker": "-"
    },
    {
      "self_ref": "#/texts/8",
      "parent": {
        "$ref": "#/groups/0"
      },
      "children": [],
      "content_layer": "body",
      "label": "list_item",
      "prov": [],
      "orig": "onmetal",
      "text": "onmetal",
      "enumerated": false,
      "marker": "-"
    },
    {
      "self_ref": "#/texts/9",
      "parent": {
        "$ref": "#/groups/0"
      },
      "children": [],
      "content_layer": "body",
      "label": "list_item",
      "prov": [],
      "orig": "python",
      "text": "python",
      "enumerated": false,
      "marker": "-"
    },
    {
      "self_ref": "#/texts/10",
      "parent": {
        "$ref": "#/groups/0"
      },
      "children": [],
      "content_layer": "body",
      "label": "list_item",
      "prov": [],
      "orig": "rackspace",
      "text": "rackspace",
      "enumerated": false,
      "marker": "-"
    },
    {
      "self_ref": "#/texts/11",
      "parent": {
        "$ref": "#/groups/0"
      },
      "children": [],
      "content_layer": "body",
      "label": "list_item",
      "prov": [],
      "orig": "systemd",
      "text": "systemd",
      "enumerated": false,
      "marker": "-"
    },
    {
      "self_ref": "#/texts/12",
      "parent": {
        "$ref": "#/groups/0"
      },
      "children": [],
      "content_layer": "body",
      "label": "list_item",
      "prov": [],
      "orig": "systemd-networkd",
      "text": "systemd-networkd",
      "enumerated": false,
      "marker": "-"
    },
    {
      "self_ref": "#/texts/13",
      "parent": {
        "$ref": "#/groups/0"
      },
      "children": [],
      "content_layer": "body",
      "label": "list_item",
      "prov": [],
      "orig": "udev",
      "text": "udev",
      "enumerated": false,
      "marker": "-"
    },
    {
      "self_ref": "#/texts/14",
      "parent": {
        "$ref": "#/body"
      },
      "children": [],
      "content_layer": "body",
      "label": "paragraph",
      "prov": [],
      "orig": "1",
      "text": "1"
    },
    {
      "self_ref": "#/texts/15",
      "parent": {
        "$ref": "#/body"
      },
      "children": [],
      "content_layer": "body",
      "label": "paragraph",
      "prov": [],
      "orig": "I've written about  systemd-networkd  in the past and how easy it can be to set up new network devices and tunnels. However, the documentation on systemd-networkd with bonding is a bit lacking (but I have a  pull request pending  for that).",
      "text": "I've written about  systemd-networkd  in the past and how easy it can be to set up new network devices and tunnels. However, the documentation on systemd-networkd with bonding is a bit lacking (but I have a  pull request pending  for that)."
    },
    {
      "self_ref": "#/texts/16",
      "parent": {
        "$ref": "#/body"
      },
      "children": [],
      "content_layer": "body",
      "label": "paragraph",
      "prov": [],
      "orig": "Rackspace's OnMetal Servers  are a good place to test since they have bonded networks configured by default. They're also quite fast and always fun for experiments.",
      "text": "Rackspace's OnMetal Servers  are a good place to test since they have bonded networks configured by default. They're also quite fast and always fun for experiments."
    },
    {
      "self_ref": "#/texts/17",
      "parent": {
        "$ref": "#/body"
      },
      "children": [],
      "content_layer": "body",
      "label": "paragraph",
      "prov": [],
      "orig": "To get started, head on over to the  Rackspace Cloud control panel  and build a  compute-1  OnMetal server and choose Fedora 22 as your operating system. Once it starts pinging and you're able to log in, start following the guide below.",
      "text": "To get started, head on over to the  Rackspace Cloud control panel  and build a  compute-1  OnMetal server and choose Fedora 22 as your operating system. Once it starts pinging and you're able to log in, start following the guide below."
    },
    {
      "self_ref": "#/texts/18",
      "parent": {
        "$ref": "#/body"
      },
      "children": [],
      "content_layer": "body",
      "label": "section_header",
      "prov": [],
      "orig": "Network device naming",
      "text": "Network device naming",
      "level": 1
    },
    {
      "self_ref": "#/texts/19",
      "parent": {
        "$ref": "#/body"
      },
      "children": [],
      "content_layer": "body",
      "label": "paragraph",
      "prov": [],
      "orig": "By default, most images come with  systemd's predictable network naming  disabled. You can see the kernel command line adjustments here:",
      "text": "By default, most images come with  systemd's predictable network naming  disabled. You can see the kernel command line adjustments here:"
    },
    {
      "self_ref": "#/texts/20",
      "parent": {
        "$ref": "#/body"
      },
      "children": [],
      "content_layer": "body",
      "label": "code",
      "prov": [],
      "orig": "# cat /boot/extlinux.conf\nTIMEOUT 1\ndefault linux\n\nLABEL Fedora (4.1.5-200.fc22.x86_64) 22 (Twenty Two)\n      KERNEL /boot/vmlinuz-4.1.5-200.fc22.x86_64\n      APPEND root=/dev/sda1 console=ttyS4,115200n8 8250.nr_uarts=5 modprobe.blacklist=mei_me net.ifnames=0 biosdevname=0 LANG=en_US.UTF-8\n      initrd /boot/initramfs-4.1.5-200.fc22.x86_64.img",
      "text": "# cat /boot/extlinux.conf\nTIMEOUT 1\ndefault linux\n\nLABEL Fedora (4.1.5-200.fc22.x86_64) 22 (Twenty Two)\n      KERNEL /boot/vmlinuz-4.1.5-200.fc22.x86_64\n      APPEND root=/dev/sda1 console=ttyS4,115200n8 8250.nr_uarts=5 modprobe.blacklist=mei_me net.ifnames=0 biosdevname=0 LANG=en_US.UTF-8\n      initrd /boot/initramfs-4.1.5-200.fc22.x86_64.img",
      "captions": [],
      "references": [],
      "footnotes": [],
      "code_language": "unknown"
    },
    {
      "self_ref": "#/texts/21",
      "parent": {
        "$ref": "#/body"
      },
      "children": [],
      "content_layer": "body",
      "label": "paragraph",
      "prov": [],
      "orig": "This ensures that both network devices show up as  eth0  and  eth1 . Although it isn't my favorite way to configure a server, it does make it easier for most customers to get up an running quickly with some device names that they are familiar with from virtualized products.",
      "text": "This ensures that both network devices show up as  eth0  and  eth1 . Although it isn't my favorite way to configure a server, it does make it easier for most customers to get up an running quickly with some device names that they are familiar with from virtualized products."
    },
    {
      "self_ref": "#/texts/22",
      "parent": {
        "$ref": "#/body"
      },
      "children": [],
      "content_layer": "body",
      "label": "paragraph",
      "prov": [],
      "orig": "We need to figure out what systemd plans to call these interfaces when we allow udev to name them predictably. The easiest method for figuring out what udev wants to call these devices is to dump the udev database and use ",
      "text": "We need to figure out what systemd plans to call these interfaces when we allow udev to name them predictably. The easiest method for figuring out what udev wants to call these devices is to dump the udev database and use "
    },
    {
      "self_ref": "#/texts/23",
      "parent": {
        "$ref": "#/body"
      },
      "children": [],
      "content_layer": "body",
      "label": "code",
      "prov": [],
      "orig": "grep",
      "text": "grep",
      "captions": [],
      "references": [],
      "footnotes": [],
      "code_language": "unknown"
    },
    {
      "self_ref": "#/texts/24",
      "parent": {
        "$ref": "#/body"
      },
      "children": [],
      "content_layer": "body",
      "label": "paragraph",
      "prov": [],
      "orig": ":",
      "text": ":"
    },
    {
      "self_ref": "#/texts/25",
      "parent": {
        "$ref": "#/body"
      },
      "children": [],
      "content_layer": "body",
      "label": "code",
      "prov": [],
      "orig": "# udevadm info -e | grep -A 9 ^P.*eth0\nP: /devices/pci0000:00/0000:00:03.2/0000:08:00.0/net/eth0\nE: DEVPATH=/devices/pci0000:00/0000:00:03.2/0000:08:00.0/net/eth0\nE: ID_BUS=pci\nE: ID_MODEL_FROM_DATABASE=82599ES 10-Gigabit SFI/SFP+ Network Connection (Ethernet OCP Server Adapter X520-2)\nE: ID_MODEL_ID=0x10fb\nE: ID_NET_DRIVER=ixgbe\nE: ID_NET_LINK_FILE=/usr/lib/systemd/network/99-default.link\nE: ID_NET_NAME_MAC=enxa0369f2cec90\nE: ID_NET_NAME_PATH=enp8s0f0\nE: ID_NET_NAME_SLOT=ens9f0",
      "text": "# udevadm info -e | grep -A 9 ^P.*eth0\nP: /devices/pci0000:00/0000:00:03.2/0000:08:00.0/net/eth0\nE: DEVPATH=/devices/pci0000:00/0000:00:03.2/0000:08:00.0/net/eth0\nE: ID_BUS=pci\nE: ID_MODEL_FROM_DATABASE=82599ES 10-Gigabit SFI/SFP+ Network Connection (Ethernet OCP Server Adapter X520-2)\nE: ID_MODEL_ID=0x10fb\nE: ID_NET_DRIVER=ixgbe\nE: ID_NET_LINK_FILE=/usr/lib/systemd/network/99-default.link\nE: ID_NET_NAME_MAC=enxa0369f2cec90\nE: ID_NET_NAME_PATH=enp8s0f0\nE: ID_NET_NAME_SLOT=ens9f0",
      "captions": [],
      "references": [],
      "footnotes": [],
      "code_language": "unknown"
    },
    {
      "self_ref": "#/texts/26",
      "parent": {
        "$ref": "#/body"
      },
      "children": [],
      "content_layer": "body",
      "label": "paragraph",
      "prov": [],
      "orig": "Look for those lines that contain ",
      "text": "Look for those lines that contain "
    },
    {
      "self_ref": "#/texts/27",
      "parent": {
        "$ref": "#/body"
      },
      "children": [],
      "content_layer": "body",
      "label": "code",
      "prov": [],
      "orig": "ID_NET_NAME_*",
      "text": "ID_NET_NAME_*",
      "captions": [],
      "references": [],
      "footnotes": [],
      "code_language": "unknown"
    },
    {
      "self_ref": "#/texts/28",
      "parent": {
        "$ref": "#/body"
      },
      "children": [],
      "content_layer": "body",
      "label": "paragraph",
      "prov": [],
      "orig": ". Those tell us what udev prefers to call these network devices. The last name you see in the list is what the interface will be called. Here's what you need to look for in that output:",
      "text": ". Those tell us what udev prefers to call these network devices. The last name you see in the list is what the interface will be called. Here's what you need to look for in that output:"
    },
    {
      "self_ref": "#/texts/29",
      "parent": {
        "$ref": "#/body"
      },
      "children": [],
      "content_layer": "body",
      "label": "code",
      "prov": [],
      "orig": "E: ID_NET_NAME_MAC=enxa0369f2cec90\nE: ID_NET_NAME_PATH=enp8s0f0\nE: ID_NET_NAME_SLOT=ens9f0",
      "text": "E: ID_NET_NAME_MAC=enxa0369f2cec90\nE: ID_NET_NAME_PATH=enp8s0f0\nE: ID_NET_NAME_SLOT=ens9f0",
      "captions": [],
      "references": [],
      "footnotes": [],
      "code_language": "unknown"
    },
    {
      "self_ref": "#/texts/30",
      "parent": {
        "$ref": "#/body"
      },
      "children": [],
      "content_layer": "body",
      "label": "paragraph",
      "prov": [],
      "orig": "We can see that this device is in slot 0 of PCI bus 8. However, since udev is able to dig in a bit further, it decides to name the device  ens9f0 , which means:",
      "text": "We can see that this device is in slot 0 of PCI bus 8. However, since udev is able to dig in a bit further, it decides to name the device  ens9f0 , which means:"
    },
    {
      "self_ref": "#/texts/31",
      "parent": {
        "$ref": "#/groups/1"
      },
      "children": [],
      "content_layer": "body",
      "label": "list_item",
      "prov": [],
      "orig": "Hotplug slot 9",
      "text": "Hotplug slot 9",
      "enumerated": false,
      "marker": "-"
    },
    {
      "self_ref": "#/texts/32",
      "parent": {
        "$ref": "#/groups/1"
      },
      "children": [],
      "content_layer": "body",
      "label": "list_item",
      "prov": [],
      "orig": "Function index number 0",
      "text": "Function index number 0",
      "enumerated": false,
      "marker": "-"
    },
    {
      "self_ref": "#/texts/33",
      "parent": {
        "$ref": "#/body"
      },
      "children": [],
      "content_layer": "body",
      "label": "paragraph",
      "prov": [],
      "orig": "Udev rolls through a list of possible network names and uses the very last one as the name of the network device. Gentoo's documentation has a  nice explanation . In our case, ",
      "text": "Udev rolls through a list of possible network names and uses the very last one as the name of the network device. Gentoo's documentation has a  nice explanation . In our case, "
    },
    {
      "self_ref": "#/texts/34",
      "parent": {
        "$ref": "#/body"
      },
      "children": [],
      "content_layer": "body",
      "label": "code",
      "prov": [],
      "orig": "ID_NET_NAME_SLOT",
      "text": "ID_NET_NAME_SLOT",
      "captions": [],
      "references": [],
      "footnotes": [],
      "code_language": "unknown"
    },
    {
      "self_ref": "#/texts/35",
      "parent": {
        "$ref": "#/body"
      },
      "children": [],
      "content_layer": "body",
      "label": "paragraph",
      "prov": [],
      "orig": " took precedence over the others since this particular device sits in a hotplug PCI-Express slot.",
      "text": " took precedence over the others since this particular device sits in a hotplug PCI-Express slot."
    },
    {
      "self_ref": "#/texts/36",
      "parent": {
        "$ref": "#/body"
      },
      "children": [],
      "content_layer": "body",
      "label": "paragraph",
      "prov": [],
      "orig": "We can find the slot number here:",
      "text": "We can find the slot number here:"
    },
    {
      "self_ref": "#/texts/37",
      "parent": {
        "$ref": "#/body"
      },
      "children": [],
      "content_layer": "body",
      "label": "code",
      "prov": [],
      "orig": "# lspci -v -s 08:00.00 | head -n 3\n08:00.0 Ethernet controller: Intel Corporation 82599ES 10-Gigabit SFI/SFP+ Network Connection (rev 01)\n    Subsystem: Intel Corporation Ethernet OCP Server Adapter X520-2\n    Physical Slot: 9",
      "text": "# lspci -v -s 08:00.00 | head -n 3\n08:00.0 Ethernet controller: Intel Corporation 82599ES 10-Gigabit SFI/SFP+ Network Connection (rev 01)\n    Subsystem: Intel Corporation Ethernet OCP Server Adapter X520-2\n    Physical Slot: 9",
      "captions": [],
      "references": [],
      "footnotes": [],
      "code_language": "unknown"
    },
    {
      "self_ref": "#/texts/38",
      "parent": {
        "$ref": "#/body"
      },
      "children": [],
      "content_layer": "body",
      "label": "paragraph",
      "prov": [],
      "orig": "Although this is a bit confusing, it can be helpful in servers when parts are added, removed, or replaced. You'll always be assured that the same device in the same slot will never be renamed.",
      "text": "Although this is a bit confusing, it can be helpful in servers when parts are added, removed, or replaced. You'll always be assured that the same device in the same slot will never be renamed."
    },
    {
      "self_ref": "#/texts/39",
      "parent": {
        "$ref": "#/body"
      },
      "children": [],
      "content_layer": "body",
      "label": "paragraph",
      "prov": [],
      "orig": "Our first ethernet device is called  ens9f0 , but what is the second device called?",
      "text": "Our first ethernet device is called  ens9f0 , but what is the second device called?"
    },
    {
      "self_ref": "#/texts/40",
      "parent": {
        "$ref": "#/body"
      },
      "children": [],
      "content_layer": "body",
      "label": "code",
      "prov": [],
      "orig": "# udevadm info -e | grep -A 9 ^P.*eth1\nP: /devices/pci0000:00/0000:00:03.2/0000:08:00.1/net/eth1\nE: DEVPATH=/devices/pci0000:00/0000:00:03.2/0000:08:00.1/net/eth1\nE: ID_BUS=pci\nE: ID_MODEL_FROM_DATABASE=82599ES 10-Gigabit SFI/SFP+ Network Connection (Ethernet OCP Server Adapter X520-2)\nE: ID_MODEL_ID=0x10fb\nE: ID_NET_DRIVER=ixgbe\nE: ID_NET_LINK_FILE=/usr/lib/systemd/network/99-default.link\nE: ID_NET_NAME_MAC=enxa0369f2cec91\nE: ID_NET_NAME_PATH=enp8s0f1\nE: ID_NET_NAME_SLOT=ens9f1",
      "text": "# udevadm info -e | grep -A 9 ^P.*eth1\nP: /devices/pci0000:00/0000:00:03.2/0000:08:00.1/net/eth1\nE: DEVPATH=/devices/pci0000:00/0000:00:03.2/0000:08:00.1/net/eth1\nE: ID_BUS=pci\nE: ID_MODEL_FROM_DATABASE=82599ES 10-Gigabit SFI/SFP+ Network Connection (Ethernet OCP Server Adapter X520-2)\nE: ID_MODEL_ID=0x10fb\nE: ID_NET_DRIVER=ixgbe\nE: ID_NET_LINK_FILE=/usr/lib/systemd/network/99-default.link\nE: ID_NET_NAME_MAC=enxa0369f2cec91\nE: ID_NET_NAME_PATH=enp8s0f1\nE: ID_NET_NAME_SLOT=ens9f1",
      "captions": [],
      "references": [],
      "footnotes": [],
      "code_language": "unknown"
    },
    {
      "self_ref": "#/texts/41",
      "parent": {
        "$ref": "#/body"
      },
      "children": [],
      "content_layer": "body",
      "label": "paragraph",
      "prov": [],
      "orig": "Now we know our ethernet devices are called  ens9f0  and  ens9f1 . It's time to configure systemd-networkd.",
      "text": "Now we know our ethernet devices are called  ens9f0  and  ens9f1 . It's time to configure systemd-networkd."
    },
    {
      "self_ref": "#/texts/42",
      "parent": {
        "$ref": "#/body"
      },
      "children": [],
      "content_layer": "body",
      "label": "section_header",
      "prov": [],
      "orig": "Bond interface creation",
      "text": "Bond interface creation",
      "level": 1
    },
    {
      "self_ref": "#/texts/43",
      "parent": {
        "$ref": "#/body"
      },
      "children": [],
      "content_layer": "body",
      "label": "paragraph",
      "prov": [],
      "orig": "Ensure that you have a ",
      "text": "Ensure that you have a "
    },
    {
      "self_ref": "#/texts/44",
      "parent": {
        "$ref": "#/body"
      },
      "children": [],
      "content_layer": "body",
      "label": "code",
      "prov": [],
      "orig": "/etc/systemd/network/",
      "text": "/etc/systemd/network/",
      "captions": [],
      "references": [],
      "footnotes": [],
      "code_language": "unknown"
    },
    {
      "self_ref": "#/texts/45",
      "parent": {
        "$ref": "#/body"
      },
      "children": [],
      "content_layer": "body",
      "label": "paragraph",
      "prov": [],
      "orig": " directory on your server and create the network device file:",
      "text": " directory on your server and create the network device file:"
    },
    {
      "self_ref": "#/texts/46",
      "parent": {
        "$ref": "#/body"
      },
      "children": [],
      "content_layer": "body",
      "label": "code",
      "prov": [],
      "orig": "# /etc/systemd/network/bond1.netdev\n[NetDev]\nName=bond1\nKind=bond\n\n[Bond]\nMode=802.3ad\nTransmitHashPolicy=layer3+4\nMIIMonitorSec=1s\nLACPTransmitRate=fast",
      "text": "# /etc/systemd/network/bond1.netdev\n[NetDev]\nName=bond1\nKind=bond\n\n[Bond]\nMode=802.3ad\nTransmitHashPolicy=layer3+4\nMIIMonitorSec=1s\nLACPTransmitRate=fast",
      "captions": [],
      "references": [],
      "footnotes": [],
      "code_language": "unknown"
    },
    {
      "self_ref": "#/texts/47",
      "parent": {
        "$ref": "#/body"
      },
      "children": [],
      "content_layer": "body",
      "label": "paragraph",
      "prov": [],
      "orig": "We're telling systemd-networkd that we want a new bond interface called  bond1  configured using 802.3ad mode. (Want to geek out on 802.3ad? Check out  IEEE's PDF .) In addition, we specify a transmit hash policy, a monitoring frequency, and a requested rate for LACP updates.",
      "text": "We're telling systemd-networkd that we want a new bond interface called  bond1  configured using 802.3ad mode. (Want to geek out on 802.3ad? Check out  IEEE's PDF .) In addition, we specify a transmit hash policy, a monitoring frequency, and a requested rate for LACP updates."
    },
    {
      "self_ref": "#/texts/48",
      "parent": {
        "$ref": "#/body"
      },
      "children": [],
      "content_layer": "body",
      "label": "paragraph",
      "prov": [],
      "orig": "Now that we have a device defined, we need to provide some network configuration:",
      "text": "Now that we have a device defined, we need to provide some network configuration:"
    },
    {
      "self_ref": "#/texts/49",
      "parent": {
        "$ref": "#/body"
      },
      "children": [],
      "content_layer": "body",
      "label": "code",
      "prov": [],
      "orig": "# /etc/systemd/network/bond1.network\n[Match]\nName=bond1\n\n[Network]\nVLAN=public\nVLAN=servicenet\nBindCarrier=ens9f0 ens9f1",
      "text": "# /etc/systemd/network/bond1.network\n[Match]\nName=bond1\n\n[Network]\nVLAN=public\nVLAN=servicenet\nBindCarrier=ens9f0 ens9f1",
      "captions": [],
      "references": [],
      "footnotes": [],
      "code_language": "unknown"
    },
    {
      "self_ref": "#/texts/50",
      "parent": {
        "$ref": "#/body"
      },
      "children": [],
      "content_layer": "body",
      "label": "paragraph",
      "prov": [],
      "orig": "This tells systemd-networkd that we have an interface called  bond1  and it has two VLANs configured on it (more on that later). Also, we specify the interfaces participating in the bond. This ensures that the bond comes up and down cleanly as interfaces change state.",
      "text": "This tells systemd-networkd that we have an interface called  bond1  and it has two VLANs configured on it (more on that later). Also, we specify the interfaces participating in the bond. This ensures that the bond comes up and down cleanly as interfaces change state."
    },
    {
      "self_ref": "#/texts/51",
      "parent": {
        "$ref": "#/body"
      },
      "children": [],
      "content_layer": "body",
      "label": "paragraph",
      "prov": [],
      "orig": "As one last step, we need to configure the physical interfaces themselves:",
      "text": "As one last step, we need to configure the physical interfaces themselves:"
    },
    {
      "self_ref": "#/texts/52",
      "parent": {
        "$ref": "#/body"
      },
      "children": [],
      "content_layer": "body",
      "label": "code",
      "prov": [],
      "orig": "# /etc/systemd/network/ens9f0.network\n[Match]\nName=ens9f0\n\n[Network]\nBond=bond1",
      "text": "# /etc/systemd/network/ens9f0.network\n[Match]\nName=ens9f0\n\n[Network]\nBond=bond1",
      "captions": [],
      "references": [],
      "footnotes": [],
      "code_language": "unknown"
    },
    {
      "self_ref": "#/texts/53",
      "parent": {
        "$ref": "#/body"
      },
      "children": [],
      "content_layer": "body",
      "label": "code",
      "prov": [],
      "orig": "# /etc/systemd/network/ens9f1.network\n[Match]\nName=ens9f1\n\n[Network]\nBond=bond1",
      "text": "# /etc/systemd/network/ens9f1.network\n[Match]\nName=ens9f1\n\n[Network]\nBond=bond1",
      "captions": [],
      "references": [],
      "footnotes": [],
      "code_language": "unknown"
    },
    {
      "self_ref": "#/texts/54",
      "parent": {
        "$ref": "#/body"
      },
      "children": [],
      "content_layer": "body",
      "label": "paragraph",
      "prov": [],
      "orig": "These files help systemd-networkd understand which interfaces are participating in the bond. You can get fancy here with your ",
      "text": "These files help systemd-networkd understand which interfaces are participating in the bond. You can get fancy here with your "
    },
    {
      "self_ref": "#/texts/55",
      "parent": {
        "$ref": "#/body"
      },
      "children": [],
      "content_layer": "body",
      "label": "code",
      "prov": [],
      "orig": "[Match]",
      "text": "[Match]",
      "captions": [],
      "references": [],
      "footnotes": [],
      "code_language": "unknown"
    },
    {
      "self_ref": "#/texts/56",
      "parent": {
        "$ref": "#/body"
      },
      "children": [],
      "content_layer": "body",
      "label": "paragraph",
      "prov": [],
      "orig": " sections and use only one interface file with ",
      "text": " sections and use only one interface file with "
    },
    {
      "self_ref": "#/texts/57",
      "parent": {
        "$ref": "#/body"
      },
      "children": [],
      "content_layer": "body",
      "label": "code",
      "prov": [],
      "orig": "ens9f*",
      "text": "ens9f*",
      "captions": [],
      "references": [],
      "footnotes": [],
      "code_language": "unknown"
    },
    {
      "self_ref": "#/texts/58",
      "parent": {
        "$ref": "#/body"
      },
      "children": [],
      "content_layer": "body",
      "label": "paragraph",
      "prov": [],
      "orig": ", but I prefer to be more explicit. Check the documentation for systemd-networkd for that.",
      "text": ", but I prefer to be more explicit. Check the documentation for systemd-networkd for that."
    },
    {
      "self_ref": "#/texts/59",
      "parent": {
        "$ref": "#/body"
      },
      "children": [],
      "content_layer": "body",
      "label": "section_header",
      "prov": [],
      "orig": "Public network VLAN",
      "text": "Public network VLAN",
      "level": 1
    },
    {
      "self_ref": "#/texts/60",
      "parent": {
        "$ref": "#/body"
      },
      "children": [],
      "content_layer": "body",
      "label": "paragraph",
      "prov": [],
      "orig": "The public network for your OnMetal server is delivered via a VLAN. Packets are tagged as VLAN 101 and you need to configure your network interface to handle that traffic. We already told systemd-networkd about our VLANs within the  bond1.network  file, but now we need to explain the configuration for the public network VLAN.",
      "text": "The public network for your OnMetal server is delivered via a VLAN. Packets are tagged as VLAN 101 and you need to configure your network interface to handle that traffic. We already told systemd-networkd about our VLANs within the  bond1.network  file, but now we need to explain the configuration for the public network VLAN."
    },
    {
      "self_ref": "#/texts/61",
      "parent": {
        "$ref": "#/body"
      },
      "children": [],
      "content_layer": "body",
      "label": "paragraph",
      "prov": [],
      "orig": "Start by creating a network device file:",
      "text": "Start by creating a network device file:"
    },
    {
      "self_ref": "#/texts/62",
      "parent": {
        "$ref": "#/body"
      },
      "children": [],
      "content_layer": "body",
      "label": "code",
      "prov": [],
      "orig": "# /etc/systemd/network/public.netdev\n[NetDev]\nName=public\nKind=vlan\nMACAddress=xx:xx:xx:xx:xx:xx\n\n[VLAN]\nId=101",
      "text": "# /etc/systemd/network/public.netdev\n[NetDev]\nName=public\nKind=vlan\nMACAddress=xx:xx:xx:xx:xx:xx\n\n[VLAN]\nId=101",
      "captions": [],
      "references": [],
      "footnotes": [],
      "code_language": "unknown"
    },
    {
      "self_ref": "#/texts/63",
      "parent": {
        "$ref": "#/body"
      },
      "children": [],
      "content_layer": "body",
      "label": "paragraph",
      "prov": [],
      "orig": "You can get the correct MAC address from the information in your server's config drive:",
      "text": "You can get the correct MAC address from the information in your server's config drive:"
    },
    {
      "self_ref": "#/texts/64",
      "parent": {
        "$ref": "#/body"
      },
      "children": [],
      "content_layer": "body",
      "label": "code",
      "prov": [],
      "orig": "mkdir /mnt/configdrive\nmount /dev/sda2 /mnt/configdrive/\npython -m json.tool /mnt/configdrive/openstack/latest/vendor_data.json",
      "text": "mkdir /mnt/configdrive\nmount /dev/sda2 /mnt/configdrive/\npython -m json.tool /mnt/configdrive/openstack/latest/vendor_data.json",
      "captions": [],
      "references": [],
      "footnotes": [],
      "code_language": "unknown"
    },
    {
      "self_ref": "#/texts/65",
      "parent": {
        "$ref": "#/body"
      },
      "children": [],
      "content_layer": "body",
      "label": "paragraph",
      "prov": [],
      "orig": "Look inside the ",
      "text": "Look inside the "
    },
    {
      "self_ref": "#/texts/66",
      "parent": {
        "$ref": "#/body"
      },
      "children": [],
      "content_layer": "body",
      "label": "code",
      "prov": [],
      "orig": "network_info",
      "text": "network_info",
      "captions": [],
      "references": [],
      "footnotes": [],
      "code_language": "unknown"
    },
    {
      "self_ref": "#/texts/67",
      "parent": {
        "$ref": "#/body"
      },
      "children": [],
      "content_layer": "body",
      "label": "paragraph",
      "prov": [],
      "orig": " section for ",
      "text": " section for "
    },
    {
      "self_ref": "#/texts/68",
      "parent": {
        "$ref": "#/body"
      },
      "children": [],
      "content_layer": "body",
      "label": "code",
      "prov": [],
      "orig": "vlan0",
      "text": "vlan0",
      "captions": [],
      "references": [],
      "footnotes": [],
      "code_language": "unknown"
    },
    {
      "self_ref": "#/texts/69",
      "parent": {
        "$ref": "#/body"
      },
      "children": [],
      "content_layer": "body",
      "label": "paragraph",
      "prov": [],
      "orig": ". It will look something like this:",
      "text": ". It will look something like this:"
    },
    {
      "self_ref": "#/texts/70",
      "parent": {
        "$ref": "#/body"
      },
      "children": [],
      "content_layer": "body",
      "label": "code",
      "prov": [],
      "orig": "{\n    \"ethernet_mac_address\": \"xx:xx:xx:xx:xx:xx\",\n    \"id\": \"vlan0\",\n    \"type\": \"vlan\",\n    \"vlan_id\": 101,\n    \"vlan_link\": \"bond0\"\n},",
      "text": "{\n    \"ethernet_mac_address\": \"xx:xx:xx:xx:xx:xx\",\n    \"id\": \"vlan0\",\n    \"type\": \"vlan\",\n    \"vlan_id\": 101,\n    \"vlan_link\": \"bond0\"\n},",
      "captions": [],
      "references": [],
      "footnotes": [],
      "code_language": "unknown"
    },
    {
      "self_ref": "#/texts/71",
      "parent": {
        "$ref": "#/body"
      },
      "children": [],
      "content_layer": "body",
      "label": "paragraph",
      "prov": [],
      "orig": "Take what you see in  ethernet mac address  and use that MAC address on the ",
      "text": "Take what you see in  ethernet mac address  and use that MAC address on the "
    },
    {
      "self_ref": "#/texts/72",
      "parent": {
        "$ref": "#/body"
      },
      "children": [],
      "content_layer": "body",
      "label": "code",
      "prov": [],
      "orig": "MACAddress",
      "text": "MACAddress",
      "captions": [],
      "references": [],
      "footnotes": [],
      "code_language": "unknown"
    },
    {
      "self_ref": "#/texts/73",
      "parent": {
        "$ref": "#/body"
      },
      "children": [],
      "content_layer": "body",
      "label": "paragraph",
      "prov": [],
      "orig": " line in your  public.netdev  file above.  If you skip this part, your packets won't make it onto the network.  For security reasons, the switch strictly checks to ensure that the right VLAN/IP/MAC combination is use when you communicate on the network.",
      "text": " line in your  public.netdev  file above.  If you skip this part, your packets won't make it onto the network.  For security reasons, the switch strictly checks to ensure that the right VLAN/IP/MAC combination is use when you communicate on the network."
    },
    {
      "self_ref": "#/texts/74",
      "parent": {
        "$ref": "#/body"
      },
      "children": [],
      "content_layer": "body",
      "label": "paragraph",
      "prov": [],
      "orig": "Now that we have a network device, let's actually configure the network on it:",
      "text": "Now that we have a network device, let's actually configure the network on it:"
    },
    {
      "self_ref": "#/texts/75",
      "parent": {
        "$ref": "#/body"
      },
      "children": [],
      "content_layer": "body",
      "label": "code",
      "prov": [],
      "orig": "# /etc/systemd/network/public.network\n[Match]\nName=public\n\n[Network]\nDNS=8.8.8.8\nDNS=8.8.4.4\n\n[Address]\nAddress=xxx.xxx.xxx.xxx/24\n\n[Route]\nDestination=0.0.0.0/0\nGateway=xxx.xxx.xxx.1",
      "text": "# /etc/systemd/network/public.network\n[Match]\nName=public\n\n[Network]\nDNS=8.8.8.8\nDNS=8.8.4.4\n\n[Address]\nAddress=xxx.xxx.xxx.xxx/24\n\n[Route]\nDestination=0.0.0.0/0\nGateway=xxx.xxx.xxx.1",
      "captions": [],
      "references": [],
      "footnotes": [],
      "code_language": "unknown"
    },
    {
      "self_ref": "#/texts/76",
      "parent": {
        "$ref": "#/body"
      },
      "children": [],
      "content_layer": "body",
      "label": "paragraph",
      "prov": [],
      "orig": "To get your IP address and gateway, you can use ",
      "text": "To get your IP address and gateway, you can use "
    },
    {
      "self_ref": "#/texts/77",
      "parent": {
        "$ref": "#/body"
      },
      "children": [],
      "content_layer": "body",
      "label": "code",
      "prov": [],
      "orig": "ip addr",
      "text": "ip addr",
      "captions": [],
      "references": [],
      "footnotes": [],
      "code_language": "unknown"
    },
    {
      "self_ref": "#/texts/78",
      "parent": {
        "$ref": "#/body"
      },
      "children": [],
      "content_layer": "body",
      "label": "paragraph",
      "prov": [],
      "orig": " and ",
      "text": " and "
    },
    {
      "self_ref": "#/texts/79",
      "parent": {
        "$ref": "#/body"
      },
      "children": [],
      "content_layer": "body",
      "label": "code",
      "prov": [],
      "orig": "ip route",
      "text": "ip route",
      "captions": [],
      "references": [],
      "footnotes": [],
      "code_language": "unknown"
    },
    {
      "self_ref": "#/texts/80",
      "parent": {
        "$ref": "#/body"
      },
      "children": [],
      "content_layer": "body",
      "label": "paragraph",
      "prov": [],
      "orig": ". Or, you can look in your config drive within the  networks  section for the same data. Ensure that your IP address and gateway are configured correctly. I've used Google's default DNS servers here but you can use your own if you prefer.",
      "text": ". Or, you can look in your config drive within the  networks  section for the same data. Ensure that your IP address and gateway are configured correctly. I've used Google's default DNS servers here but you can use your own if you prefer."
    },
    {
      "self_ref": "#/texts/81",
      "parent": {
        "$ref": "#/body"
      },
      "children": [],
      "content_layer": "body",
      "label": "section_header",
      "prov": [],
      "orig": "ServiceNet VLAN",
      "text": "ServiceNet VLAN",
      "level": 1
    },
    {
      "self_ref": "#/texts/82",
      "parent": {
        "$ref": "#/body"
      },
      "children": [],
      "content_layer": "body",
      "label": "paragraph",
      "prov": [],
      "orig": "Rackspace's ServiceNet is the backend network that connects you to other servers as well as other Rackspace products, like Cloud Databases and Cloud Files. We will configure this network in the same fashion, starting with the network device file:",
      "text": "Rackspace's ServiceNet is the backend network that connects you to other servers as well as other Rackspace products, like Cloud Databases and Cloud Files. We will configure this network in the same fashion, starting with the network device file:"
    },
    {
      "self_ref": "#/texts/83",
      "parent": {
        "$ref": "#/body"
      },
      "children": [],
      "content_layer": "body",
      "label": "code",
      "prov": [],
      "orig": "# /etc/systemd/network/servicenet.netdev\n[NetDev]\nName=servicenet\nKind=vlan\nMACAddress=xx:xx:xx:xx:xx:xx\n\n[VLAN]\nId=401",
      "text": "# /etc/systemd/network/servicenet.netdev\n[NetDev]\nName=servicenet\nKind=vlan\nMACAddress=xx:xx:xx:xx:xx:xx\n\n[VLAN]\nId=401",
      "captions": [],
      "references": [],
      "footnotes": [],
      "code_language": "unknown"
    },
    {
      "self_ref": "#/texts/84",
      "parent": {
        "$ref": "#/body"
      },
      "children": [],
      "content_layer": "body",
      "label": "paragraph",
      "prov": [],
      "orig": "As we did before, go look in your config drive for the right MAC address to use. You'll look in the  network_info  section again but this time you'll look for  vlan1",
      "text": "As we did before, go look in your config drive for the right MAC address to use. You'll look in the  network_info  section again but this time you'll look for  vlan1"
    },
    {
      "self_ref": "#/texts/85",
      "parent": {
        "$ref": "#/body"
      },
      "children": [],
      "content_layer": "body",
      "label": "paragraph",
      "prov": [],
      "orig": "Now we're ready to create the network file:",
      "text": "Now we're ready to create the network file:"
    },
    {
      "self_ref": "#/texts/86",
      "parent": {
        "$ref": "#/body"
      },
      "children": [],
      "content_layer": "body",
      "label": "code",
      "prov": [],
      "orig": "# /etc/systemd/network/servicenet.network\n[Match]\nName=servicenet\n\n[Network]\nAddress=xxx.xxx.xxx.xxx/20\n\n[Route]\nDestination=10.176.0.0/12\nGateway=10.184.0.1\n\n[Route]\nDestination=10.208.0.0/12\nGateway=10.184.0.1",
      "text": "# /etc/systemd/network/servicenet.network\n[Match]\nName=servicenet\n\n[Network]\nAddress=xxx.xxx.xxx.xxx/20\n\n[Route]\nDestination=10.176.0.0/12\nGateway=10.184.0.1\n\n[Route]\nDestination=10.208.0.0/12\nGateway=10.184.0.1",
      "captions": [],
      "references": [],
      "footnotes": [],
      "code_language": "unknown"
    },
    {
      "self_ref": "#/texts/87",
      "parent": {
        "$ref": "#/body"
      },
      "children": [],
      "content_layer": "body",
      "label": "paragraph",
      "prov": [],
      "orig": "Review your config drive json for the correct IP address and routes. Your routes will likely be the same as mine, but that can change over time.",
      "text": "Review your config drive json for the correct IP address and routes. Your routes will likely be the same as mine, but that can change over time."
    },
    {
      "self_ref": "#/texts/88",
      "parent": {
        "$ref": "#/body"
      },
      "children": [],
      "content_layer": "body",
      "label": "section_header",
      "prov": [],
      "orig": "Enable systemd-networkd",
      "text": "Enable systemd-networkd",
      "level": 1
    },
    {
      "self_ref": "#/texts/89",
      "parent": {
        "$ref": "#/body"
      },
      "children": [],
      "content_layer": "body",
      "label": "paragraph",
      "prov": [],
      "orig": "All of our configuration files are in place, but now we need to enable systemd-networkd at boot time:",
      "text": "All of our configuration files are in place, but now we need to enable systemd-networkd at boot time:"
    },
    {
      "self_ref": "#/texts/90",
      "parent": {
        "$ref": "#/body"
      },
      "children": [],
      "content_layer": "body",
      "label": "code",
      "prov": [],
      "orig": "systemctl disable network\nsystemctl disable NetworkManager\nsystemctl enable systemd-networkd\nsystemctl enable systemd-resolved",
      "text": "systemctl disable network\nsystemctl disable NetworkManager\nsystemctl enable systemd-networkd\nsystemctl enable systemd-resolved",
      "captions": [],
      "references": [],
      "footnotes": [],
      "code_language": "unknown"
    },
    {
      "self_ref": "#/texts/91",
      "parent": {
        "$ref": "#/body"
      },
      "children": [],
      "content_layer": "body",
      "label": "paragraph",
      "prov": [],
      "orig": "We also need to let systemd-resolved handle our DNS resolution:",
      "text": "We also need to let systemd-resolved handle our DNS resolution:"
    },
    {
      "self_ref": "#/texts/92",
      "parent": {
        "$ref": "#/body"
      },
      "children": [],
      "content_layer": "body",
      "label": "code",
      "prov": [],
      "orig": "systemctl start systemd-resolved\nrm /etc/resolv.conf\nln -s /run/systemd/resolve/resolv.conf /etc/resolv.conf",
      "text": "systemctl start systemd-resolved\nrm /etc/resolv.conf\nln -s /run/systemd/resolve/resolv.conf /etc/resolv.conf",
      "captions": [],
      "references": [],
      "footnotes": [],
      "code_language": "unknown"
    },
    {
      "self_ref": "#/texts/93",
      "parent": {
        "$ref": "#/body"
      },
      "children": [],
      "content_layer": "body",
      "label": "paragraph",
      "prov": [],
      "orig": "Finally, there's one last gotcha that is only on OnMetal that needs to be removed. Comment out the second and third line in ",
      "text": "Finally, there's one last gotcha that is only on OnMetal that needs to be removed. Comment out the second and third line in "
    },
    {
      "self_ref": "#/texts/94",
      "parent": {
        "$ref": "#/body"
      },
      "children": [],
      "content_layer": "body",
      "label": "code",
      "prov": [],
      "orig": "/etc/rc.d/rc.local",
      "text": "/etc/rc.d/rc.local",
      "captions": [],
      "references": [],
      "footnotes": [],
      "code_language": "unknown"
    },
    {
      "self_ref": "#/texts/95",
      "parent": {
        "$ref": "#/body"
      },
      "children": [],
      "content_layer": "body",
      "label": "paragraph",
      "prov": [],
      "orig": ":",
      "text": ":"
    },
    {
      "self_ref": "#/texts/96",
      "parent": {
        "$ref": "#/body"
      },
      "children": [],
      "content_layer": "body",
      "label": "code",
      "prov": [],
      "orig": "#!/usr/bin/sh\n#sleep 20\n#/etc/init.d/network restart\nexit 0",
      "text": "#!/usr/bin/sh\n#sleep 20\n#/etc/init.d/network restart\nexit 0",
      "captions": [],
      "references": [],
      "footnotes": [],
      "code_language": "unknown"
    },
    {
      "self_ref": "#/texts/97",
      "parent": {
        "$ref": "#/body"
      },
      "children": [],
      "content_layer": "body",
      "label": "paragraph",
      "prov": [],
      "orig": "That's there as a workaround for some network issues that sometimes appear during first boot. We won't need it with systemd-networkd.",
      "text": "That's there as a workaround for some network issues that sometimes appear during first boot. We won't need it with systemd-networkd."
    },
    {
      "self_ref": "#/texts/98",
      "parent": {
        "$ref": "#/body"
      },
      "children": [],
      "content_layer": "body",
      "label": "section_header",
      "prov": [],
      "orig": "Reboot",
      "text": "Reboot",
      "level": 1
    },
    {
      "self_ref": "#/texts/99",
      "parent": {
        "$ref": "#/body"
      },
      "children": [],
      "content_layer": "body",
      "label": "paragraph",
      "prov": [],
      "orig": "We're ready to test our new configuration! First, let's disable the forced old interface names on the kernel command line. Open ",
      "text": "We're ready to test our new configuration! First, let's disable the forced old interface names on the kernel command line. Open "
    },
    {
      "self_ref": "#/texts/100",
      "parent": {
        "$ref": "#/body"
      },
      "children": [],
      "content_layer": "body",
      "label": "code",
      "prov": [],
      "orig": "/boot/extlinux.conf",
      "text": "/boot/extlinux.conf",
      "captions": [],
      "references": [],
      "footnotes": [],
      "code_language": "unknown"
    },
    {
      "self_ref": "#/texts/101",
      "parent": {
        "$ref": "#/body"
      },
      "children": [],
      "content_layer": "body",
      "label": "paragraph",
      "prov": [],
      "orig": " and ensure that the following two items are not in the kernel command line:",
      "text": " and ensure that the following two items are not in the kernel command line:"
    },
    {
      "self_ref": "#/texts/102",
      "parent": {
        "$ref": "#/groups/2"
      },
      "children": [],
      "content_layer": "body",
      "label": "list_item",
      "prov": [],
      "orig": "net.ifnames=0",
      "text": "net.ifnames=0",
      "enumerated": false,
      "marker": "-"
    },
    {
      "self_ref": "#/texts/103",
      "parent": {
        "$ref": "#/groups/2"
      },
      "children": [],
      "content_layer": "body",
      "label": "list_item",
      "prov": [],
      "orig": "biosdevname=0",
      "text": "biosdevname=0",
      "enumerated": false,
      "marker": "-"
    },
    {
      "self_ref": "#/texts/104",
      "parent": {
        "$ref": "#/body"
      },
      "children": [],
      "content_layer": "body",
      "label": "paragraph",
      "prov": [],
      "orig": "Remove them from any kernel command lines you see and save the file. Reboot and cross your fingers.",
      "text": "Remove them from any kernel command lines you see and save the file. Reboot and cross your fingers."
    },
    {
      "self_ref": "#/texts/105",
      "parent": {
        "$ref": "#/body"
      },
      "children": [],
      "content_layer": "body",
      "label": "section_header",
      "prov": [],
      "orig": "Checking our work",
      "text": "Checking our work",
      "level": 1
    },
    {
      "self_ref": "#/texts/106",
      "parent": {
        "$ref": "#/body"
      },
      "children": [],
      "content_layer": "body",
      "label": "paragraph",
      "prov": [],
      "orig": "If you get pings after a reboot, you did well! If you didn't. you can use OnMetal's rescue mode to hop into a temporary OS and mount your root volume. Be sure to look inside ",
      "text": "If you get pings after a reboot, you did well! If you didn't. you can use OnMetal's rescue mode to hop into a temporary OS and mount your root volume. Be sure to look inside "
    },
    {
      "self_ref": "#/texts/107",
      "parent": {
        "$ref": "#/body"
      },
      "children": [],
      "content_layer": "body",
      "label": "code",
      "prov": [],
      "orig": "/var/log/messages",
      "text": "/var/log/messages",
      "captions": [],
      "references": [],
      "footnotes": [],
      "code_language": "unknown"
    },
    {
      "self_ref": "#/texts/108",
      "parent": {
        "$ref": "#/body"
      },
      "children": [],
      "content_layer": "body",
      "label": "paragraph",
      "prov": [],
      "orig": " for signs of typos or other errors.",
      "text": " for signs of typos or other errors."
    },
    {
      "self_ref": "#/texts/109",
      "parent": {
        "$ref": "#/body"
      },
      "children": [],
      "content_layer": "body",
      "label": "paragraph",
      "prov": [],
      "orig": "We can use some simple tools to review our network status:",
      "text": "We can use some simple tools to review our network status:"
    },
    {
      "self_ref": "#/texts/110",
      "parent": {
        "$ref": "#/body"
      },
      "children": [],
      "content_layer": "body",
      "label": "code",
      "prov": [],
      "orig": "# networkctl\nIDX LINK             TYPE               OPERATIONAL SETUP\n  1 lo               loopback           carrier     unmanaged\n  2 bond0            ether              off         unmanaged\n  3 bond1            ether              degraded    configured\n  4 public           ether              routable    configured\n  5 servicenet       ether              routable    configured\n  6 ens9f0           ether              carrier     configured\n  7 ens9f1           ether              carrier     configured",
      "text": "# networkctl\nIDX LINK             TYPE               OPERATIONAL SETUP\n  1 lo               loopback           carrier     unmanaged\n  2 bond0            ether              off         unmanaged\n  3 bond1            ether              degraded    configured\n  4 public           ether              routable    configured\n  5 servicenet       ether              routable    configured\n  6 ens9f0           ether              carrier     configured\n  7 ens9f1           ether              carrier     configured",
      "captions": [],
      "references": [],
      "footnotes": [],
      "code_language": "unknown"
    },
    {
      "self_ref": "#/texts/111",
      "parent": {
        "$ref": "#/body"
      },
      "children": [],
      "content_layer": "body",
      "label": "paragraph",
      "prov": [],
      "orig": "Don't be afraid of the  degraded  status for  bond1 . That's there because systemd doesn't have networking configuration for the interface since we do that with our VLANs. Also, both physical network interfaces are listed as  carrier  because they don't have network configuration, either. They're just participating in the bond.",
      "text": "Don't be afraid of the  degraded  status for  bond1 . That's there because systemd doesn't have networking configuration for the interface since we do that with our VLANs. Also, both physical network interfaces are listed as  carrier  because they don't have network configuration, either. They're just participating in the bond."
    },
    {
      "self_ref": "#/texts/112",
      "parent": {
        "$ref": "#/body"
      },
      "children": [],
      "content_layer": "body",
      "label": "paragraph",
      "prov": [],
      "orig": "Feel free to ignore  bond0 , too. The bonding module in the Linux kernel automatically creates the interface when it's loaded.",
      "text": "Feel free to ignore  bond0 , too. The bonding module in the Linux kernel automatically creates the interface when it's loaded."
    },
    {
      "self_ref": "#/texts/113",
      "parent": {
        "$ref": "#/body"
      },
      "children": [],
      "content_layer": "body",
      "label": "section_header",
      "prov": [],
      "orig": "Extra credit: Switch to grub2",
      "text": "Extra credit: Switch to grub2",
      "level": 1
    },
    {
      "self_ref": "#/texts/114",
      "parent": {
        "$ref": "#/body"
      },
      "children": [],
      "content_layer": "body",
      "label": "paragraph",
      "prov": [],
      "orig": "Sure, extlinux is fine for most use cases, but I prefer something a little more powerful. Luckily, switching to grub2 is quite painless:",
      "text": "Sure, extlinux is fine for most use cases, but I prefer something a little more powerful. Luckily, switching to grub2 is quite painless:"
    },
    {
      "self_ref": "#/texts/115",
      "parent": {
        "$ref": "#/body"
      },
      "children": [],
      "content_layer": "body",
      "label": "code",
      "prov": [],
      "orig": "dnf -y remove syslinux-extlinux\nrm -f /boot/extlinux.conf\ndnf -y install grubby grub2\ngrub2-mkconfig -o /boot/grub2/grub.cfg\ngrub2-install /dev/sda",
      "text": "dnf -y remove syslinux-extlinux\nrm -f /boot/extlinux.conf\ndnf -y install grubby grub2\ngrub2-mkconfig -o /boot/grub2/grub.cfg\ngrub2-install /dev/sda",
      "captions": [],
      "references": [],
      "footnotes": [],
      "code_language": "unknown"
    },
    {
      "self_ref": "#/texts/116",
      "parent": {
        "$ref": "#/body"
      },
      "children": [],
      "content_layer": "body",
      "label": "paragraph",
      "prov": [],
      "orig": "Simply reboot and you'll be booting with grub2!",
      "text": "Simply reboot and you'll be booting with grub2!"
    }
  ],
  "pictures": [
    {
      "self_ref": "#/pictures/0",
      "parent": {
        "$ref": "#/body"
      },
      "children": [],
      "content_layer": "body",
      "label": "picture",
      "prov": [],
      "captions": [],
      "references": [],
      "footnotes": [],
      "annotations": []
    }
  ],
  "tables": [],
  "key_value_items": [],
  "form_items": [],
  "pages": {}
}