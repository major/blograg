{
  "schema_name": "DoclingDocument",
  "version": "1.4.0",
  "name": "index",
  "origin": {
    "mimetype": "text/markdown",
    "binary_hash": 8810893477683900815,
    "filename": "index.md"
  },
  "furniture": {
    "self_ref": "#/furniture",
    "children": [],
    "content_layer": "furniture",
    "name": "_root_",
    "label": "unspecified"
  },
  "body": {
    "self_ref": "#/body",
    "children": [
      {
        "$ref": "#/texts/0"
      },
      {
        "$ref": "#/texts/1"
      },
      {
        "$ref": "#/texts/2"
      },
      {
        "$ref": "#/groups/0"
      },
      {
        "$ref": "#/texts/7"
      },
      {
        "$ref": "#/texts/8"
      },
      {
        "$ref": "#/texts/9"
      },
      {
        "$ref": "#/texts/10"
      },
      {
        "$ref": "#/groups/1"
      },
      {
        "$ref": "#/texts/14"
      },
      {
        "$ref": "#/texts/15"
      },
      {
        "$ref": "#/texts/16"
      },
      {
        "$ref": "#/texts/17"
      },
      {
        "$ref": "#/texts/18"
      },
      {
        "$ref": "#/texts/19"
      },
      {
        "$ref": "#/texts/20"
      },
      {
        "$ref": "#/texts/21"
      },
      {
        "$ref": "#/texts/22"
      },
      {
        "$ref": "#/groups/2"
      },
      {
        "$ref": "#/texts/27"
      },
      {
        "$ref": "#/texts/28"
      },
      {
        "$ref": "#/texts/29"
      },
      {
        "$ref": "#/texts/30"
      },
      {
        "$ref": "#/texts/31"
      },
      {
        "$ref": "#/groups/3"
      },
      {
        "$ref": "#/texts/36"
      },
      {
        "$ref": "#/texts/37"
      },
      {
        "$ref": "#/texts/38"
      },
      {
        "$ref": "#/texts/39"
      },
      {
        "$ref": "#/texts/40"
      },
      {
        "$ref": "#/texts/41"
      },
      {
        "$ref": "#/texts/42"
      },
      {
        "$ref": "#/texts/43"
      },
      {
        "$ref": "#/texts/44"
      },
      {
        "$ref": "#/groups/4"
      },
      {
        "$ref": "#/texts/49"
      },
      {
        "$ref": "#/texts/50"
      },
      {
        "$ref": "#/texts/51"
      },
      {
        "$ref": "#/texts/52"
      },
      {
        "$ref": "#/texts/53"
      },
      {
        "$ref": "#/texts/54"
      },
      {
        "$ref": "#/texts/55"
      },
      {
        "$ref": "#/texts/56"
      },
      {
        "$ref": "#/texts/57"
      },
      {
        "$ref": "#/texts/58"
      },
      {
        "$ref": "#/texts/59"
      },
      {
        "$ref": "#/texts/60"
      },
      {
        "$ref": "#/texts/61"
      },
      {
        "$ref": "#/texts/62"
      },
      {
        "$ref": "#/texts/63"
      },
      {
        "$ref": "#/texts/64"
      },
      {
        "$ref": "#/texts/65"
      },
      {
        "$ref": "#/texts/66"
      },
      {
        "$ref": "#/texts/67"
      },
      {
        "$ref": "#/texts/68"
      },
      {
        "$ref": "#/texts/69"
      },
      {
        "$ref": "#/texts/70"
      },
      {
        "$ref": "#/texts/71"
      },
      {
        "$ref": "#/texts/72"
      },
      {
        "$ref": "#/texts/73"
      },
      {
        "$ref": "#/texts/74"
      },
      {
        "$ref": "#/texts/75"
      },
      {
        "$ref": "#/texts/76"
      },
      {
        "$ref": "#/texts/77"
      },
      {
        "$ref": "#/texts/78"
      },
      {
        "$ref": "#/texts/79"
      },
      {
        "$ref": "#/texts/80"
      }
    ],
    "content_layer": "body",
    "name": "_root_",
    "label": "unspecified"
  },
  "groups": [
    {
      "self_ref": "#/groups/0",
      "parent": {
        "$ref": "#/body"
      },
      "children": [
        {
          "$ref": "#/texts/3"
        },
        {
          "$ref": "#/texts/4"
        },
        {
          "$ref": "#/texts/5"
        },
        {
          "$ref": "#/texts/6"
        }
      ],
      "content_layer": "body",
      "name": "list",
      "label": "ordered_list"
    },
    {
      "self_ref": "#/groups/1",
      "parent": {
        "$ref": "#/body"
      },
      "children": [
        {
          "$ref": "#/texts/11"
        },
        {
          "$ref": "#/texts/12"
        },
        {
          "$ref": "#/texts/13"
        }
      ],
      "content_layer": "body",
      "name": "list",
      "label": "list"
    },
    {
      "self_ref": "#/groups/2",
      "parent": {
        "$ref": "#/body"
      },
      "children": [
        {
          "$ref": "#/texts/23"
        },
        {
          "$ref": "#/texts/24"
        },
        {
          "$ref": "#/texts/25"
        },
        {
          "$ref": "#/texts/26"
        }
      ],
      "content_layer": "body",
      "name": "list",
      "label": "ordered_list"
    },
    {
      "self_ref": "#/groups/3",
      "parent": {
        "$ref": "#/body"
      },
      "children": [
        {
          "$ref": "#/texts/32"
        },
        {
          "$ref": "#/texts/33"
        },
        {
          "$ref": "#/texts/34"
        },
        {
          "$ref": "#/texts/35"
        }
      ],
      "content_layer": "body",
      "name": "list",
      "label": "ordered_list"
    },
    {
      "self_ref": "#/groups/4",
      "parent": {
        "$ref": "#/body"
      },
      "children": [
        {
          "$ref": "#/texts/45"
        },
        {
          "$ref": "#/texts/46"
        },
        {
          "$ref": "#/texts/47"
        },
        {
          "$ref": "#/texts/48"
        }
      ],
      "content_layer": "body",
      "name": "list",
      "label": "ordered_list"
    }
  ],
  "texts": [
    {
      "self_ref": "#/texts/0",
      "parent": {
        "$ref": "#/body"
      },
      "children": [],
      "content_layer": "body",
      "label": "paragraph",
      "prov": [],
      "orig": "author: Major Hayden date: '2023-09-13' summary: > Fedora now has the AWS Elastic File Store (EFS) mount helper available for Fedora 38 and newer releases! It chooses optimized NFS mount options for you and makes mounting and unmounting a breeze. tags: - aws - cloud - fedora - linux - python title: Mounting the AWS Elastic File Store on Fedora coverAlt: Toyota 4runner in the snow on a mountain Photo by  Maxime Agnelli  on Unsplash",
      "text": "author: Major Hayden date: '2023-09-13' summary: > Fedora now has the AWS Elastic File Store (EFS) mount helper available for Fedora 38 and newer releases! It chooses optimized NFS mount options for you and makes mounting and unmounting a breeze. tags: - aws - cloud - fedora - linux - python title: Mounting the AWS Elastic File Store on Fedora coverAlt: Toyota 4runner in the snow on a mountain Photo by  Maxime Agnelli  on Unsplash"
    },
    {
      "self_ref": "#/texts/1",
      "parent": {
        "$ref": "#/body"
      },
      "children": [],
      "content_layer": "body",
      "label": "paragraph",
      "prov": [],
      "orig": "I package a few things here and there in  Fedora  and one of my latest packages is  efs-utils . AWS offers a mount helper for their  Elastic File System (EFS)  product on  GitHub .",
      "text": "I package a few things here and there in  Fedora  and one of my latest packages is  efs-utils . AWS offers a mount helper for their  Elastic File System (EFS)  product on  GitHub ."
    },
    {
      "self_ref": "#/texts/2",
      "parent": {
        "$ref": "#/body"
      },
      "children": [],
      "content_layer": "body",
      "label": "paragraph",
      "prov": [],
      "orig": "In this post, I'll explain how to:",
      "text": "In this post, I'll explain how to:"
    },
    {
      "self_ref": "#/texts/3",
      "parent": {
        "$ref": "#/groups/0"
      },
      "children": [],
      "content_layer": "body",
      "label": "list_item",
      "prov": [],
      "orig": "Launch a Fedora instance on AWS EC2",
      "text": "Launch a Fedora instance on AWS EC2",
      "enumerated": false,
      "marker": "-"
    },
    {
      "self_ref": "#/texts/4",
      "parent": {
        "$ref": "#/groups/0"
      },
      "children": [],
      "content_layer": "body",
      "label": "list_item",
      "prov": [],
      "orig": "Install ",
      "text": "Install ",
      "enumerated": false,
      "marker": "-"
    },
    {
      "self_ref": "#/texts/5",
      "parent": {
        "$ref": "#/groups/0"
      },
      "children": [],
      "content_layer": "body",
      "label": "list_item",
      "prov": [],
      "orig": "Create an EFS volume in the AWS console",
      "text": "Create an EFS volume in the AWS console",
      "enumerated": false,
      "marker": "-"
    },
    {
      "self_ref": "#/texts/6",
      "parent": {
        "$ref": "#/groups/0"
      },
      "children": [],
      "content_layer": "body",
      "label": "list_item",
      "prov": [],
      "orig": "Mount the EFS volume inside the Fedora instance",
      "text": "Mount the EFS volume inside the Fedora instance",
      "enumerated": false,
      "marker": "-"
    },
    {
      "self_ref": "#/texts/7",
      "parent": {
        "$ref": "#/body"
      },
      "children": [],
      "content_layer": "body",
      "label": "paragraph",
      "prov": [],
      "orig": "{{< alert \"skull-crossbones\" >}} Always check the pricing for any cloud service before you use it! EFS pricing  is based on how much you store and how often you access it. Backups are also enabled by default and they add to the monthly charges. {{< /alert >}}",
      "text": "{{< alert \"skull-crossbones\" >}} Always check the pricing for any cloud service before you use it! EFS pricing  is based on how much you store and how often you access it. Backups are also enabled by default and they add to the monthly charges. {{< /alert >}}"
    },
    {
      "self_ref": "#/texts/8",
      "parent": {
        "$ref": "#/body"
      },
      "children": [],
      "content_layer": "body",
      "label": "paragraph",
      "prov": [],
      "orig": "Let's go! \ud83d\ude80",
      "text": "Let's go! \ud83d\ude80"
    },
    {
      "self_ref": "#/texts/9",
      "parent": {
        "$ref": "#/body"
      },
      "children": [],
      "content_layer": "body",
      "label": "title",
      "prov": [],
      "orig": "Wait, what is EFS?",
      "text": "Wait, what is EFS?"
    },
    {
      "self_ref": "#/texts/10",
      "parent": {
        "$ref": "#/body"
      },
      "children": [],
      "content_layer": "body",
      "label": "paragraph",
      "prov": [],
      "orig": "When you launch a cloud instance (virtual machine) on most clouds, you have different storage options available to you:",
      "text": "When you launch a cloud instance (virtual machine) on most clouds, you have different storage options available to you:"
    },
    {
      "self_ref": "#/texts/11",
      "parent": {
        "$ref": "#/groups/1"
      },
      "children": [],
      "content_layer": "body",
      "label": "list_item",
      "prov": [],
      "orig": "[<RawText children='Block storage:'>]",
      "text": "[<RawText children='Block storage:'>]",
      "enumerated": false,
      "marker": "-"
    },
    {
      "self_ref": "#/texts/12",
      "parent": {
        "$ref": "#/groups/1"
      },
      "children": [],
      "content_layer": "body",
      "label": "list_item",
      "prov": [],
      "orig": "[<RawText children='Object storage:'>]",
      "text": "[<RawText children='Object storage:'>]",
      "enumerated": false,
      "marker": "-"
    },
    {
      "self_ref": "#/texts/13",
      "parent": {
        "$ref": "#/groups/1"
      },
      "children": [],
      "content_layer": "body",
      "label": "list_item",
      "prov": [],
      "orig": "[<RawText children='Shared filesystems:'>]",
      "text": "[<RawText children='Shared filesystems:'>]",
      "enumerated": false,
      "marker": "-"
    },
    {
      "self_ref": "#/texts/14",
      "parent": {
        "$ref": "#/body"
      },
      "children": [],
      "content_layer": "body",
      "label": "paragraph",
      "prov": [],
      "orig": "Using EFS is almost like having someone else host a network accessible storage (NAS) device within your cloud deployment.",
      "text": "Using EFS is almost like having someone else host a network accessible storage (NAS) device within your cloud deployment."
    },
    {
      "self_ref": "#/texts/15",
      "parent": {
        "$ref": "#/body"
      },
      "children": [],
      "content_layer": "body",
      "label": "title",
      "prov": [],
      "orig": "Launching Fedora",
      "text": "Launching Fedora"
    },
    {
      "self_ref": "#/texts/16",
      "parent": {
        "$ref": "#/body"
      },
      "children": [],
      "content_layer": "body",
      "label": "paragraph",
      "prov": [],
      "orig": "Every image in AWS has an AMI ID attached to it and you need to know the ID for the image you want in your region. You can find these quickly for Fedora by visiting the  Fedora Cloud download page . Look for  AWS  in the list, click the button on that row, and you'll see a list of Fedora AMI IDs. Click the rocket (\ud83d\ude80) for your preferred region and you're linked directly to launch that instance in AWS!",
      "text": "Every image in AWS has an AMI ID attached to it and you need to know the ID for the image you want in your region. You can find these quickly for Fedora by visiting the  Fedora Cloud download page . Look for  AWS  in the list, click the button on that row, and you'll see a list of Fedora AMI IDs. Click the rocket (\ud83d\ude80) for your preferred region and you're linked directly to launch that instance in AWS!"
    },
    {
      "self_ref": "#/texts/17",
      "parent": {
        "$ref": "#/body"
      },
      "children": [],
      "content_layer": "body",
      "label": "paragraph",
      "prov": [],
      "orig": "I'm clicking the  launch link for us-east-2 (Ohio) [^ohio]. To finish quickly, I'm choosing all of the default options and using a spot instance (look inside  Advanced details  at the bottom of the page).",
      "text": "I'm clicking the  launch link for us-east-2 (Ohio) [^ohio]. To finish quickly, I'm choosing all of the default options and using a spot instance (look inside  Advanced details  at the bottom of the page)."
    },
    {
      "self_ref": "#/texts/18",
      "parent": {
        "$ref": "#/body"
      },
      "children": [],
      "content_layer": "body",
      "label": "paragraph",
      "prov": [],
      "orig": "Wait for the instance to finish intializing and access it via ssh:",
      "text": "Wait for the instance to finish intializing and access it via ssh:"
    },
    {
      "self_ref": "#/texts/19",
      "parent": {
        "$ref": "#/body"
      },
      "children": [],
      "content_layer": "body",
      "label": "code",
      "prov": [],
      "orig": "$ ssh fedora@EXTERNAL_IP\n[fedora@ip-172-31-2-38 ~]$ cat /etc/fedora-release \nFedora release 38 (Thirty Eight)",
      "text": "$ ssh fedora@EXTERNAL_IP\n[fedora@ip-172-31-2-38 ~]$ cat /etc/fedora-release \nFedora release 38 (Thirty Eight)",
      "captions": [],
      "references": [],
      "footnotes": [],
      "code_language": "unknown"
    },
    {
      "self_ref": "#/texts/20",
      "parent": {
        "$ref": "#/body"
      },
      "children": [],
      "content_layer": "body",
      "label": "paragraph",
      "prov": [],
      "orig": "Success! \ud83c\udf89",
      "text": "Success! \ud83c\udf89"
    },
    {
      "self_ref": "#/texts/21",
      "parent": {
        "$ref": "#/body"
      },
      "children": [],
      "content_layer": "body",
      "label": "title",
      "prov": [],
      "orig": "Prepare your security group",
      "text": "Prepare your security group"
    },
    {
      "self_ref": "#/texts/22",
      "parent": {
        "$ref": "#/body"
      },
      "children": [],
      "content_layer": "body",
      "label": "paragraph",
      "prov": [],
      "orig": "Before leaving the EC2 console, you need to make a note of the security group that you used for this instance. That's because EFS uses security groups to guard access to volumes. Follow these steps to find it:",
      "text": "Before leaving the EC2 console, you need to make a note of the security group that you used for this instance. That's because EFS uses security groups to guard access to volumes. Follow these steps to find it:"
    },
    {
      "self_ref": "#/texts/23",
      "parent": {
        "$ref": "#/groups/2"
      },
      "children": [],
      "content_layer": "body",
      "label": "list_item",
      "prov": [],
      "orig": "Click ",
      "text": "Click ",
      "enumerated": false,
      "marker": "-"
    },
    {
      "self_ref": "#/texts/24",
      "parent": {
        "$ref": "#/groups/2"
      },
      "children": [],
      "content_layer": "body",
      "label": "list_item",
      "prov": [],
      "orig": "Click on the row showing the instance we just created.",
      "text": "Click on the row showing the instance we just created.",
      "enumerated": false,
      "marker": "-"
    },
    {
      "self_ref": "#/texts/25",
      "parent": {
        "$ref": "#/groups/2"
      },
      "children": [],
      "content_layer": "body",
      "label": "list_item",
      "prov": [],
      "orig": "In the bottom half of the screen, click the ",
      "text": "In the bottom half of the screen, click the ",
      "enumerated": false,
      "marker": "-"
    },
    {
      "self_ref": "#/texts/26",
      "parent": {
        "$ref": "#/groups/2"
      },
      "children": [],
      "content_layer": "body",
      "label": "list_item",
      "prov": [],
      "orig": "Look for ",
      "text": "Look for ",
      "enumerated": false,
      "marker": "-"
    },
    {
      "self_ref": "#/texts/27",
      "parent": {
        "$ref": "#/body"
      },
      "children": [],
      "content_layer": "body",
      "label": "paragraph",
      "prov": [],
      "orig": "It should be in the format ",
      "text": "It should be in the format "
    },
    {
      "self_ref": "#/texts/28",
      "parent": {
        "$ref": "#/body"
      },
      "children": [],
      "content_layer": "body",
      "label": "code",
      "prov": [],
      "orig": "sg-[a-f0-9]*",
      "text": "sg-[a-f0-9]*",
      "captions": [],
      "references": [],
      "footnotes": [],
      "code_language": "unknown"
    },
    {
      "self_ref": "#/texts/29",
      "parent": {
        "$ref": "#/body"
      },
      "children": [],
      "content_layer": "body",
      "label": "paragraph",
      "prov": [],
      "orig": ".",
      "text": "."
    },
    {
      "self_ref": "#/texts/30",
      "parent": {
        "$ref": "#/body"
      },
      "children": [],
      "content_layer": "body",
      "label": "paragraph",
      "prov": [],
      "orig": "If you click the security group name (after saving it), you'll see the inbound rules associated with that security group. By default, items in the same security group can't talk to each other. We need to allow that so our EFS mount will work later.",
      "text": "If you click the security group name (after saving it), you'll see the inbound rules associated with that security group. By default, items in the same security group can't talk to each other. We need to allow that so our EFS mount will work later."
    },
    {
      "self_ref": "#/texts/31",
      "parent": {
        "$ref": "#/body"
      },
      "children": [],
      "content_layer": "body",
      "label": "paragraph",
      "prov": [],
      "orig": "Click  Edit inbound rules  and do the following:",
      "text": "Click  Edit inbound rules  and do the following:"
    },
    {
      "self_ref": "#/texts/32",
      "parent": {
        "$ref": "#/groups/3"
      },
      "children": [],
      "content_layer": "body",
      "label": "list_item",
      "prov": [],
      "orig": "Click ",
      "text": "Click ",
      "enumerated": false,
      "marker": "-"
    },
    {
      "self_ref": "#/texts/33",
      "parent": {
        "$ref": "#/groups/3"
      },
      "children": [],
      "content_layer": "body",
      "label": "list_item",
      "prov": [],
      "orig": "Choose ",
      "text": "Choose ",
      "enumerated": false,
      "marker": "-"
    },
    {
      "self_ref": "#/texts/34",
      "parent": {
        "$ref": "#/groups/3"
      },
      "children": [],
      "content_layer": "body",
      "label": "list_item",
      "prov": [],
      "orig": "In the source box, look for the security group you just created along with your EC2 instance.",
      "text": "In the source box, look for the security group you just created along with your EC2 instance.",
      "enumerated": false,
      "marker": "-"
    },
    {
      "self_ref": "#/texts/35",
      "parent": {
        "$ref": "#/groups/3"
      },
      "children": [],
      "content_layer": "body",
      "label": "list_item",
      "prov": [],
      "orig": "Click ",
      "text": "Click ",
      "enumerated": false,
      "marker": "-"
    },
    {
      "self_ref": "#/texts/36",
      "parent": {
        "$ref": "#/body"
      },
      "children": [],
      "content_layer": "body",
      "label": "title",
      "prov": [],
      "orig": "Installing efs-utils",
      "text": "Installing efs-utils"
    },
    {
      "self_ref": "#/texts/37",
      "parent": {
        "$ref": "#/body"
      },
      "children": [],
      "content_layer": "body",
      "label": "paragraph",
      "prov": [],
      "orig": "Let's start by getting the  efs-utils  package onto our new Fedora system:",
      "text": "Let's start by getting the  efs-utils  package onto our new Fedora system:"
    },
    {
      "self_ref": "#/texts/38",
      "parent": {
        "$ref": "#/body"
      },
      "children": [],
      "content_layer": "body",
      "label": "code",
      "prov": [],
      "orig": "$ sudo dnf -qy install efs-utils\nInstalled:\n  efs-utils-1.35.0-2.fc38.noarch",
      "text": "$ sudo dnf -qy install efs-utils\nInstalled:\n  efs-utils-1.35.0-2.fc38.noarch",
      "captions": [],
      "references": [],
      "footnotes": [],
      "code_language": "unknown"
    },
    {
      "self_ref": "#/texts/39",
      "parent": {
        "$ref": "#/body"
      },
      "children": [],
      "content_layer": "body",
      "label": "paragraph",
      "prov": [],
      "orig": "The package includes some configuration, a watchdog, and a mount helper:",
      "text": "The package includes some configuration, a watchdog, and a mount helper:"
    },
    {
      "self_ref": "#/texts/40",
      "parent": {
        "$ref": "#/body"
      },
      "children": [],
      "content_layer": "body",
      "label": "code",
      "prov": [],
      "orig": "$ rpm -ql efs-utils\n/etc/amazon\n/etc/amazon/efs\n/etc/amazon/efs/efs-utils.conf\n/etc/amazon/efs/efs-utils.crt\n/usr/bin/amazon-efs-mount-watchdog\n/usr/lib/systemd/system/amazon-efs-mount-watchdog.service\n/usr/sbin/mount.efs\n/usr/share/doc/efs-utils\n/usr/share/doc/efs-utils/CONTRIBUTING.md\n/usr/share/doc/efs-utils/README.md\n/usr/share/licenses/efs-utils\n/usr/share/licenses/efs-utils/LICENSE\n/usr/share/man/man8/mount.efs.8.gz\n/var/log/amazon/efs",
      "text": "$ rpm -ql efs-utils\n/etc/amazon\n/etc/amazon/efs\n/etc/amazon/efs/efs-utils.conf\n/etc/amazon/efs/efs-utils.crt\n/usr/bin/amazon-efs-mount-watchdog\n/usr/lib/systemd/system/amazon-efs-mount-watchdog.service\n/usr/sbin/mount.efs\n/usr/share/doc/efs-utils\n/usr/share/doc/efs-utils/CONTRIBUTING.md\n/usr/share/doc/efs-utils/README.md\n/usr/share/licenses/efs-utils\n/usr/share/licenses/efs-utils/LICENSE\n/usr/share/man/man8/mount.efs.8.gz\n/var/log/amazon/efs",
      "captions": [],
      "references": [],
      "footnotes": [],
      "code_language": "unknown"
    },
    {
      "self_ref": "#/texts/41",
      "parent": {
        "$ref": "#/body"
      },
      "children": [],
      "content_layer": "body",
      "label": "paragraph",
      "prov": [],
      "orig": "Let's get the watchdog running so we have that ready later. The watchdog helps to build and tear down the encrypted connection when you mount and unmount an EFS volume:",
      "text": "Let's get the watchdog running so we have that ready later. The watchdog helps to build and tear down the encrypted connection when you mount and unmount an EFS volume:"
    },
    {
      "self_ref": "#/texts/42",
      "parent": {
        "$ref": "#/body"
      },
      "children": [],
      "content_layer": "body",
      "label": "code",
      "prov": [],
      "orig": "$ sudo systemctl enable --now amazon-efs-mount-watchdog.service\nCreated symlink /etc/systemd/system/multi-user.target.wants/amazon-efs-mount-watchdog.service \u2192 /usr/lib/systemd/system/amazon-efs-mount-watchdog.service.\n$ systemctl status amazon-efs-mount-watchdog.service\n\u25cf amazon-efs-mount-watchdog.service - amazon-efs-mount-watchdog\n     Loaded: loaded (/usr/lib/systemd/system/amazon-efs-mount-watchdog.service; enabled; preset: disabled)\n    Drop-In: /usr/lib/systemd/system/service.d\n             \u2514\u250010-timeout-abort.conf\n     Active: active (running) since Wed 2023-09-13 18:43:46 UTC; 5s ago\n   Main PID: 1258 (amazon-efs-moun)\n      Tasks: 1 (limit: 4385)\n     Memory: 13.3M\n        CPU: 76ms\n     CGroup: /system.slice/amazon-efs-mount-watchdog.service\n             \u2514\u25001258 /usr/bin/python3 /usr/bin/amazon-efs-mount-watchdog\n\nSep 13 18:43:46 ip-172-31-2-38.us-east-2.compute.internal systemd[1]: Started amazon-efs-mount-watchdog.service - amazon-efs-mount-watchdog.",
      "text": "$ sudo systemctl enable --now amazon-efs-mount-watchdog.service\nCreated symlink /etc/systemd/system/multi-user.target.wants/amazon-efs-mount-watchdog.service \u2192 /usr/lib/systemd/system/amazon-efs-mount-watchdog.service.\n$ systemctl status amazon-efs-mount-watchdog.service\n\u25cf amazon-efs-mount-watchdog.service - amazon-efs-mount-watchdog\n     Loaded: loaded (/usr/lib/systemd/system/amazon-efs-mount-watchdog.service; enabled; preset: disabled)\n    Drop-In: /usr/lib/systemd/system/service.d\n             \u2514\u250010-timeout-abort.conf\n     Active: active (running) since Wed 2023-09-13 18:43:46 UTC; 5s ago\n   Main PID: 1258 (amazon-efs-moun)\n      Tasks: 1 (limit: 4385)\n     Memory: 13.3M\n        CPU: 76ms\n     CGroup: /system.slice/amazon-efs-mount-watchdog.service\n             \u2514\u25001258 /usr/bin/python3 /usr/bin/amazon-efs-mount-watchdog\n\nSep 13 18:43:46 ip-172-31-2-38.us-east-2.compute.internal systemd[1]: Started amazon-efs-mount-watchdog.service - amazon-efs-mount-watchdog.",
      "captions": [],
      "references": [],
      "footnotes": [],
      "code_language": "unknown"
    },
    {
      "self_ref": "#/texts/43",
      "parent": {
        "$ref": "#/body"
      },
      "children": [],
      "content_layer": "body",
      "label": "title",
      "prov": [],
      "orig": "Setting up an EFS volume",
      "text": "Setting up an EFS volume"
    },
    {
      "self_ref": "#/texts/44",
      "parent": {
        "$ref": "#/body"
      },
      "children": [],
      "content_layer": "body",
      "label": "paragraph",
      "prov": [],
      "orig": "Start by going over to the  EFS console  and do the following:",
      "text": "Start by going over to the  EFS console  and do the following:"
    },
    {
      "self_ref": "#/texts/45",
      "parent": {
        "$ref": "#/groups/4"
      },
      "children": [],
      "content_layer": "body",
      "label": "list_item",
      "prov": [],
      "orig": "Click ",
      "text": "Click ",
      "enumerated": false,
      "marker": "-"
    },
    {
      "self_ref": "#/texts/46",
      "parent": {
        "$ref": "#/groups/4"
      },
      "children": [],
      "content_layer": "body",
      "label": "list_item",
      "prov": [],
      "orig": "Click the orange ",
      "text": "Click the orange ",
      "enumerated": false,
      "marker": "-"
    },
    {
      "self_ref": "#/texts/47",
      "parent": {
        "$ref": "#/groups/4"
      },
      "children": [],
      "content_layer": "body",
      "label": "paragraph",
      "prov": [],
      "orig": "A modal appears with a box for the volume name and a VPC selection. Select an easy to remember name (I'm using  testing-efs-for-blog-post ) and select a VPC. If you're not sure what a VPC is or which one to use, use the default VPC since that's likely where your instance landed as well.",
      "text": "A modal appears with a box for the volume name and a VPC selection. Select an easy to remember name (I'm using  testing-efs-for-blog-post ) and select a VPC. If you're not sure what a VPC is or which one to use, use the default VPC since that's likely where your instance landed as well."
    },
    {
      "self_ref": "#/texts/48",
      "parent": {
        "$ref": "#/groups/4"
      },
      "children": [],
      "content_layer": "body",
      "label": "list_item",
      "prov": [],
      "orig": "Click ",
      "text": "Click ",
      "enumerated": false,
      "marker": "-"
    },
    {
      "self_ref": "#/texts/49",
      "parent": {
        "$ref": "#/body"
      },
      "children": [],
      "content_layer": "body",
      "label": "paragraph",
      "prov": [],
      "orig": "There's a delay while the filesystem initializes and you should see the filesystem show  Available  with a green check mark after about 30 seconds. Click on the filesystem you just created from the list and you'll see the details page for the filesystem.",
      "text": "There's a delay while the filesystem initializes and you should see the filesystem show  Available  with a green check mark after about 30 seconds. Click on the filesystem you just created from the list and you'll see the details page for the filesystem."
    },
    {
      "self_ref": "#/texts/50",
      "parent": {
        "$ref": "#/body"
      },
      "children": [],
      "content_layer": "body",
      "label": "title",
      "prov": [],
      "orig": "Security setup",
      "text": "Security setup"
    },
    {
      "self_ref": "#/texts/51",
      "parent": {
        "$ref": "#/body"
      },
      "children": [],
      "content_layer": "body",
      "label": "paragraph",
      "prov": [],
      "orig": "EFS volumes come online with the default security group attached and that's not helpful. From the EFS filesystem details page, click the  Network  tab and then click  Manage .",
      "text": "EFS volumes come online with the default security group attached and that's not helpful. From the EFS filesystem details page, click the  Network  tab and then click  Manage ."
    },
    {
      "self_ref": "#/texts/52",
      "parent": {
        "$ref": "#/body"
      },
      "children": [],
      "content_layer": "body",
      "label": "paragraph",
      "prov": [],
      "orig": "For each availability zone, go to the  Security groups  column and add the security group that your instance came up with in the first step. In my case, I accepted the defaults from EC2 and ended up with a  launch-wizard-1  security group. Remove the  default  security group from each. Click  Save .",
      "text": "For each availability zone, go to the  Security groups  column and add the security group that your instance came up with in the first step. In my case, I accepted the defaults from EC2 and ended up with a  launch-wizard-1  security group. Remove the  default  security group from each. Click  Save ."
    },
    {
      "self_ref": "#/texts/53",
      "parent": {
        "$ref": "#/body"
      },
      "children": [],
      "content_layer": "body",
      "label": "title",
      "prov": [],
      "orig": "Mounting time",
      "text": "Mounting time"
    },
    {
      "self_ref": "#/texts/54",
      "parent": {
        "$ref": "#/body"
      },
      "children": [],
      "content_layer": "body",
      "label": "paragraph",
      "prov": [],
      "orig": "You should still be on the filesystem details page from the previous step. Click  Attach  at the top right and a modal will appear with mount instructions. The first option should use the EFS mount helper!",
      "text": "You should still be on the filesystem details page from the previous step. Click  Attach  at the top right and a modal will appear with mount instructions. The first option should use the EFS mount helper!"
    },
    {
      "self_ref": "#/texts/55",
      "parent": {
        "$ref": "#/body"
      },
      "children": [],
      "content_layer": "body",
      "label": "paragraph",
      "prov": [],
      "orig": "For me, it looks like ",
      "text": "For me, it looks like "
    },
    {
      "self_ref": "#/texts/56",
      "parent": {
        "$ref": "#/body"
      },
      "children": [],
      "content_layer": "body",
      "label": "code",
      "prov": [],
      "orig": "sudo mount -t efs -o tls fs-0baabc62763375bb1:/ efs",
      "text": "sudo mount -t efs -o tls fs-0baabc62763375bb1:/ efs",
      "captions": [],
      "references": [],
      "footnotes": [],
      "code_language": "unknown"
    },
    {
      "self_ref": "#/texts/57",
      "parent": {
        "$ref": "#/body"
      },
      "children": [],
      "content_layer": "body",
      "label": "paragraph",
      "prov": [],
      "orig": "Go back to your Fedora instance, create a mount point, and create the volume:",
      "text": "Go back to your Fedora instance, create a mount point, and create the volume:"
    },
    {
      "self_ref": "#/texts/58",
      "parent": {
        "$ref": "#/body"
      },
      "children": [],
      "content_layer": "body",
      "label": "code",
      "prov": [],
      "orig": "$ sudo mkdir /mnt/efs\n$ sudo mount -t efs -o tls fs-0baabc62763375bb1:/ /mnt/efs\n$ df -hT | grep efs\n127.0.0.1:/    nfs4      8.0E     0  8.0E   0% /mnt/efs",
      "text": "$ sudo mkdir /mnt/efs\n$ sudo mount -t efs -o tls fs-0baabc62763375bb1:/ /mnt/efs\n$ df -hT | grep efs\n127.0.0.1:/    nfs4      8.0E     0  8.0E   0% /mnt/efs",
      "captions": [],
      "references": [],
      "footnotes": [],
      "code_language": "unknown"
    },
    {
      "self_ref": "#/texts/59",
      "parent": {
        "$ref": "#/body"
      },
      "children": [],
      "content_layer": "body",
      "label": "paragraph",
      "prov": [],
      "orig": "We did it! \ud83c\udf89",
      "text": "We did it! \ud83c\udf89"
    },
    {
      "self_ref": "#/texts/60",
      "parent": {
        "$ref": "#/body"
      },
      "children": [],
      "content_layer": "body",
      "label": "paragraph",
      "prov": [],
      "orig": "We see ",
      "text": "We see "
    },
    {
      "self_ref": "#/texts/61",
      "parent": {
        "$ref": "#/body"
      },
      "children": [],
      "content_layer": "body",
      "label": "code",
      "prov": [],
      "orig": "127.0.0.1",
      "text": "127.0.0.1",
      "captions": [],
      "references": [],
      "footnotes": [],
      "code_language": "unknown"
    },
    {
      "self_ref": "#/texts/62",
      "parent": {
        "$ref": "#/body"
      },
      "children": [],
      "content_layer": "body",
      "label": "paragraph",
      "prov": [],
      "orig": " here because efs-utils uses stunnel to handle the encryption between your instance and the EFS storage system.",
      "text": " here because efs-utils uses stunnel to handle the encryption between your instance and the EFS storage system."
    },
    {
      "self_ref": "#/texts/63",
      "parent": {
        "$ref": "#/body"
      },
      "children": [],
      "content_layer": "body",
      "label": "paragraph",
      "prov": [],
      "orig": "The disk was mounted by root, so we can add a ",
      "text": "The disk was mounted by root, so we can add a "
    },
    {
      "self_ref": "#/texts/64",
      "parent": {
        "$ref": "#/body"
      },
      "children": [],
      "content_layer": "body",
      "label": "code",
      "prov": [],
      "orig": "-o user=fedora",
      "text": "-o user=fedora",
      "captions": [],
      "references": [],
      "footnotes": [],
      "code_language": "unknown"
    },
    {
      "self_ref": "#/texts/65",
      "parent": {
        "$ref": "#/body"
      },
      "children": [],
      "content_layer": "body",
      "label": "paragraph",
      "prov": [],
      "orig": " to give our Fedora user permissions to write files:",
      "text": " to give our Fedora user permissions to write files:"
    },
    {
      "self_ref": "#/texts/66",
      "parent": {
        "$ref": "#/body"
      },
      "children": [],
      "content_layer": "body",
      "label": "code",
      "prov": [],
      "orig": "$ umount /mnt/efs\n$ sudo mount -t efs -o user=fedora,tls fs-0baabc62763375bb1:/ /mnt/efs\n$ touch /mnt/efs/test2.txt\n$ stat /mnt/efs/test2.txt\n  File: /mnt/efs/test2.txt\n  Size: 0         \tBlocks: 8          IO Block: 1048576 regular empty file\nDevice: 0,54\tInode: 17657675890899444015  Links: 1\nAccess: (0644/-rw-r--r--)  Uid: ( 1000/  fedora)   Gid: ( 1000/  fedora)\nContext: system_u:object_r:nfs_t:s0\nAccess: 2023-09-13 19:14:23.308000000 +0000\nModify: 2023-09-13 19:14:23.308000000 +0000\nChange: 2023-09-13 19:14:23.308000000 +0000\n Birth: -",
      "text": "$ umount /mnt/efs\n$ sudo mount -t efs -o user=fedora,tls fs-0baabc62763375bb1:/ /mnt/efs\n$ touch /mnt/efs/test2.txt\n$ stat /mnt/efs/test2.txt\n  File: /mnt/efs/test2.txt\n  Size: 0         \tBlocks: 8          IO Block: 1048576 regular empty file\nDevice: 0,54\tInode: 17657675890899444015  Links: 1\nAccess: (0644/-rw-r--r--)  Uid: ( 1000/  fedora)   Gid: ( 1000/  fedora)\nContext: system_u:object_r:nfs_t:s0\nAccess: 2023-09-13 19:14:23.308000000 +0000\nModify: 2023-09-13 19:14:23.308000000 +0000\nChange: 2023-09-13 19:14:23.308000000 +0000\n Birth: -",
      "captions": [],
      "references": [],
      "footnotes": [],
      "code_language": "unknown"
    },
    {
      "self_ref": "#/texts/67",
      "parent": {
        "$ref": "#/body"
      },
      "children": [],
      "content_layer": "body",
      "label": "paragraph",
      "prov": [],
      "orig": "Also,  efs-utils  uses encrypted communication by default, which is great. There may be some situations where you don't need encrypted communications or you don't want the overhead. In that case, drop the ",
      "text": "Also,  efs-utils  uses encrypted communication by default, which is great. There may be some situations where you don't need encrypted communications or you don't want the overhead. In that case, drop the "
    },
    {
      "self_ref": "#/texts/68",
      "parent": {
        "$ref": "#/body"
      },
      "children": [],
      "content_layer": "body",
      "label": "code",
      "prov": [],
      "orig": "-o tls",
      "text": "-o tls",
      "captions": [],
      "references": [],
      "footnotes": [],
      "code_language": "unknown"
    },
    {
      "self_ref": "#/texts/69",
      "parent": {
        "$ref": "#/body"
      },
      "children": [],
      "content_layer": "body",
      "label": "paragraph",
      "prov": [],
      "orig": " option from the mount command and you'll mount the volume unencrypted.",
      "text": " option from the mount command and you'll mount the volume unencrypted."
    },
    {
      "self_ref": "#/texts/70",
      "parent": {
        "$ref": "#/body"
      },
      "children": [],
      "content_layer": "body",
      "label": "code",
      "prov": [],
      "orig": "$ sudo umount /mnt/efs\n$ sudo mount -t efs -o user=fedora fs-0baabc62763375bb1:/ /mnt/efs\n$ df -hT | grep efs\nfs-0baabc62763375bb1.efs.us-east-2.amazonaws.com:/ nfs4      8.0E     0  8.0E   0% /mnt/efs",
      "text": "$ sudo umount /mnt/efs\n$ sudo mount -t efs -o user=fedora fs-0baabc62763375bb1:/ /mnt/efs\n$ df -hT | grep efs\nfs-0baabc62763375bb1.efs.us-east-2.amazonaws.com:/ nfs4      8.0E     0  8.0E   0% /mnt/efs",
      "captions": [],
      "references": [],
      "footnotes": [],
      "code_language": "unknown"
    },
    {
      "self_ref": "#/texts/71",
      "parent": {
        "$ref": "#/body"
      },
      "children": [],
      "content_layer": "body",
      "label": "title",
      "prov": [],
      "orig": "Extra credit",
      "text": "Extra credit"
    },
    {
      "self_ref": "#/texts/72",
      "parent": {
        "$ref": "#/body"
      },
      "children": [],
      "content_layer": "body",
      "label": "paragraph",
      "prov": [],
      "orig": "You can get fancy with  access points  that allow you to carve up your EFS storage and only let certain instances mount certain parts of the filesystem. So instance A might only be able to mount ",
      "text": "You can get fancy with  access points  that allow you to carve up your EFS storage and only let certain instances mount certain parts of the filesystem. So instance A might only be able to mount "
    },
    {
      "self_ref": "#/texts/73",
      "parent": {
        "$ref": "#/body"
      },
      "children": [],
      "content_layer": "body",
      "label": "code",
      "prov": [],
      "orig": "/files/hr",
      "text": "/files/hr",
      "captions": [],
      "references": [],
      "footnotes": [],
      "code_language": "unknown"
    },
    {
      "self_ref": "#/texts/74",
      "parent": {
        "$ref": "#/body"
      },
      "children": [],
      "content_layer": "body",
      "label": "paragraph",
      "prov": [],
      "orig": " while instance B can only mount ",
      "text": " while instance B can only mount "
    },
    {
      "self_ref": "#/texts/75",
      "parent": {
        "$ref": "#/body"
      },
      "children": [],
      "content_layer": "body",
      "label": "code",
      "prov": [],
      "orig": "/documents",
      "text": "/documents",
      "captions": [],
      "references": [],
      "footnotes": [],
      "code_language": "unknown"
    },
    {
      "self_ref": "#/texts/76",
      "parent": {
        "$ref": "#/body"
      },
      "children": [],
      "content_layer": "body",
      "label": "paragraph",
      "prov": [],
      "orig": ".",
      "text": "."
    },
    {
      "self_ref": "#/texts/77",
      "parent": {
        "$ref": "#/body"
      },
      "children": [],
      "content_layer": "body",
      "label": "paragraph",
      "prov": [],
      "orig": "It would also be a good idea to take an inventory of your security groups and ensure the least amount of instances can reach your EFS volume as possible. Much of the work I did in this post was just for testing. A good plan might be to make a security group for your EFS volume and only allow inbound traffic from security groups which should access it. That would allow you to gather up all of your instances into different security groups and limit access.",
      "text": "It would also be a good idea to take an inventory of your security groups and ensure the least amount of instances can reach your EFS volume as possible. Much of the work I did in this post was just for testing. A good plan might be to make a security group for your EFS volume and only allow inbound traffic from security groups which should access it. That would allow you to gather up all of your instances into different security groups and limit access."
    },
    {
      "self_ref": "#/texts/78",
      "parent": {
        "$ref": "#/body"
      },
      "children": [],
      "content_layer": "body",
      "label": "paragraph",
      "prov": [],
      "orig": "Also, be aware of the  EFS pricing ! \ud83d\udcb8",
      "text": "Also, be aware of the  EFS pricing ! \ud83d\udcb8"
    },
    {
      "self_ref": "#/texts/79",
      "parent": {
        "$ref": "#/body"
      },
      "children": [],
      "content_layer": "body",
      "label": "paragraph",
      "prov": [],
      "orig": "You are billed not only for how much storage you use, but also on requests. Different requests are priced differently depending on access frequency. Backups are also  enabled by default  at $0.05/GB-month!",
      "text": "You are billed not only for how much storage you use, but also on requests. Different requests are priced differently depending on access frequency. Backups are also  enabled by default  at $0.05/GB-month!"
    },
    {
      "self_ref": "#/texts/80",
      "parent": {
        "$ref": "#/body"
      },
      "children": [],
      "content_layer": "body",
      "label": "paragraph",
      "prov": [],
      "orig": "[^ohio]: Why Ohio? I'm mainly doing it to irritate  Corey Quinn . \ud83e\udd2d Any region you prefer should be fine.",
      "text": "[^ohio]: Why Ohio? I'm mainly doing it to irritate  Corey Quinn . \ud83e\udd2d Any region you prefer should be fine."
    }
  ],
  "pictures": [],
  "tables": [],
  "key_value_items": [],
  "form_items": [],
  "pages": {}
}