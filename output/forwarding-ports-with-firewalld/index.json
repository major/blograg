{
  "schema_name": "DoclingDocument",
  "version": "1.4.0",
  "name": "index",
  "origin": {
    "mimetype": "text/markdown",
    "binary_hash": 6116705281413905634,
    "filename": "index.md"
  },
  "furniture": {
    "self_ref": "#/furniture",
    "children": [],
    "content_layer": "furniture",
    "name": "_root_",
    "label": "unspecified"
  },
  "body": {
    "self_ref": "#/body",
    "children": [
      {
        "$ref": "#/texts/0"
      },
      {
        "$ref": "#/groups/0"
      },
      {
        "$ref": "#/texts/8"
      },
      {
        "$ref": "#/texts/9"
      },
      {
        "$ref": "#/texts/10"
      },
      {
        "$ref": "#/texts/11"
      },
      {
        "$ref": "#/texts/12"
      },
      {
        "$ref": "#/texts/13"
      },
      {
        "$ref": "#/texts/14"
      },
      {
        "$ref": "#/texts/15"
      },
      {
        "$ref": "#/texts/16"
      },
      {
        "$ref": "#/texts/17"
      },
      {
        "$ref": "#/texts/18"
      },
      {
        "$ref": "#/texts/19"
      },
      {
        "$ref": "#/texts/20"
      },
      {
        "$ref": "#/texts/21"
      },
      {
        "$ref": "#/texts/22"
      },
      {
        "$ref": "#/texts/23"
      },
      {
        "$ref": "#/texts/24"
      },
      {
        "$ref": "#/texts/25"
      },
      {
        "$ref": "#/texts/26"
      },
      {
        "$ref": "#/texts/27"
      },
      {
        "$ref": "#/texts/28"
      },
      {
        "$ref": "#/texts/29"
      },
      {
        "$ref": "#/texts/30"
      },
      {
        "$ref": "#/texts/31"
      },
      {
        "$ref": "#/texts/32"
      },
      {
        "$ref": "#/texts/33"
      },
      {
        "$ref": "#/texts/34"
      },
      {
        "$ref": "#/texts/35"
      },
      {
        "$ref": "#/texts/36"
      },
      {
        "$ref": "#/texts/37"
      },
      {
        "$ref": "#/texts/38"
      },
      {
        "$ref": "#/texts/39"
      },
      {
        "$ref": "#/texts/40"
      },
      {
        "$ref": "#/texts/41"
      },
      {
        "$ref": "#/texts/42"
      },
      {
        "$ref": "#/texts/43"
      },
      {
        "$ref": "#/texts/44"
      },
      {
        "$ref": "#/texts/45"
      },
      {
        "$ref": "#/texts/46"
      },
      {
        "$ref": "#/groups/1"
      },
      {
        "$ref": "#/texts/49"
      },
      {
        "$ref": "#/texts/50"
      },
      {
        "$ref": "#/texts/51"
      },
      {
        "$ref": "#/texts/52"
      },
      {
        "$ref": "#/texts/53"
      },
      {
        "$ref": "#/texts/54"
      },
      {
        "$ref": "#/texts/55"
      },
      {
        "$ref": "#/texts/56"
      },
      {
        "$ref": "#/texts/57"
      },
      {
        "$ref": "#/texts/58"
      },
      {
        "$ref": "#/texts/59"
      },
      {
        "$ref": "#/texts/60"
      },
      {
        "$ref": "#/texts/61"
      },
      {
        "$ref": "#/texts/62"
      },
      {
        "$ref": "#/texts/63"
      },
      {
        "$ref": "#/texts/64"
      }
    ],
    "content_layer": "body",
    "name": "_root_",
    "label": "unspecified"
  },
  "groups": [
    {
      "self_ref": "#/groups/0",
      "parent": {
        "$ref": "#/body"
      },
      "children": [
        {
          "$ref": "#/texts/1"
        },
        {
          "$ref": "#/texts/2"
        },
        {
          "$ref": "#/texts/3"
        },
        {
          "$ref": "#/texts/4"
        },
        {
          "$ref": "#/texts/5"
        },
        {
          "$ref": "#/texts/6"
        },
        {
          "$ref": "#/texts/7"
        }
      ],
      "content_layer": "body",
      "name": "list",
      "label": "list"
    },
    {
      "self_ref": "#/groups/1",
      "parent": {
        "$ref": "#/body"
      },
      "children": [
        {
          "$ref": "#/texts/47"
        },
        {
          "$ref": "#/texts/48"
        }
      ],
      "content_layer": "body",
      "name": "list",
      "label": "ordered_list"
    }
  ],
  "texts": [
    {
      "self_ref": "#/texts/0",
      "parent": {
        "$ref": "#/body"
      },
      "children": [],
      "content_layer": "body",
      "label": "paragraph",
      "prov": [],
      "orig": "aliases:",
      "text": "aliases:"
    },
    {
      "self_ref": "#/texts/1",
      "parent": {
        "$ref": "#/groups/0"
      },
      "children": [],
      "content_layer": "body",
      "label": "list_item",
      "prov": [],
      "orig": "/2021/10/11/forwarding-ports-with-firewalld/",
      "text": "/2021/10/11/forwarding-ports-with-firewalld/",
      "enumerated": false,
      "marker": "-"
    },
    {
      "self_ref": "#/texts/2",
      "parent": {
        "$ref": "#/groups/0"
      },
      "children": [],
      "content_layer": "body",
      "label": "list_item",
      "prov": [],
      "orig": "fedora",
      "text": "fedora",
      "enumerated": false,
      "marker": "-"
    },
    {
      "self_ref": "#/texts/3",
      "parent": {
        "$ref": "#/groups/0"
      },
      "children": [],
      "content_layer": "body",
      "label": "list_item",
      "prov": [],
      "orig": "firewalld",
      "text": "firewalld",
      "enumerated": false,
      "marker": "-"
    },
    {
      "self_ref": "#/texts/4",
      "parent": {
        "$ref": "#/groups/0"
      },
      "children": [],
      "content_layer": "body",
      "label": "list_item",
      "prov": [],
      "orig": "iptables",
      "text": "iptables",
      "enumerated": false,
      "marker": "-"
    },
    {
      "self_ref": "#/texts/5",
      "parent": {
        "$ref": "#/groups/0"
      },
      "children": [],
      "content_layer": "body",
      "label": "list_item",
      "prov": [],
      "orig": "ipv6",
      "text": "ipv6",
      "enumerated": false,
      "marker": "-"
    },
    {
      "self_ref": "#/texts/6",
      "parent": {
        "$ref": "#/groups/0"
      },
      "children": [],
      "content_layer": "body",
      "label": "list_item",
      "prov": [],
      "orig": "linux",
      "text": "linux",
      "enumerated": false,
      "marker": "-"
    },
    {
      "self_ref": "#/texts/7",
      "parent": {
        "$ref": "#/groups/0"
      },
      "children": [],
      "content_layer": "body",
      "label": "list_item",
      "prov": [],
      "orig": "security",
      "text": "security",
      "enumerated": false,
      "marker": "-"
    },
    {
      "self_ref": "#/texts/8",
      "parent": {
        "$ref": "#/body"
      },
      "children": [],
      "content_layer": "body",
      "label": "paragraph",
      "prov": [],
      "orig": "I've tamed many of my complex firewall rules with  firewalld  over the years. It allows you to divide your devices, destinations, and network interfaces into zones. From there, you apply rules to zones. In addition, it handles all of the difficult work on the backend with iptables and nftables.",
      "text": "I've tamed many of my complex firewall rules with  firewalld  over the years. It allows you to divide your devices, destinations, and network interfaces into zones. From there, you apply rules to zones. In addition, it handles all of the difficult work on the backend with iptables and nftables."
    },
    {
      "self_ref": "#/texts/9",
      "parent": {
        "$ref": "#/body"
      },
      "children": [],
      "content_layer": "body",
      "label": "paragraph",
      "prov": [],
      "orig": "Forwarding ports remains a tricky process in firewalld, but there are a few different ways to work through it.",
      "text": "Forwarding ports remains a tricky process in firewalld, but there are a few different ways to work through it."
    },
    {
      "self_ref": "#/texts/10",
      "parent": {
        "$ref": "#/body"
      },
      "children": [],
      "content_layer": "body",
      "label": "section_header",
      "prov": [],
      "orig": "Using the simple syntax",
      "text": "Using the simple syntax",
      "level": 1
    },
    {
      "self_ref": "#/texts/11",
      "parent": {
        "$ref": "#/body"
      },
      "children": [],
      "content_layer": "body",
      "label": "paragraph",
      "prov": [],
      "orig": "The  firewall-cmd man page  shows the syntax for setting a forward port rule. Here's a simple one for port 80 going to a device on a LAN:",
      "text": "The  firewall-cmd man page  shows the syntax for setting a forward port rule. Here's a simple one for port 80 going to a device on a LAN:"
    },
    {
      "self_ref": "#/texts/12",
      "parent": {
        "$ref": "#/body"
      },
      "children": [],
      "content_layer": "body",
      "label": "code",
      "prov": [],
      "orig": "--add-forward-port=port=80:proto=tcp:toport=8080:toaddr=192.168.10.50",
      "text": "--add-forward-port=port=80:proto=tcp:toport=8080:toaddr=192.168.10.50",
      "captions": [],
      "references": [],
      "footnotes": [],
      "code_language": "unknown"
    },
    {
      "self_ref": "#/texts/13",
      "parent": {
        "$ref": "#/body"
      },
      "children": [],
      "content_layer": "body",
      "label": "paragraph",
      "prov": [],
      "orig": "This line says to catch packets on port 80 and forward them to port 8080 on 192.168.10.50. You can also leave the ",
      "text": "This line says to catch packets on port 80 and forward them to port 8080 on 192.168.10.50. You can also leave the "
    },
    {
      "self_ref": "#/texts/14",
      "parent": {
        "$ref": "#/body"
      },
      "children": [],
      "content_layer": "body",
      "label": "code",
      "prov": [],
      "orig": "toaddr",
      "text": "toaddr",
      "captions": [],
      "references": [],
      "footnotes": [],
      "code_language": "unknown"
    },
    {
      "self_ref": "#/texts/15",
      "parent": {
        "$ref": "#/body"
      },
      "children": [],
      "content_layer": "body",
      "label": "paragraph",
      "prov": [],
      "orig": " off the arguments to forward the port to the same server where the firewall is running:",
      "text": " off the arguments to forward the port to the same server where the firewall is running:"
    },
    {
      "self_ref": "#/texts/16",
      "parent": {
        "$ref": "#/body"
      },
      "children": [],
      "content_layer": "body",
      "label": "code",
      "prov": [],
      "orig": "--add-forward-port=port=80:proto=tcp:toport=8080",
      "text": "--add-forward-port=port=80:proto=tcp:toport=8080",
      "captions": [],
      "references": [],
      "footnotes": [],
      "code_language": "unknown"
    },
    {
      "self_ref": "#/texts/17",
      "parent": {
        "$ref": "#/body"
      },
      "children": [],
      "content_layer": "body",
      "label": "paragraph",
      "prov": [],
      "orig": "This rule catches packets on port 80 and redirects them to port 8080 on the same host. This could be handy for running a rootless podman container on a host where the container doesn't have enough privileges to run on port 80.",
      "text": "This rule catches packets on port 80 and redirects them to port 8080 on the same host. This could be handy for running a rootless podman container on a host where the container doesn't have enough privileges to run on port 80."
    },
    {
      "self_ref": "#/texts/18",
      "parent": {
        "$ref": "#/body"
      },
      "children": [],
      "content_layer": "body",
      "label": "paragraph",
      "prov": [],
      "orig": "Let's try this example on our firewall. First, I'll start a rootless podman container on port 8080:",
      "text": "Let's try this example on our firewall. First, I'll start a rootless podman container on port 8080:"
    },
    {
      "self_ref": "#/texts/19",
      "parent": {
        "$ref": "#/body"
      },
      "children": [],
      "content_layer": "body",
      "label": "code",
      "prov": [],
      "orig": "$ podman run -d -p 8080:80 docker.io/traefik/whoami\nTrying to pull docker.io/traefik/whoami:latest...\nGetting image source signatures\nCopying blob 69d0b1dd9140 done\nCopying blob f089da391c25 done\nCopying blob 65aa504e5268 done\nCopying config 10d7504ea2 done\nWriting manifest to image destination\nStoring signatures\n6e32b04c8933a6864249b20fd9aa27b8fc85c7c75f1c5b6f5f1ae76457f58c1c",
      "text": "$ podman run -d -p 8080:80 docker.io/traefik/whoami\nTrying to pull docker.io/traefik/whoami:latest...\nGetting image source signatures\nCopying blob 69d0b1dd9140 done\nCopying blob f089da391c25 done\nCopying blob 65aa504e5268 done\nCopying config 10d7504ea2 done\nWriting manifest to image destination\nStoring signatures\n6e32b04c8933a6864249b20fd9aa27b8fc85c7c75f1c5b6f5f1ae76457f58c1c",
      "captions": [],
      "references": [],
      "footnotes": [],
      "code_language": "unknown"
    },
    {
      "self_ref": "#/texts/20",
      "parent": {
        "$ref": "#/body"
      },
      "children": [],
      "content_layer": "body",
      "label": "paragraph",
      "prov": [],
      "orig": "(The ",
      "text": "(The "
    },
    {
      "self_ref": "#/texts/21",
      "parent": {
        "$ref": "#/body"
      },
      "children": [],
      "content_layer": "body",
      "label": "code",
      "prov": [],
      "orig": "whoami",
      "text": "whoami",
      "captions": [],
      "references": [],
      "footnotes": [],
      "code_language": "unknown"
    },
    {
      "self_ref": "#/texts/22",
      "parent": {
        "$ref": "#/body"
      },
      "children": [],
      "content_layer": "body",
      "label": "paragraph",
      "prov": [],
      "orig": " container is a great way to hunt down networking problems with containers or routers in front of containers.)",
      "text": " container is a great way to hunt down networking problems with containers or routers in front of containers.)"
    },
    {
      "self_ref": "#/texts/23",
      "parent": {
        "$ref": "#/body"
      },
      "children": [],
      "content_layer": "body",
      "label": "paragraph",
      "prov": [],
      "orig": "Now I can try to connect with ",
      "text": "Now I can try to connect with "
    },
    {
      "self_ref": "#/texts/24",
      "parent": {
        "$ref": "#/body"
      },
      "children": [],
      "content_layer": "body",
      "label": "code",
      "prov": [],
      "orig": "curl",
      "text": "curl",
      "captions": [],
      "references": [],
      "footnotes": [],
      "code_language": "unknown"
    },
    {
      "self_ref": "#/texts/25",
      "parent": {
        "$ref": "#/body"
      },
      "children": [],
      "content_layer": "body",
      "label": "paragraph",
      "prov": [],
      "orig": " via IPv4:",
      "text": " via IPv4:"
    },
    {
      "self_ref": "#/texts/26",
      "parent": {
        "$ref": "#/body"
      },
      "children": [],
      "content_layer": "body",
      "label": "code",
      "prov": [],
      "orig": "$ curl -4 testserver\ncurl: (7) Failed to connect to testserver port 80: No route to host",
      "text": "$ curl -4 testserver\ncurl: (7) Failed to connect to testserver port 80: No route to host",
      "captions": [],
      "references": [],
      "footnotes": [],
      "code_language": "unknown"
    },
    {
      "self_ref": "#/texts/27",
      "parent": {
        "$ref": "#/body"
      },
      "children": [],
      "content_layer": "body",
      "label": "paragraph",
      "prov": [],
      "orig": "Ah, we forgot to forward the port! \ud83e\udd26\ud83c\udffb\u200d\u2642\ufe0f Let's do that now:",
      "text": "Ah, we forgot to forward the port! \ud83e\udd26\ud83c\udffb\u200d\u2642\ufe0f Let's do that now:"
    },
    {
      "self_ref": "#/texts/28",
      "parent": {
        "$ref": "#/body"
      },
      "children": [],
      "content_layer": "body",
      "label": "code",
      "prov": [],
      "orig": "# firewall-cmd --add-forward-port=port=80:proto=tcp:toport=8080\nsuccess\n# firewall-cmd --list-all\nFedoraServer (active)\n  target: default\n  icmp-block-inversion: no\n  interfaces: enp1s0\n  sources:\n  services: cockpit dhcpv6-client ssh\n  ports:\n  protocols:\n  forward: no\n  masquerade: no\n  forward-ports:\n\tport=80:proto=tcp:toport=8080:toaddr=\n  source-ports:\n  icmp-blocks:\n  rich rules:",
      "text": "# firewall-cmd --add-forward-port=port=80:proto=tcp:toport=8080\nsuccess\n# firewall-cmd --list-all\nFedoraServer (active)\n  target: default\n  icmp-block-inversion: no\n  interfaces: enp1s0\n  sources:\n  services: cockpit dhcpv6-client ssh\n  ports:\n  protocols:\n  forward: no\n  masquerade: no\n  forward-ports:\n\tport=80:proto=tcp:toport=8080:toaddr=\n  source-ports:\n  icmp-blocks:\n  rich rules:",
      "captions": [],
      "references": [],
      "footnotes": [],
      "code_language": "unknown"
    },
    {
      "self_ref": "#/texts/29",
      "parent": {
        "$ref": "#/body"
      },
      "children": [],
      "content_layer": "body",
      "label": "paragraph",
      "prov": [],
      "orig": "And now the ",
      "text": "And now the "
    },
    {
      "self_ref": "#/texts/30",
      "parent": {
        "$ref": "#/body"
      },
      "children": [],
      "content_layer": "body",
      "label": "code",
      "prov": [],
      "orig": "curl",
      "text": "curl",
      "captions": [],
      "references": [],
      "footnotes": [],
      "code_language": "unknown"
    },
    {
      "self_ref": "#/texts/31",
      "parent": {
        "$ref": "#/body"
      },
      "children": [],
      "content_layer": "body",
      "label": "paragraph",
      "prov": [],
      "orig": ":",
      "text": ":"
    },
    {
      "self_ref": "#/texts/32",
      "parent": {
        "$ref": "#/body"
      },
      "children": [],
      "content_layer": "body",
      "label": "code",
      "prov": [],
      "orig": "\u279c curl -4 testserver\nHostname: 6e32b04c8933\nIP: 127.0.0.1\nIP: ::1\nIP: 10.0.2.100\nIP: fe80::3c96:8dff:fec3:2d01\nRemoteAddr: 10.0.2.100:35586\nGET / HTTP/1.1\nHost: testserver\nUser-Agent: curl/7.76.1\nAccept: */*",
      "text": "\u279c curl -4 testserver\nHostname: 6e32b04c8933\nIP: 127.0.0.1\nIP: ::1\nIP: 10.0.2.100\nIP: fe80::3c96:8dff:fec3:2d01\nRemoteAddr: 10.0.2.100:35586\nGET / HTTP/1.1\nHost: testserver\nUser-Agent: curl/7.76.1\nAccept: */*",
      "captions": [],
      "references": [],
      "footnotes": [],
      "code_language": "unknown"
    },
    {
      "self_ref": "#/texts/33",
      "parent": {
        "$ref": "#/body"
      },
      "children": [],
      "content_layer": "body",
      "label": "paragraph",
      "prov": [],
      "orig": "And now we have the reply from the ",
      "text": "And now we have the reply from the "
    },
    {
      "self_ref": "#/texts/34",
      "parent": {
        "$ref": "#/body"
      },
      "children": [],
      "content_layer": "body",
      "label": "code",
      "prov": [],
      "orig": "whoami",
      "text": "whoami",
      "captions": [],
      "references": [],
      "footnotes": [],
      "code_language": "unknown"
    },
    {
      "self_ref": "#/texts/35",
      "parent": {
        "$ref": "#/body"
      },
      "children": [],
      "content_layer": "body",
      "label": "paragraph",
      "prov": [],
      "orig": " container on port 80! Let's try IPv6:",
      "text": " container on port 80! Let's try IPv6:"
    },
    {
      "self_ref": "#/texts/36",
      "parent": {
        "$ref": "#/body"
      },
      "children": [],
      "content_layer": "body",
      "label": "code",
      "prov": [],
      "orig": "\u279c curl -6 testserver\ncurl: (7) Failed to connect to testserver port 80: Permission denied",
      "text": "\u279c curl -6 testserver\ncurl: (7) Failed to connect to testserver port 80: Permission denied",
      "captions": [],
      "references": [],
      "footnotes": [],
      "code_language": "unknown"
    },
    {
      "self_ref": "#/texts/37",
      "parent": {
        "$ref": "#/body"
      },
      "children": [],
      "content_layer": "body",
      "label": "paragraph",
      "prov": [],
      "orig": "Darn! \ud83e\udd14",
      "text": "Darn! \ud83e\udd14"
    },
    {
      "self_ref": "#/texts/38",
      "parent": {
        "$ref": "#/body"
      },
      "children": [],
      "content_layer": "body",
      "label": "section_header",
      "prov": [],
      "orig": "Investigating IPv6",
      "text": "Investigating IPv6",
      "level": 1
    },
    {
      "self_ref": "#/texts/39",
      "parent": {
        "$ref": "#/body"
      },
      "children": [],
      "content_layer": "body",
      "label": "paragraph",
      "prov": [],
      "orig": "As I mentioned earlier, firewalld manages iptables and nftables on the backend for you automatically. I'm using Fedora 34, and firewalld uses nftables by default. We need to see which rules nftables has for port 80:",
      "text": "As I mentioned earlier, firewalld manages iptables and nftables on the backend for you automatically. I'm using Fedora 34, and firewalld uses nftables by default. We need to see which rules nftables has for port 80:"
    },
    {
      "self_ref": "#/texts/40",
      "parent": {
        "$ref": "#/body"
      },
      "children": [],
      "content_layer": "body",
      "label": "code",
      "prov": [],
      "orig": "# nft list tables\ntable inet firewalld\ntable ip firewalld\ntable ip6 firewalld\n# nft list table ip firewalld | grep 80\n\t\ttcp dport 80 redirect to :8080\n# nft list table ip6 firewalld | grep 80\n#",
      "text": "# nft list tables\ntable inet firewalld\ntable ip firewalld\ntable ip6 firewalld\n# nft list table ip firewalld | grep 80\n\t\ttcp dport 80 redirect to :8080\n# nft list table ip6 firewalld | grep 80\n#",
      "captions": [],
      "references": [],
      "footnotes": [],
      "code_language": "unknown"
    },
    {
      "self_ref": "#/texts/41",
      "parent": {
        "$ref": "#/body"
      },
      "children": [],
      "content_layer": "body",
      "label": "paragraph",
      "prov": [],
      "orig": "Ah, the rules for IPv6 aren't there! There's a little note in the ",
      "text": "Ah, the rules for IPv6 aren't there! There's a little note in the "
    },
    {
      "self_ref": "#/texts/42",
      "parent": {
        "$ref": "#/body"
      },
      "children": [],
      "content_layer": "body",
      "label": "code",
      "prov": [],
      "orig": "firewall-cmd",
      "text": "firewall-cmd",
      "captions": [],
      "references": [],
      "footnotes": [],
      "code_language": "unknown"
    },
    {
      "self_ref": "#/texts/43",
      "parent": {
        "$ref": "#/body"
      },
      "children": [],
      "content_layer": "body",
      "label": "paragraph",
      "prov": [],
      "orig": "man page for us:",
      "text": "man page for us:"
    },
    {
      "self_ref": "#/texts/44",
      "parent": {
        "$ref": "#/body"
      },
      "children": [],
      "content_layer": "body",
      "label": "paragraph",
      "prov": [],
      "orig": "For IPv6 forward ports, please use the rich language.",
      "text": "For IPv6 forward ports, please use the rich language."
    },
    {
      "self_ref": "#/texts/45",
      "parent": {
        "$ref": "#/body"
      },
      "children": [],
      "content_layer": "body",
      "label": "section_header",
      "prov": [],
      "orig": "Time to get rich",
      "text": "Time to get rich",
      "level": 1
    },
    {
      "self_ref": "#/texts/46",
      "parent": {
        "$ref": "#/body"
      },
      "children": [],
      "content_layer": "body",
      "label": "paragraph",
      "prov": [],
      "orig": "You have two options here to get port forwarding working on both IPv4 and IPv6:",
      "text": "You have two options here to get port forwarding working on both IPv4 and IPv6:"
    },
    {
      "self_ref": "#/texts/47",
      "parent": {
        "$ref": "#/groups/1"
      },
      "children": [],
      "content_layer": "body",
      "label": "list_item",
      "prov": [],
      "orig": "Use the simple syntax for IPv4 and the rich rules for IPv6",
      "text": "Use the simple syntax for IPv4 and the rich rules for IPv6",
      "enumerated": false,
      "marker": "-"
    },
    {
      "self_ref": "#/texts/48",
      "parent": {
        "$ref": "#/groups/1"
      },
      "children": [],
      "content_layer": "body",
      "label": "list_item",
      "prov": [],
      "orig": "Use rich rules for both IPv4 and IPv6",
      "text": "Use rich rules for both IPv4 and IPv6",
      "enumerated": false,
      "marker": "-"
    },
    {
      "self_ref": "#/texts/49",
      "parent": {
        "$ref": "#/body"
      },
      "children": [],
      "content_layer": "body",
      "label": "paragraph",
      "prov": [],
      "orig": "Option 2 is my preferred one since it's consistent between both IPv4 and IPv6. Let's start by removing our port forward rule (just run the same command as before but replace ",
      "text": "Option 2 is my preferred one since it's consistent between both IPv4 and IPv6. Let's start by removing our port forward rule (just run the same command as before but replace "
    },
    {
      "self_ref": "#/texts/50",
      "parent": {
        "$ref": "#/body"
      },
      "children": [],
      "content_layer": "body",
      "label": "code",
      "prov": [],
      "orig": "add",
      "text": "add",
      "captions": [],
      "references": [],
      "footnotes": [],
      "code_language": "unknown"
    },
    {
      "self_ref": "#/texts/51",
      "parent": {
        "$ref": "#/body"
      },
      "children": [],
      "content_layer": "body",
      "label": "paragraph",
      "prov": [],
      "orig": " with ",
      "text": " with "
    },
    {
      "self_ref": "#/texts/52",
      "parent": {
        "$ref": "#/body"
      },
      "children": [],
      "content_layer": "body",
      "label": "code",
      "prov": [],
      "orig": "remove",
      "text": "remove",
      "captions": [],
      "references": [],
      "footnotes": [],
      "code_language": "unknown"
    },
    {
      "self_ref": "#/texts/53",
      "parent": {
        "$ref": "#/body"
      },
      "children": [],
      "content_layer": "body",
      "label": "paragraph",
      "prov": [],
      "orig": "):",
      "text": "):"
    },
    {
      "self_ref": "#/texts/54",
      "parent": {
        "$ref": "#/body"
      },
      "children": [],
      "content_layer": "body",
      "label": "code",
      "prov": [],
      "orig": "# firewall-cmd --remove-forward-port=port=80:proto=tcp:toport=8080\nsuccess",
      "text": "# firewall-cmd --remove-forward-port=port=80:proto=tcp:toport=8080\nsuccess",
      "captions": [],
      "references": [],
      "footnotes": [],
      "code_language": "unknown"
    },
    {
      "self_ref": "#/texts/55",
      "parent": {
        "$ref": "#/body"
      },
      "children": [],
      "content_layer": "body",
      "label": "paragraph",
      "prov": [],
      "orig": "Now, let's add some rich rules:",
      "text": "Now, let's add some rich rules:"
    },
    {
      "self_ref": "#/texts/56",
      "parent": {
        "$ref": "#/body"
      },
      "children": [],
      "content_layer": "body",
      "label": "code",
      "prov": [],
      "orig": "# firewall-cmd --add-rich-rule='rule family=ipv4 forward-port to-port=8080 protocol=tcp port=80'\nsuccess\n# firewall-cmd --add-rich-rule='rule family=ipv6 forward-port to-port=8080 protocol=tcp port=80'\nsuccess\n# firewall-cmd --list-all\nFedoraServer (active)\n  target: default\n  icmp-block-inversion: no\n  interfaces: enp1s0\n  sources:\n  services: cockpit dhcpv6-client ssh\n  ports:\n  protocols:\n  forward: no\n  masquerade: no\n  forward-ports:\n  source-ports:\n  icmp-blocks:\n  rich rules:\n\trule family=\"ipv6\" forward-port port=\"80\" protocol=\"tcp\" to-port=\"8080\"\n\trule family=\"ipv4\" forward-port port=\"80\" protocol=\"tcp\" to-port=\"8080\"",
      "text": "# firewall-cmd --add-rich-rule='rule family=ipv4 forward-port to-port=8080 protocol=tcp port=80'\nsuccess\n# firewall-cmd --add-rich-rule='rule family=ipv6 forward-port to-port=8080 protocol=tcp port=80'\nsuccess\n# firewall-cmd --list-all\nFedoraServer (active)\n  target: default\n  icmp-block-inversion: no\n  interfaces: enp1s0\n  sources:\n  services: cockpit dhcpv6-client ssh\n  ports:\n  protocols:\n  forward: no\n  masquerade: no\n  forward-ports:\n  source-ports:\n  icmp-blocks:\n  rich rules:\n\trule family=\"ipv6\" forward-port port=\"80\" protocol=\"tcp\" to-port=\"8080\"\n\trule family=\"ipv4\" forward-port port=\"80\" protocol=\"tcp\" to-port=\"8080\"",
      "captions": [],
      "references": [],
      "footnotes": [],
      "code_language": "unknown"
    },
    {
      "self_ref": "#/texts/57",
      "parent": {
        "$ref": "#/body"
      },
      "children": [],
      "content_layer": "body",
      "label": "paragraph",
      "prov": [],
      "orig": "Now let's try connecting on IPv6:",
      "text": "Now let's try connecting on IPv6:"
    },
    {
      "self_ref": "#/texts/58",
      "parent": {
        "$ref": "#/body"
      },
      "children": [],
      "content_layer": "body",
      "label": "code",
      "prov": [],
      "orig": "$ curl -6 testserver\nHostname: 6e32b04c8933\nIP: 127.0.0.1\nIP: ::1\nIP: 10.0.2.100\nIP: fe80::3c96:8dff:fec3:2d01\nRemoteAddr: 10.0.2.100:35590\nGET / HTTP/1.1\nHost: testserver\nUser-Agent: curl/7.76.1\nAccept: */*",
      "text": "$ curl -6 testserver\nHostname: 6e32b04c8933\nIP: 127.0.0.1\nIP: ::1\nIP: 10.0.2.100\nIP: fe80::3c96:8dff:fec3:2d01\nRemoteAddr: 10.0.2.100:35590\nGET / HTTP/1.1\nHost: testserver\nUser-Agent: curl/7.76.1\nAccept: */*",
      "captions": [],
      "references": [],
      "footnotes": [],
      "code_language": "unknown"
    },
    {
      "self_ref": "#/texts/59",
      "parent": {
        "$ref": "#/body"
      },
      "children": [],
      "content_layer": "body",
      "label": "paragraph",
      "prov": [],
      "orig": "Double check the nftables rules:",
      "text": "Double check the nftables rules:"
    },
    {
      "self_ref": "#/texts/60",
      "parent": {
        "$ref": "#/body"
      },
      "children": [],
      "content_layer": "body",
      "label": "code",
      "prov": [],
      "orig": "# nft list table ip firewalld | grep 80\n\t\ttcp dport 80 redirect to :8080\n# nft list table ip6 firewalld | grep 80\n\t\ttcp dport 80 redirect to :8080",
      "text": "# nft list table ip firewalld | grep 80\n\t\ttcp dport 80 redirect to :8080\n# nft list table ip6 firewalld | grep 80\n\t\ttcp dport 80 redirect to :8080",
      "captions": [],
      "references": [],
      "footnotes": [],
      "code_language": "unknown"
    },
    {
      "self_ref": "#/texts/61",
      "parent": {
        "$ref": "#/body"
      },
      "children": [],
      "content_layer": "body",
      "label": "paragraph",
      "prov": [],
      "orig": "And save the firewalld configuration so it persists through reboots:",
      "text": "And save the firewalld configuration so it persists through reboots:"
    },
    {
      "self_ref": "#/texts/62",
      "parent": {
        "$ref": "#/body"
      },
      "children": [],
      "content_layer": "body",
      "label": "code",
      "prov": [],
      "orig": "# firewall-cmd --runtime-to-permanent\nsuccess",
      "text": "# firewall-cmd --runtime-to-permanent\nsuccess",
      "captions": [],
      "references": [],
      "footnotes": [],
      "code_language": "unknown"
    },
    {
      "self_ref": "#/texts/63",
      "parent": {
        "$ref": "#/body"
      },
      "children": [],
      "content_layer": "body",
      "label": "paragraph",
      "prov": [],
      "orig": "Enjoy your freshly forwarded ports. \ud83c\udf89",
      "text": "Enjoy your freshly forwarded ports. \ud83c\udf89"
    },
    {
      "self_ref": "#/texts/64",
      "parent": {
        "$ref": "#/body"
      },
      "children": [],
      "content_layer": "body",
      "label": "paragraph",
      "prov": [],
      "orig": "Photo credit:  Eric Prouzet on Unsplash",
      "text": "Photo credit:  Eric Prouzet on Unsplash"
    }
  ],
  "pictures": [],
  "tables": [],
  "key_value_items": [],
  "form_items": [],
  "pages": {}
}