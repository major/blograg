{
  "schema_name": "DoclingDocument",
  "version": "1.4.0",
  "name": "index",
  "origin": {
    "mimetype": "text/markdown",
    "binary_hash": 14485132093866306464,
    "filename": "index.md"
  },
  "furniture": {
    "self_ref": "#/furniture",
    "children": [],
    "content_layer": "furniture",
    "name": "_root_",
    "label": "unspecified"
  },
  "body": {
    "self_ref": "#/body",
    "children": [
      {
        "$ref": "#/texts/0"
      },
      {
        "$ref": "#/groups/0"
      },
      {
        "$ref": "#/texts/4"
      },
      {
        "$ref": "#/texts/5"
      },
      {
        "$ref": "#/texts/6"
      },
      {
        "$ref": "#/texts/7"
      },
      {
        "$ref": "#/texts/8"
      },
      {
        "$ref": "#/texts/9"
      },
      {
        "$ref": "#/texts/10"
      },
      {
        "$ref": "#/groups/1"
      },
      {
        "$ref": "#/texts/15"
      },
      {
        "$ref": "#/texts/16"
      },
      {
        "$ref": "#/texts/17"
      },
      {
        "$ref": "#/texts/18"
      },
      {
        "$ref": "#/texts/19"
      },
      {
        "$ref": "#/texts/20"
      },
      {
        "$ref": "#/texts/21"
      },
      {
        "$ref": "#/texts/22"
      },
      {
        "$ref": "#/groups/2"
      },
      {
        "$ref": "#/texts/30"
      },
      {
        "$ref": "#/texts/31"
      },
      {
        "$ref": "#/groups/3"
      },
      {
        "$ref": "#/texts/35"
      },
      {
        "$ref": "#/texts/36"
      },
      {
        "$ref": "#/texts/37"
      },
      {
        "$ref": "#/texts/38"
      },
      {
        "$ref": "#/texts/39"
      },
      {
        "$ref": "#/texts/40"
      },
      {
        "$ref": "#/texts/41"
      },
      {
        "$ref": "#/texts/42"
      },
      {
        "$ref": "#/texts/43"
      },
      {
        "$ref": "#/groups/4"
      },
      {
        "$ref": "#/texts/46"
      },
      {
        "$ref": "#/texts/47"
      },
      {
        "$ref": "#/texts/48"
      },
      {
        "$ref": "#/texts/49"
      },
      {
        "$ref": "#/texts/50"
      },
      {
        "$ref": "#/groups/5"
      },
      {
        "$ref": "#/texts/55"
      },
      {
        "$ref": "#/groups/6"
      },
      {
        "$ref": "#/texts/58"
      },
      {
        "$ref": "#/texts/59"
      },
      {
        "$ref": "#/texts/60"
      },
      {
        "$ref": "#/texts/61"
      },
      {
        "$ref": "#/texts/62"
      },
      {
        "$ref": "#/texts/63"
      },
      {
        "$ref": "#/texts/64"
      },
      {
        "$ref": "#/texts/65"
      },
      {
        "$ref": "#/texts/66"
      },
      {
        "$ref": "#/groups/7"
      },
      {
        "$ref": "#/texts/72"
      },
      {
        "$ref": "#/texts/73"
      },
      {
        "$ref": "#/texts/74"
      },
      {
        "$ref": "#/texts/75"
      },
      {
        "$ref": "#/texts/76"
      },
      {
        "$ref": "#/texts/77"
      },
      {
        "$ref": "#/texts/78"
      },
      {
        "$ref": "#/texts/79"
      },
      {
        "$ref": "#/texts/80"
      },
      {
        "$ref": "#/texts/81"
      },
      {
        "$ref": "#/texts/82"
      },
      {
        "$ref": "#/texts/83"
      },
      {
        "$ref": "#/texts/84"
      },
      {
        "$ref": "#/texts/85"
      },
      {
        "$ref": "#/texts/86"
      },
      {
        "$ref": "#/texts/87"
      },
      {
        "$ref": "#/texts/88"
      },
      {
        "$ref": "#/texts/89"
      },
      {
        "$ref": "#/texts/90"
      },
      {
        "$ref": "#/texts/91"
      }
    ],
    "content_layer": "body",
    "name": "_root_",
    "label": "unspecified"
  },
  "groups": [
    {
      "self_ref": "#/groups/0",
      "parent": {
        "$ref": "#/body"
      },
      "children": [
        {
          "$ref": "#/texts/1"
        },
        {
          "$ref": "#/texts/2"
        },
        {
          "$ref": "#/texts/3"
        }
      ],
      "content_layer": "body",
      "name": "list",
      "label": "list"
    },
    {
      "self_ref": "#/groups/1",
      "parent": {
        "$ref": "#/body"
      },
      "children": [
        {
          "$ref": "#/texts/11"
        },
        {
          "$ref": "#/texts/12"
        },
        {
          "$ref": "#/texts/13"
        },
        {
          "$ref": "#/texts/14"
        }
      ],
      "content_layer": "body",
      "name": "list",
      "label": "ordered_list"
    },
    {
      "self_ref": "#/groups/2",
      "parent": {
        "$ref": "#/body"
      },
      "children": [
        {
          "$ref": "#/texts/23"
        },
        {
          "$ref": "#/texts/24"
        },
        {
          "$ref": "#/texts/25"
        },
        {
          "$ref": "#/texts/26"
        },
        {
          "$ref": "#/texts/27"
        },
        {
          "$ref": "#/texts/28"
        },
        {
          "$ref": "#/texts/29"
        }
      ],
      "content_layer": "body",
      "name": "list",
      "label": "list"
    },
    {
      "self_ref": "#/groups/3",
      "parent": {
        "$ref": "#/body"
      },
      "children": [
        {
          "$ref": "#/texts/32"
        },
        {
          "$ref": "#/texts/33"
        },
        {
          "$ref": "#/texts/34"
        }
      ],
      "content_layer": "body",
      "name": "list",
      "label": "list"
    },
    {
      "self_ref": "#/groups/4",
      "parent": {
        "$ref": "#/body"
      },
      "children": [
        {
          "$ref": "#/texts/44"
        },
        {
          "$ref": "#/texts/45"
        }
      ],
      "content_layer": "body",
      "name": "list",
      "label": "list"
    },
    {
      "self_ref": "#/groups/5",
      "parent": {
        "$ref": "#/body"
      },
      "children": [
        {
          "$ref": "#/texts/51"
        },
        {
          "$ref": "#/texts/52"
        },
        {
          "$ref": "#/texts/53"
        },
        {
          "$ref": "#/texts/54"
        }
      ],
      "content_layer": "body",
      "name": "list",
      "label": "list"
    },
    {
      "self_ref": "#/groups/6",
      "parent": {
        "$ref": "#/body"
      },
      "children": [
        {
          "$ref": "#/texts/56"
        },
        {
          "$ref": "#/texts/57"
        }
      ],
      "content_layer": "body",
      "name": "list",
      "label": "list"
    },
    {
      "self_ref": "#/groups/7",
      "parent": {
        "$ref": "#/body"
      },
      "children": [
        {
          "$ref": "#/texts/67"
        },
        {
          "$ref": "#/texts/68"
        },
        {
          "$ref": "#/texts/69"
        },
        {
          "$ref": "#/texts/70"
        },
        {
          "$ref": "#/texts/71"
        }
      ],
      "content_layer": "body",
      "name": "list",
      "label": "ordered_list"
    }
  ],
  "texts": [
    {
      "self_ref": "#/texts/0",
      "parent": {
        "$ref": "#/body"
      },
      "children": [],
      "content_layer": "body",
      "label": "paragraph",
      "prov": [],
      "orig": "author: Major Hayden date: '2025-04-18' Retrieval-augmented generation (RAG) is helpful for AI workflows, but it certainly is not easy. tags: ",
      "text": "author: Major Hayden date: '2025-04-18' Retrieval-augmented generation (RAG) is helpful for AI workflows, but it certainly is not easy. tags: "
    },
    {
      "self_ref": "#/texts/1",
      "parent": {
        "$ref": "#/groups/0"
      },
      "children": [],
      "content_layer": "body",
      "label": "list_item",
      "prov": [],
      "orig": "4runner",
      "text": "4runner",
      "enumerated": false,
      "marker": "-"
    },
    {
      "self_ref": "#/texts/2",
      "parent": {
        "$ref": "#/groups/0"
      },
      "children": [],
      "content_layer": "body",
      "label": "list_item",
      "prov": [],
      "orig": "repair",
      "text": "repair",
      "enumerated": false,
      "marker": "-"
    },
    {
      "self_ref": "#/texts/3",
      "parent": {
        "$ref": "#/groups/0"
      },
      "children": [],
      "content_layer": "body",
      "label": "list_item",
      "prov": [],
      "orig": "toyota",
      "text": "toyota",
      "enumerated": false,
      "marker": "-"
    },
    {
      "self_ref": "#/texts/4",
      "parent": {
        "$ref": "#/body"
      },
      "children": [],
      "content_layer": "body",
      "label": "paragraph",
      "prov": [],
      "orig": "Blog posts have been moving slowly here lately and much of that is due to work demands since the end of 2024. I've been working on an AI-related product with a talented team of people and we learned plenty of lessons about retrieval-augmented generation, or RAG.",
      "text": "Blog posts have been moving slowly here lately and much of that is due to work demands since the end of 2024. I've been working on an AI-related product with a talented team of people and we learned plenty of lessons about retrieval-augmented generation, or RAG."
    },
    {
      "self_ref": "#/texts/5",
      "parent": {
        "$ref": "#/body"
      },
      "children": [],
      "content_layer": "body",
      "label": "paragraph",
      "prov": [],
      "orig": "This post covers the basics of RAG, some assumptions I made, and what I've learned.",
      "text": "This post covers the basics of RAG, some assumptions I made, and what I've learned."
    },
    {
      "self_ref": "#/texts/6",
      "parent": {
        "$ref": "#/body"
      },
      "children": [],
      "content_layer": "body",
      "label": "section_header",
      "prov": [],
      "orig": "What is RAG?",
      "text": "What is RAG?",
      "level": 1
    },
    {
      "self_ref": "#/texts/7",
      "parent": {
        "$ref": "#/body"
      },
      "children": [],
      "content_layer": "body",
      "label": "paragraph",
      "prov": [],
      "orig": "Large language models, or LLMs, are trained on huge amounts of information. This information could come from just about anywhere, including books, online resources, and even this blog! There are plenty of ethical questions here, especially around LLM providers that train their models on copyrighted or otherwise restricted material. They gain ground on their competitors in the short run, but this is not ideal in the long run.",
      "text": "Large language models, or LLMs, are trained on huge amounts of information. This information could come from just about anywhere, including books, online resources, and even this blog! There are plenty of ethical questions here, especially around LLM providers that train their models on copyrighted or otherwise restricted material. They gain ground on their competitors in the short run, but this is not ideal in the long run."
    },
    {
      "self_ref": "#/texts/8",
      "parent": {
        "$ref": "#/body"
      },
      "children": [],
      "content_layer": "body",
      "label": "paragraph",
      "prov": [],
      "orig": "Sometimes training a model isn't feasible. That's where RAG comes in.",
      "text": "Sometimes training a model isn't feasible. That's where RAG comes in."
    },
    {
      "self_ref": "#/texts/9",
      "parent": {
        "$ref": "#/body"
      },
      "children": [],
      "content_layer": "body",
      "label": "paragraph",
      "prov": [],
      "orig": "Training a model is  expensive . It requires lots of very expensive hardware that consumes a significant amount of electricity. This makes RAG ideal for speeding up development at a lower cost. Developers can quickly update or change RAG data for information that changes rapidly, such as sports statistics, and it avoids the hassle of constantly training a model on new information.",
      "text": "Training a model is  expensive . It requires lots of very expensive hardware that consumes a significant amount of electricity. This makes RAG ideal for speeding up development at a lower cost. Developers can quickly update or change RAG data for information that changes rapidly, such as sports statistics, and it avoids the hassle of constantly training a model on new information."
    },
    {
      "self_ref": "#/texts/10",
      "parent": {
        "$ref": "#/body"
      },
      "children": [],
      "content_layer": "body",
      "label": "paragraph",
      "prov": [],
      "orig": "A very simple workflow for RAG would be something like this:",
      "text": "A very simple workflow for RAG would be something like this:"
    },
    {
      "self_ref": "#/texts/11",
      "parent": {
        "$ref": "#/groups/1"
      },
      "children": [],
      "content_layer": "body",
      "label": "list_item",
      "prov": [],
      "orig": "Someone asks a question",
      "text": "Someone asks a question",
      "enumerated": false,
      "marker": "-"
    },
    {
      "self_ref": "#/texts/12",
      "parent": {
        "$ref": "#/groups/1"
      },
      "children": [],
      "content_layer": "body",
      "label": "list_item",
      "prov": [],
      "orig": "Search for relevant information in your RAG database",
      "text": "Search for relevant information in your RAG database",
      "enumerated": false,
      "marker": "-"
    },
    {
      "self_ref": "#/texts/13",
      "parent": {
        "$ref": "#/groups/1"
      },
      "children": [],
      "content_layer": "body",
      "label": "list_item",
      "prov": [],
      "orig": "Add the question and the RAG context to a prompt for the LLM",
      "text": "Add the question and the RAG context to a prompt for the LLM",
      "enumerated": false,
      "marker": "-"
    },
    {
      "self_ref": "#/texts/14",
      "parent": {
        "$ref": "#/groups/1"
      },
      "children": [],
      "content_layer": "body",
      "label": "list_item",
      "prov": [],
      "orig": "Send the whole prompt to the LLM for inference",
      "text": "Send the whole prompt to the LLM for inference",
      "enumerated": false,
      "marker": "-"
    },
    {
      "self_ref": "#/texts/15",
      "parent": {
        "$ref": "#/body"
      },
      "children": [],
      "content_layer": "body",
      "label": "paragraph",
      "prov": [],
      "orig": "Step two is incredibly difficult.",
      "text": "Step two is incredibly difficult."
    },
    {
      "self_ref": "#/texts/16",
      "parent": {
        "$ref": "#/body"
      },
      "children": [],
      "content_layer": "body",
      "label": "paragraph",
      "prov": [],
      "orig": "If you are embarking on the RAG journey for the first time, there's a lot you need to know at a high level. Let's get started.",
      "text": "If you are embarking on the RAG journey for the first time, there's a lot you need to know at a high level. Let's get started."
    },
    {
      "self_ref": "#/texts/17",
      "parent": {
        "$ref": "#/body"
      },
      "children": [],
      "content_layer": "body",
      "label": "section_header",
      "prov": [],
      "orig": "Start with high quality documents",
      "text": "Start with high quality documents",
      "level": 1
    },
    {
      "self_ref": "#/texts/18",
      "parent": {
        "$ref": "#/body"
      },
      "children": [],
      "content_layer": "body",
      "label": "paragraph",
      "prov": [],
      "orig": "Imagine that you're one of the top chefs in the world. You work in a restaurant with  Michelin stars . The restaurant is opening for a special Saturday night dinner and your plan is to serve a delicious piece of fish for each guest. You already know how you plan to season the fish and how you're going to cook it. Your sauces are all ready.",
      "text": "Imagine that you're one of the top chefs in the world. You work in a restaurant with  Michelin stars . The restaurant is opening for a special Saturday night dinner and your plan is to serve a delicious piece of fish for each guest. You already know how you plan to season the fish and how you're going to cook it. Your sauces are all ready."
    },
    {
      "self_ref": "#/texts/19",
      "parent": {
        "$ref": "#/body"
      },
      "children": [],
      "content_layer": "body",
      "label": "paragraph",
      "prov": [],
      "orig": "The fish arrives and when the cooler opens, you gasp. \"What is that smell?\"  \ud83d\ude31",
      "text": "The fish arrives and when the cooler opens, you gasp. \"What is that smell?\"  \ud83d\ude31"
    },
    {
      "self_ref": "#/texts/20",
      "parent": {
        "$ref": "#/body"
      },
      "children": [],
      "content_layer": "body",
      "label": "paragraph",
      "prov": [],
      "orig": "What do you do? You have hungry guests on the way. Your sauce is exquisite and you know you can cook the fish perfectly. But how are you supposed to deal with fish that has gone bad along the way?",
      "text": "What do you do? You have hungry guests on the way. Your sauce is exquisite and you know you can cook the fish perfectly. But how are you supposed to deal with fish that has gone bad along the way?"
    },
    {
      "self_ref": "#/texts/21",
      "parent": {
        "$ref": "#/body"
      },
      "children": [],
      "content_layer": "body",
      "label": "paragraph",
      "prov": [],
      "orig": "This is likely the first step in your RAG journey:  source document quality.",
      "text": "This is likely the first step in your RAG journey:  source document quality."
    },
    {
      "self_ref": "#/texts/22",
      "parent": {
        "$ref": "#/body"
      },
      "children": [],
      "content_layer": "body",
      "label": "paragraph",
      "prov": [],
      "orig": "You might run into quality issues like these:",
      "text": "You might run into quality issues like these:"
    },
    {
      "self_ref": "#/texts/23",
      "parent": {
        "$ref": "#/groups/2"
      },
      "children": [],
      "content_layer": "body",
      "label": "list_item",
      "prov": [],
      "orig": "Widely varying document structures or markup",
      "text": "Widely varying document structures or markup",
      "enumerated": false,
      "marker": "-"
    },
    {
      "self_ref": "#/texts/24",
      "parent": {
        "$ref": "#/groups/2"
      },
      "children": [],
      "content_layer": "body",
      "label": "list_item",
      "prov": [],
      "orig": "Documents written in other languages, or written in a language that isn't the author's primary language",
      "text": "Documents written in other languages, or written in a language that isn't the author's primary language",
      "enumerated": false,
      "marker": "-"
    },
    {
      "self_ref": "#/texts/25",
      "parent": {
        "$ref": "#/groups/2"
      },
      "children": [],
      "content_layer": "body",
      "label": "list_item",
      "prov": [],
      "orig": "Large blocks of low readability text, such as kernel core dumps, command line output, or diagrams, that are difficult to parse",
      "text": "Large blocks of low readability text, such as kernel core dumps, command line output, or diagrams, that are difficult to parse",
      "enumerated": false,
      "marker": "-"
    },
    {
      "self_ref": "#/texts/26",
      "parent": {
        "$ref": "#/groups/2"
      },
      "children": [],
      "content_layer": "body",
      "label": "list_item",
      "prov": [],
      "orig": "Boilerplate language across multiple documents",
      "text": "Boilerplate language across multiple documents",
      "enumerated": false,
      "marker": "-"
    },
    {
      "self_ref": "#/texts/27",
      "parent": {
        "$ref": "#/groups/2"
      },
      "children": [],
      "content_layer": "body",
      "label": "list_item",
      "prov": [],
      "orig": "Metadata at the front of the document or scattered throughout",
      "text": "Metadata at the front of the document or scattered throughout",
      "enumerated": false,
      "marker": "-"
    },
    {
      "self_ref": "#/texts/28",
      "parent": {
        "$ref": "#/groups/2"
      },
      "children": [],
      "content_layer": "body",
      "label": "list_item",
      "prov": [],
      "orig": "No structure, markup, or boundaries whatsoever",
      "text": "No structure, markup, or boundaries whatsoever",
      "enumerated": false,
      "marker": "-"
    },
    {
      "self_ref": "#/texts/29",
      "parent": {
        "$ref": "#/groups/2"
      },
      "children": [],
      "content_layer": "body",
      "label": "list_item",
      "prov": [],
      "orig": "Incorrect, outdated, or problematic information",
      "text": "Incorrect, outdated, or problematic information",
      "enumerated": false,
      "marker": "-"
    },
    {
      "self_ref": "#/texts/30",
      "parent": {
        "$ref": "#/body"
      },
      "children": [],
      "content_layer": "body",
      "label": "paragraph",
      "prov": [],
      "orig": "This is a  garbage in, garbage out  problem. RAG can help you match documents to user questions, but if the documents steer the user in the wrong direction, the outcome is terrible.",
      "text": "This is a  garbage in, garbage out  problem. RAG can help you match documents to user questions, but if the documents steer the user in the wrong direction, the outcome is terrible."
    },
    {
      "self_ref": "#/texts/31",
      "parent": {
        "$ref": "#/body"
      },
      "children": [],
      "content_layer": "body",
      "label": "paragraph",
      "prov": [],
      "orig": "You have a few options:",
      "text": "You have a few options:"
    },
    {
      "self_ref": "#/texts/32",
      "parent": {
        "$ref": "#/groups/3"
      },
      "children": [],
      "content_layer": "body",
      "label": "list_item",
      "prov": [],
      "orig": "Engage with the groups who created or currently maintain the information to make improvements",
      "text": "Engage with the groups who created or currently maintain the information to make improvements",
      "enumerated": false,
      "marker": "-"
    },
    {
      "self_ref": "#/texts/33",
      "parent": {
        "$ref": "#/groups/3"
      },
      "children": [],
      "content_layer": "body",
      "label": "list_item",
      "prov": [],
      "orig": "Use an LLM to summarize or extract information from the documents (some LLMs are good at building FAQs from documents)",
      "text": "Use an LLM to summarize or extract information from the documents (some LLMs are good at building FAQs from documents)",
      "enumerated": false,
      "marker": "-"
    },
    {
      "self_ref": "#/texts/34",
      "parent": {
        "$ref": "#/groups/3"
      },
      "children": [],
      "content_layer": "body",
      "label": "list_item",
      "prov": [],
      "orig": "Find the highest quality documents in the group and start with those",
      "text": "Find the highest quality documents in the group and start with those",
      "enumerated": false,
      "marker": "-"
    },
    {
      "self_ref": "#/texts/35",
      "parent": {
        "$ref": "#/body"
      },
      "children": [],
      "content_layer": "body",
      "label": "paragraph",
      "prov": [],
      "orig": "Once you have a document quality plan together, it's time for the next step.",
      "text": "Once you have a document quality plan together, it's time for the next step."
    },
    {
      "self_ref": "#/texts/36",
      "parent": {
        "$ref": "#/body"
      },
      "children": [],
      "content_layer": "body",
      "label": "section_header",
      "prov": [],
      "orig": "Getting documents ready for search",
      "text": "Getting documents ready for search",
      "level": 1
    },
    {
      "self_ref": "#/texts/37",
      "parent": {
        "$ref": "#/body"
      },
      "children": [],
      "content_layer": "body",
      "label": "paragraph",
      "prov": [],
      "orig": "You have plenty of options at this step, but I've had a good amount of luck with a hybrid search approach. This combines a vector (semantic) search along with a traditional full text search.",
      "text": "You have plenty of options at this step, but I've had a good amount of luck with a hybrid search approach. This combines a vector (semantic) search along with a traditional full text search."
    },
    {
      "self_ref": "#/texts/38",
      "parent": {
        "$ref": "#/body"
      },
      "children": [],
      "content_layer": "body",
      "label": "paragraph",
      "prov": [],
      "orig": "Vector searches aim to capture the  meaning  behind the search rather than just looking for keywords. They examine how words are positioned in a sentence and which words are closest together. These searches require a step where you convert a string of text into vectors and this can be time consuming on slower hardware.",
      "text": "Vector searches aim to capture the  meaning  behind the search rather than just looking for keywords. They examine how words are positioned in a sentence and which words are closest together. These searches require a step where you convert a string of text into vectors and this can be time consuming on slower hardware."
    },
    {
      "self_ref": "#/texts/39",
      "parent": {
        "$ref": "#/body"
      },
      "children": [],
      "content_layer": "body",
      "label": "paragraph",
      "prov": [],
      "orig": "Keyword, or full-text, searches are cheaper and easier to run. They're great for matching specific keywords or an exact phrase.",
      "text": "Keyword, or full-text, searches are cheaper and easier to run. They're great for matching specific keywords or an exact phrase."
    },
    {
      "self_ref": "#/texts/40",
      "parent": {
        "$ref": "#/body"
      },
      "children": [],
      "content_layer": "body",
      "label": "paragraph",
      "prov": [],
      "orig": "When you combine both of these together, you get the best of both worlds.",
      "text": "When you combine both of these together, you get the best of both worlds."
    },
    {
      "self_ref": "#/texts/41",
      "parent": {
        "$ref": "#/body"
      },
      "children": [],
      "content_layer": "body",
      "label": "paragraph",
      "prov": [],
      "orig": "The challenge here is that you need an embedding model to convert strings into a list of vectors. Every embedding model, like an inference model, has a limit on how much text that it can turn into vectors in one shot. This is called the  context window  and it varies from model to model.",
      "text": "The challenge here is that you need an embedding model to convert strings into a list of vectors. Every embedding model, like an inference model, has a limit on how much text that it can turn into vectors in one shot. This is called the  context window  and it varies from model to model."
    },
    {
      "self_ref": "#/texts/42",
      "parent": {
        "$ref": "#/body"
      },
      "children": [],
      "content_layer": "body",
      "label": "paragraph",
      "prov": [],
      "orig": "If a model has a 350 token context window, that means it can only handle 350 tokens (close to 350 words) before the model overflows. If you put 450 tokens into this example model, it vectorizes the first 350 and skips the remaining 100. This means you can only do a vector search across the first 350 tokens.[^token_overflow]",
      "text": "If a model has a 350 token context window, that means it can only handle 350 tokens (close to 350 words) before the model overflows. If you put 450 tokens into this example model, it vectorizes the first 350 and skips the remaining 100. This means you can only do a vector search across the first 350 tokens.[^token_overflow]"
    },
    {
      "self_ref": "#/texts/43",
      "parent": {
        "$ref": "#/body"
      },
      "children": [],
      "content_layer": "body",
      "label": "paragraph",
      "prov": [],
      "orig": "This is where chunking comes in. You need to split your documents into chunks so that they fit within the context window of the embedding model. However, there are advantages and disadvantages to larger or smaller chunks:",
      "text": "This is where chunking comes in. You need to split your documents into chunks so that they fit within the context window of the embedding model. However, there are advantages and disadvantages to larger or smaller chunks:"
    },
    {
      "self_ref": "#/texts/44",
      "parent": {
        "$ref": "#/groups/4"
      },
      "children": [],
      "content_layer": "body",
      "label": "list_item",
      "prov": [],
      "orig": "Larger chunks preserve more of the text from your documents and make it easier to find document/chunk relationships.",
      "text": "Larger chunks preserve more of the text from your documents and make it easier to find document/chunk relationships.",
      "enumerated": false,
      "marker": "-"
    },
    {
      "self_ref": "#/texts/45",
      "parent": {
        "$ref": "#/groups/4"
      },
      "children": [],
      "content_layer": "body",
      "label": "list_item",
      "prov": [],
      "orig": "Smaller chunks give you a more precise retrieval and save you money at inference time since you're sending a little less context to the LLM.",
      "text": "Smaller chunks give you a more precise retrieval and save you money at inference time since you're sending a little less context to the LLM.",
      "enumerated": false,
      "marker": "-"
    },
    {
      "self_ref": "#/texts/46",
      "parent": {
        "$ref": "#/body"
      },
      "children": [],
      "content_layer": "body",
      "label": "paragraph",
      "prov": [],
      "orig": "There are  plenty of options  to review here, especially with how you create chunks and set overlaps between the chunks. I really like where  unstructured  is headed with their open source library. You can partition via different methods depending on the document type and then split within the partitions.",
      "text": "There are  plenty of options  to review here, especially with how you create chunks and set overlaps between the chunks. I really like where  unstructured  is headed with their open source library. You can partition via different methods depending on the document type and then split within the partitions."
    },
    {
      "self_ref": "#/texts/47",
      "parent": {
        "$ref": "#/body"
      },
      "children": [],
      "content_layer": "body",
      "label": "paragraph",
      "prov": [],
      "orig": "This avoids situations where you might put a piece of chapter one with chapter two just because that's where the chunks happened to split. Partitioning on chapters first and then splitting into chunks keeps the relevant information together better.",
      "text": "This avoids situations where you might put a piece of chapter one with chapter two just because that's where the chunks happened to split. Partitioning on chapters first and then splitting into chunks keeps the relevant information together better."
    },
    {
      "self_ref": "#/texts/48",
      "parent": {
        "$ref": "#/body"
      },
      "children": [],
      "content_layer": "body",
      "label": "section_header",
      "prov": [],
      "orig": "Time to search",
      "text": "Time to search",
      "level": 1
    },
    {
      "self_ref": "#/texts/49",
      "parent": {
        "$ref": "#/body"
      },
      "children": [],
      "content_layer": "body",
      "label": "paragraph",
      "prov": [],
      "orig": "I've talked about hybrid searches already, but there's an  excellent guide from Pamela Fox  that gives you a deep dive into RAG from \"I know nothing\" to \"I can do things!\" in 17 slides. This is a great way to visualize what is actually happening behind the scenes for each search type. Be prepared for calculus! \ud83e\udd13",
      "text": "I've talked about hybrid searches already, but there's an  excellent guide from Pamela Fox  that gives you a deep dive into RAG from \"I know nothing\" to \"I can do things!\" in 17 slides. This is a great way to visualize what is actually happening behind the scenes for each search type. Be prepared for calculus! \ud83e\udd13"
    },
    {
      "self_ref": "#/texts/50",
      "parent": {
        "$ref": "#/body"
      },
      "children": [],
      "content_layer": "body",
      "label": "paragraph",
      "prov": [],
      "orig": "In a perfect world, your search results should:",
      "text": "In a perfect world, your search results should:"
    },
    {
      "self_ref": "#/texts/51",
      "parent": {
        "$ref": "#/groups/5"
      },
      "children": [],
      "content_layer": "body",
      "label": "list_item",
      "prov": [],
      "orig": "Return the smallest amount of matching chunks to avoid confusing the LLM (and to consume fewer tokens)",
      "text": "Return the smallest amount of matching chunks to avoid confusing the LLM (and to consume fewer tokens)",
      "enumerated": false,
      "marker": "-"
    },
    {
      "self_ref": "#/texts/52",
      "parent": {
        "$ref": "#/groups/5"
      },
      "children": [],
      "content_layer": "body",
      "label": "list_item",
      "prov": [],
      "orig": "Only provide chunks that are relevant to the user's question",
      "text": "Only provide chunks that are relevant to the user's question",
      "enumerated": false,
      "marker": "-"
    },
    {
      "self_ref": "#/texts/53",
      "parent": {
        "$ref": "#/groups/5"
      },
      "children": [],
      "content_layer": "body",
      "label": "list_item",
      "prov": [],
      "orig": "Contain all of the needed steps for a process (give all steps of a recipe instead of just the second half)",
      "text": "Contain all of the needed steps for a process (give all steps of a recipe instead of just the second half)",
      "enumerated": false,
      "marker": "-"
    },
    {
      "self_ref": "#/texts/54",
      "parent": {
        "$ref": "#/groups/5"
      },
      "children": [],
      "content_layer": "body",
      "label": "list_item",
      "prov": [],
      "orig": "Complete very quickly to avoid keeping the user waiting",
      "text": "Complete very quickly to avoid keeping the user waiting",
      "enumerated": false,
      "marker": "-"
    },
    {
      "self_ref": "#/texts/55",
      "parent": {
        "$ref": "#/body"
      },
      "children": [],
      "content_layer": "body",
      "label": "paragraph",
      "prov": [],
      "orig": "This can be tricky with certain languages, especially English. For example, if someone asks \"How do I keep a bat from flying away?\", what are they talking about?",
      "text": "This can be tricky with certain languages, especially English. For example, if someone asks \"How do I keep a bat from flying away?\", what are they talking about?"
    },
    {
      "self_ref": "#/texts/56",
      "parent": {
        "$ref": "#/groups/6"
      },
      "children": [],
      "content_layer": "body",
      "label": "list_item",
      "prov": [],
      "orig": "Are they near a bat (the flying mammal) that they want to trap and keep from flying away? \ud83e\udd87",
      "text": "Are they near a bat (the flying mammal) that they want to trap and keep from flying away? \ud83e\udd87",
      "enumerated": false,
      "marker": "-"
    },
    {
      "self_ref": "#/texts/57",
      "parent": {
        "$ref": "#/groups/6"
      },
      "children": [],
      "content_layer": "body",
      "label": "list_item",
      "prov": [],
      "orig": "Are they playing a game of baseball and the bat keeps slipping from their hands as they swing? \u26be",
      "text": "Are they playing a game of baseball and the bat keeps slipping from their hands as they swing? \u26be",
      "enumerated": false,
      "marker": "-"
    },
    {
      "self_ref": "#/texts/58",
      "parent": {
        "$ref": "#/body"
      },
      "children": [],
      "content_layer": "body",
      "label": "paragraph",
      "prov": [],
      "orig": "Vector searches help a lot with these confusing situations, but they're not perfect. Let's look at a way to improve them next.",
      "text": "Vector searches help a lot with these confusing situations, but they're not perfect. Let's look at a way to improve them next."
    },
    {
      "self_ref": "#/texts/59",
      "parent": {
        "$ref": "#/body"
      },
      "children": [],
      "content_layer": "body",
      "label": "section_header",
      "prov": [],
      "orig": "Refine the user's question",
      "text": "Refine the user's question",
      "level": 1
    },
    {
      "self_ref": "#/texts/60",
      "parent": {
        "$ref": "#/body"
      },
      "children": [],
      "content_layer": "body",
      "label": "paragraph",
      "prov": [],
      "orig": "If you can budget some extra tokens to refine the user's question prior to searching, you can improve your RAG searches substantially.",
      "text": "If you can budget some extra tokens to refine the user's question prior to searching, you can improve your RAG searches substantially."
    },
    {
      "self_ref": "#/texts/61",
      "parent": {
        "$ref": "#/body"
      },
      "children": [],
      "content_layer": "body",
      "label": "paragraph",
      "prov": [],
      "orig": "Let's keep the last example going and assume you have an AI service that handles baseball questions. In your case, you could take the user's question and clarify it using an LLM. Here's an example prompt (that is totally untested):",
      "text": "Let's keep the last example going and assume you have an AI service that handles baseball questions. In your case, you could take the user's question and clarify it using an LLM. Here's an example prompt (that is totally untested):"
    },
    {
      "self_ref": "#/texts/62",
      "parent": {
        "$ref": "#/body"
      },
      "children": [],
      "content_layer": "body",
      "label": "code",
      "prov": [],
      "orig": "You are a helpful AI assistant and an expert in the game of baseball.\nUse the question provided below to create five questions which are\nmore specific and relevant to baseball terminology.\n\nQuestion: How do I keep a bat from flying away?",
      "text": "You are a helpful AI assistant and an expert in the game of baseball.\nUse the question provided below to create five questions which are\nmore specific and relevant to baseball terminology.\n\nQuestion: How do I keep a bat from flying away?",
      "captions": [],
      "references": [],
      "footnotes": [],
      "code_language": "unknown"
    },
    {
      "self_ref": "#/texts/63",
      "parent": {
        "$ref": "#/body"
      },
      "children": [],
      "content_layer": "body",
      "label": "paragraph",
      "prov": [],
      "orig": "The LLM might reply with something like this:",
      "text": "The LLM might reply with something like this:"
    },
    {
      "self_ref": "#/texts/64",
      "parent": {
        "$ref": "#/body"
      },
      "children": [],
      "content_layer": "body",
      "label": "code",
      "prov": [],
      "orig": "1. How can I keep my hands tacky so the bat will stay in my hands\n   when I swing?\n2. How can I keep a better grip on a bat when my hands are sweaty?\n3. What coverings or other materials can I add to a bat to get\n   a better grip?\n4. Can I adjust my swing to avoid losing my grip on the bat?\n5. Are there exercises I can do to avoid letting the bat go when\n   I swing?",
      "text": "1. How can I keep my hands tacky so the bat will stay in my hands\n   when I swing?\n2. How can I keep a better grip on a bat when my hands are sweaty?\n3. What coverings or other materials can I add to a bat to get\n   a better grip?\n4. Can I adjust my swing to avoid losing my grip on the bat?\n5. Are there exercises I can do to avoid letting the bat go when\n   I swing?",
      "captions": [],
      "references": [],
      "footnotes": [],
      "code_language": "unknown"
    },
    {
      "self_ref": "#/texts/65",
      "parent": {
        "$ref": "#/body"
      },
      "children": [],
      "content_layer": "body",
      "label": "paragraph",
      "prov": [],
      "orig": "These refined questions offer more ways for vector searches to match document since there is more meaning to search through. LLMs often add more relevant keywords to the questions and that can be helpful for keyword searches, too.",
      "text": "These refined questions offer more ways for vector searches to match document since there is more meaning to search through. LLMs often add more relevant keywords to the questions and that can be helpful for keyword searches, too."
    },
    {
      "self_ref": "#/texts/66",
      "parent": {
        "$ref": "#/body"
      },
      "children": [],
      "content_layer": "body",
      "label": "paragraph",
      "prov": [],
      "orig": "You can then adjust your workflow to something like this:",
      "text": "You can then adjust your workflow to something like this:"
    },
    {
      "self_ref": "#/texts/67",
      "parent": {
        "$ref": "#/groups/7"
      },
      "children": [],
      "content_layer": "body",
      "label": "list_item",
      "prov": [],
      "orig": "Receive a question from the user",
      "text": "Receive a question from the user",
      "enumerated": false,
      "marker": "-"
    },
    {
      "self_ref": "#/texts/68",
      "parent": {
        "$ref": "#/groups/7"
      },
      "children": [],
      "content_layer": "body",
      "label": "list_item",
      "prov": [],
      "orig": "Refine the question using an LLM",
      "text": "Refine the question using an LLM",
      "enumerated": false,
      "marker": "-"
    },
    {
      "self_ref": "#/texts/69",
      "parent": {
        "$ref": "#/groups/7"
      },
      "children": [],
      "content_layer": "body",
      "label": "list_item",
      "prov": [],
      "orig": "Use the refined questions to search the RAG database",
      "text": "Use the refined questions to search the RAG database",
      "enumerated": false,
      "marker": "-"
    },
    {
      "self_ref": "#/texts/70",
      "parent": {
        "$ref": "#/groups/7"
      },
      "children": [],
      "content_layer": "body",
      "label": "list_item",
      "prov": [],
      "orig": "Add the context and the ",
      "text": "Add the context and the ",
      "enumerated": false,
      "marker": "-"
    },
    {
      "self_ref": "#/texts/71",
      "parent": {
        "$ref": "#/groups/7"
      },
      "children": [],
      "content_layer": "body",
      "label": "list_item",
      "prov": [],
      "orig": "Send the prompt to the LLM",
      "text": "Send the prompt to the LLM",
      "enumerated": false,
      "marker": "-"
    },
    {
      "self_ref": "#/texts/72",
      "parent": {
        "$ref": "#/body"
      },
      "children": [],
      "content_layer": "body",
      "label": "paragraph",
      "prov": [],
      "orig": "LLMs can hallucinate and make bad choices, so always send the user's original question to the LLM rather than the refined questions. If the LLM hallucinates on the question refinement step, the issue is contained to the RAG search rather than the RAG search and inference.",
      "text": "LLMs can hallucinate and make bad choices, so always send the user's original question to the LLM rather than the refined questions. If the LLM hallucinates on the question refinement step, the issue is contained to the RAG search rather than the RAG search and inference."
    },
    {
      "self_ref": "#/texts/73",
      "parent": {
        "$ref": "#/body"
      },
      "children": [],
      "content_layer": "body",
      "label": "section_header",
      "prov": [],
      "orig": "Extra credit",
      "text": "Extra credit",
      "level": 1
    },
    {
      "self_ref": "#/texts/74",
      "parent": {
        "$ref": "#/body"
      },
      "children": [],
      "content_layer": "body",
      "label": "paragraph",
      "prov": [],
      "orig": "There are plenty of ways to tweak this process depending on your time and budget.",
      "text": "There are plenty of ways to tweak this process depending on your time and budget."
    },
    {
      "self_ref": "#/texts/75",
      "parent": {
        "$ref": "#/body"
      },
      "children": [],
      "content_layer": "body",
      "label": "section_header",
      "prov": [],
      "orig": "Categories",
      "text": "Categories",
      "level": 2
    },
    {
      "self_ref": "#/texts/76",
      "parent": {
        "$ref": "#/body"
      },
      "children": [],
      "content_layer": "body",
      "label": "paragraph",
      "prov": [],
      "orig": "You can break your documents into categories and infer what the user is asking about to narrow your search. Imagine you needed to answer questions for all sports. You might break up your documents into categories for each sport and you could limit your searches to that sport. An LLM might be able to help you quickly determine which sport the user is asking about and then you can narrow your RAG search to only that sport.",
      "text": "You can break your documents into categories and infer what the user is asking about to narrow your search. Imagine you needed to answer questions for all sports. You might break up your documents into categories for each sport and you could limit your searches to that sport. An LLM might be able to help you quickly determine which sport the user is asking about and then you can narrow your RAG search to only that sport."
    },
    {
      "self_ref": "#/texts/77",
      "parent": {
        "$ref": "#/body"
      },
      "children": [],
      "content_layer": "body",
      "label": "section_header",
      "prov": [],
      "orig": "Get the whole document",
      "text": "Get the whole document",
      "level": 2
    },
    {
      "self_ref": "#/texts/78",
      "parent": {
        "$ref": "#/body"
      },
      "children": [],
      "content_layer": "body",
      "label": "paragraph",
      "prov": [],
      "orig": "Let's day you do a RAG hybrid search and your top 10 results brings back 7 chunks from the same document. In that case, that entire document or portion of the document is likely really useful for the user. You might want to build in some functionality that retrieves the whole document, or perhaps the whole chapter/section, in these situations and sends it to the LLM.",
      "text": "Let's day you do a RAG hybrid search and your top 10 results brings back 7 chunks from the same document. In that case, that entire document or portion of the document is likely really useful for the user. You might want to build in some functionality that retrieves the whole document, or perhaps the whole chapter/section, in these situations and sends it to the LLM."
    },
    {
      "self_ref": "#/texts/79",
      "parent": {
        "$ref": "#/body"
      },
      "children": [],
      "content_layer": "body",
      "label": "section_header",
      "prov": [],
      "orig": "Prioritize documents",
      "text": "Prioritize documents",
      "level": 2
    },
    {
      "self_ref": "#/texts/80",
      "parent": {
        "$ref": "#/body"
      },
      "children": [],
      "content_layer": "body",
      "label": "paragraph",
      "prov": [],
      "orig": "Certain documents in your collection might have a higher priority over others. For example, if you have support teams that track which documents they refer customers to most often, those documents should be weighted higher in your results. You might be able to examine web traffic to tell you which articles on your site are accessed most often. Those documents would be great for a higher weight.",
      "text": "Certain documents in your collection might have a higher priority over others. For example, if you have support teams that track which documents they refer customers to most often, those documents should be weighted higher in your results. You might be able to examine web traffic to tell you which articles on your site are accessed most often. Those documents would be great for a higher weight."
    },
    {
      "self_ref": "#/texts/81",
      "parent": {
        "$ref": "#/body"
      },
      "children": [],
      "content_layer": "body",
      "label": "section_header",
      "prov": [],
      "orig": "Links to source",
      "text": "Links to source",
      "level": 2
    },
    {
      "self_ref": "#/texts/82",
      "parent": {
        "$ref": "#/body"
      },
      "children": [],
      "content_layer": "body",
      "label": "paragraph",
      "prov": [],
      "orig": "Document quality issues might lead you to put short summaries of documents in your RAG database. Adding a source link to the original page is helpful because an LLM would be able to answer the question at a high level and refer the user to a specific page for a deeper dive.",
      "text": "Document quality issues might lead you to put short summaries of documents in your RAG database. Adding a source link to the original page is helpful because an LLM would be able to answer the question at a high level and refer the user to a specific page for a deeper dive."
    },
    {
      "self_ref": "#/texts/83",
      "parent": {
        "$ref": "#/body"
      },
      "children": [],
      "content_layer": "body",
      "label": "section_header",
      "prov": [],
      "orig": "RAFT",
      "text": "RAFT",
      "level": 2
    },
    {
      "self_ref": "#/texts/84",
      "parent": {
        "$ref": "#/body"
      },
      "children": [],
      "content_layer": "body",
      "label": "paragraph",
      "prov": [],
      "orig": "RAG and fine tuning (RAFT) is another good option if your budget allows for it. You can train your LLM on your high quality documents (quality is more important with RAFT) and provide additional documents via RAG when needed. For example, you might fine tune your model on sports data from last season and earlier. You could then provide the current season's data via RAG. This gives you great responses on historical data while allowing you to quickly update your current data with the latest games.",
      "text": "RAG and fine tuning (RAFT) is another good option if your budget allows for it. You can train your LLM on your high quality documents (quality is more important with RAFT) and provide additional documents via RAG when needed. For example, you might fine tune your model on sports data from last season and earlier. You could then provide the current season's data via RAG. This gives you great responses on historical data while allowing you to quickly update your current data with the latest games."
    },
    {
      "self_ref": "#/texts/85",
      "parent": {
        "$ref": "#/body"
      },
      "children": [],
      "content_layer": "body",
      "label": "section_header",
      "prov": [],
      "orig": "Summary",
      "text": "Summary",
      "level": 1
    },
    {
      "self_ref": "#/texts/86",
      "parent": {
        "$ref": "#/body"
      },
      "children": [],
      "content_layer": "body",
      "label": "paragraph",
      "prov": [],
      "orig": "RAG isn't easy.  \ud83d\ude02",
      "text": "RAG isn't easy.  \ud83d\ude02"
    },
    {
      "self_ref": "#/texts/87",
      "parent": {
        "$ref": "#/body"
      },
      "children": [],
      "content_layer": "body",
      "label": "paragraph",
      "prov": [],
      "orig": "Don't let anyone tell you it's easy. You would never take a stack of documents, cut them into pieces, throw them into a box, and put them in front of a brand new hire at your company. Don't try to do the same thing with RAG. RAG is a quick way to find all of the places in your organization where old data has been ignored. \ud83e\udd2d",
      "text": "Don't let anyone tell you it's easy. You would never take a stack of documents, cut them into pieces, throw them into a box, and put them in front of a brand new hire at your company. Don't try to do the same thing with RAG. RAG is a quick way to find all of the places in your organization where old data has been ignored. \ud83e\udd2d"
    },
    {
      "self_ref": "#/texts/88",
      "parent": {
        "$ref": "#/body"
      },
      "children": [],
      "content_layer": "body",
      "label": "paragraph",
      "prov": [],
      "orig": "Start with high quality documents that have meaningful, relevant information for your users. Get them into a database where you can search them quickly and efficiently.",
      "text": "Start with high quality documents that have meaningful, relevant information for your users. Get them into a database where you can search them quickly and efficiently."
    },
    {
      "self_ref": "#/texts/89",
      "parent": {
        "$ref": "#/body"
      },
      "children": [],
      "content_layer": "body",
      "label": "paragraph",
      "prov": [],
      "orig": "Once they're in the database, get creative about how you search them. Simply returning relevant chunks is a good start. From there, look to see how you can take those results and expand upon them.",
      "text": "Once they're in the database, get creative about how you search them. Simply returning relevant chunks is a good start. From there, look to see how you can take those results and expand upon them."
    },
    {
      "self_ref": "#/texts/90",
      "parent": {
        "$ref": "#/body"
      },
      "children": [],
      "content_layer": "body",
      "label": "paragraph",
      "prov": [],
      "orig": "Good luck in your adventure! \ud83e\uddd7\u200d\u2642\ufe0f",
      "text": "Good luck in your adventure! \ud83e\uddd7\u200d\u2642\ufe0f"
    },
    {
      "self_ref": "#/texts/91",
      "parent": {
        "$ref": "#/body"
      },
      "children": [],
      "content_layer": "body",
      "label": "paragraph",
      "prov": [],
      "orig": "[^token_overflow]: Lots of hand-waving happening here. \ud83d\ude06 Every model counts tokens differently and you may need to look for a specific tokenizer to know how many tokens can fit within the window.",
      "text": "[^token_overflow]: Lots of hand-waving happening here. \ud83d\ude06 Every model counts tokens differently and you may need to look for a specific tokenizer to know how many tokens can fit within the window."
    }
  ],
  "pictures": [],
  "tables": [],
  "key_value_items": [],
  "form_items": [],
  "pages": {}
}