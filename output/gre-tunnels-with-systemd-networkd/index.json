{
  "schema_name": "DoclingDocument",
  "version": "1.4.0",
  "name": "myfile",
  "origin": {
    "mimetype": "text/markdown",
    "binary_hash": 54688508417275061,
    "filename": "myfile.md"
  },
  "furniture": {
    "self_ref": "#/furniture",
    "children": [],
    "content_layer": "furniture",
    "name": "_root_",
    "label": "unspecified"
  },
  "body": {
    "self_ref": "#/body",
    "children": [
      {
        "$ref": "#/texts/0"
      },
      {
        "$ref": "#/texts/1"
      },
      {
        "$ref": "#/texts/2"
      },
      {
        "$ref": "#/texts/3"
      },
      {
        "$ref": "#/texts/4"
      },
      {
        "$ref": "#/texts/5"
      },
      {
        "$ref": "#/texts/6"
      },
      {
        "$ref": "#/texts/7"
      },
      {
        "$ref": "#/texts/8"
      },
      {
        "$ref": "#/texts/9"
      },
      {
        "$ref": "#/texts/10"
      },
      {
        "$ref": "#/texts/11"
      },
      {
        "$ref": "#/texts/12"
      },
      {
        "$ref": "#/texts/13"
      },
      {
        "$ref": "#/texts/14"
      },
      {
        "$ref": "#/texts/15"
      },
      {
        "$ref": "#/texts/16"
      },
      {
        "$ref": "#/texts/17"
      },
      {
        "$ref": "#/texts/18"
      },
      {
        "$ref": "#/texts/19"
      },
      {
        "$ref": "#/texts/20"
      },
      {
        "$ref": "#/texts/21"
      },
      {
        "$ref": "#/texts/22"
      },
      {
        "$ref": "#/texts/23"
      },
      {
        "$ref": "#/texts/24"
      },
      {
        "$ref": "#/texts/25"
      },
      {
        "$ref": "#/texts/26"
      },
      {
        "$ref": "#/texts/27"
      },
      {
        "$ref": "#/texts/28"
      },
      {
        "$ref": "#/texts/29"
      },
      {
        "$ref": "#/texts/30"
      },
      {
        "$ref": "#/texts/31"
      },
      {
        "$ref": "#/texts/32"
      },
      {
        "$ref": "#/texts/33"
      },
      {
        "$ref": "#/texts/34"
      },
      {
        "$ref": "#/texts/35"
      },
      {
        "$ref": "#/texts/36"
      },
      {
        "$ref": "#/texts/37"
      },
      {
        "$ref": "#/texts/38"
      },
      {
        "$ref": "#/texts/39"
      },
      {
        "$ref": "#/texts/40"
      },
      {
        "$ref": "#/texts/41"
      },
      {
        "$ref": "#/texts/42"
      },
      {
        "$ref": "#/texts/43"
      },
      {
        "$ref": "#/texts/44"
      },
      {
        "$ref": "#/texts/45"
      },
      {
        "$ref": "#/texts/46"
      },
      {
        "$ref": "#/texts/47"
      },
      {
        "$ref": "#/texts/48"
      },
      {
        "$ref": "#/texts/49"
      },
      {
        "$ref": "#/texts/50"
      },
      {
        "$ref": "#/texts/51"
      },
      {
        "$ref": "#/texts/52"
      },
      {
        "$ref": "#/texts/53"
      },
      {
        "$ref": "#/texts/54"
      },
      {
        "$ref": "#/texts/55"
      },
      {
        "$ref": "#/texts/56"
      },
      {
        "$ref": "#/texts/57"
      },
      {
        "$ref": "#/texts/58"
      },
      {
        "$ref": "#/texts/59"
      },
      {
        "$ref": "#/texts/60"
      },
      {
        "$ref": "#/texts/61"
      },
      {
        "$ref": "#/texts/62"
      },
      {
        "$ref": "#/texts/63"
      },
      {
        "$ref": "#/texts/64"
      },
      {
        "$ref": "#/texts/65"
      },
      {
        "$ref": "#/texts/66"
      }
    ],
    "content_layer": "body",
    "name": "_root_",
    "label": "unspecified"
  },
  "groups": [],
  "texts": [
    {
      "self_ref": "#/texts/0",
      "parent": {
        "$ref": "#/body"
      },
      "children": [],
      "content_layer": "body",
      "label": "paragraph",
      "prov": [],
      "orig": "Switching to  systemd-networkd  for managing your networking interfaces makes things quite a bit simpler over standard networking scripts or NetworkManager. Aside from being easier to configure, it uses fewer resources on your system, which can be handy for smaller virtual machines or containers.",
      "text": "Switching to  systemd-networkd  for managing your networking interfaces makes things quite a bit simpler over standard networking scripts or NetworkManager. Aside from being easier to configure, it uses fewer resources on your system, which can be handy for smaller virtual machines or containers."
    },
    {
      "self_ref": "#/texts/1",
      "parent": {
        "$ref": "#/body"
      },
      "children": [],
      "content_layer": "body",
      "label": "paragraph",
      "prov": [],
      "orig": "Managing tunnels between interfaces is also easier with systemd-networkd. This post will show you how to set up a  GRE tunnel  between two hosts running systemd-networkd.",
      "text": "Managing tunnels between interfaces is also easier with systemd-networkd. This post will show you how to set up a  GRE tunnel  between two hosts running systemd-networkd."
    },
    {
      "self_ref": "#/texts/2",
      "parent": {
        "$ref": "#/body"
      },
      "children": [],
      "content_layer": "body",
      "label": "section_header",
      "prov": [],
      "orig": "Getting started",
      "text": "Getting started",
      "level": 1
    },
    {
      "self_ref": "#/texts/3",
      "parent": {
        "$ref": "#/body"
      },
      "children": [],
      "content_layer": "body",
      "label": "paragraph",
      "prov": [],
      "orig": "You'll need two hosts running a recent version of systemd-networkd. I'd recommend Fedora 22 since it provides very recent versions of systemd which include enhancements to systemd-networkd.",
      "text": "You'll need two hosts running a recent version of systemd-networkd. I'd recommend Fedora 22 since it provides very recent versions of systemd which include enhancements to systemd-networkd."
    },
    {
      "self_ref": "#/texts/4",
      "parent": {
        "$ref": "#/body"
      },
      "children": [],
      "content_layer": "body",
      "label": "paragraph",
      "prov": [],
      "orig": "For this example, I've built one Rackspace Cloud Server in the DFW datacenter and another in IAD. I'll connect them both together with a simple GRE tunnel.",
      "text": "For this example, I've built one Rackspace Cloud Server in the DFW datacenter and another in IAD. I'll connect them both together with a simple GRE tunnel."
    },
    {
      "self_ref": "#/texts/5",
      "parent": {
        "$ref": "#/body"
      },
      "children": [],
      "content_layer": "body",
      "label": "section_header",
      "prov": [],
      "orig": "Switch to systemd-networkd",
      "text": "Switch to systemd-networkd",
      "level": 1
    },
    {
      "self_ref": "#/texts/6",
      "parent": {
        "$ref": "#/body"
      },
      "children": [],
      "content_layer": "body",
      "label": "paragraph",
      "prov": [],
      "orig": "I've  detailed out this process before  but I'll do it again here. First off, we will need a directory made on both servers to hold systemd-networkd configuration files:",
      "text": "I've  detailed out this process before  but I'll do it again here. First off, we will need a directory made on both servers to hold systemd-networkd configuration files:"
    },
    {
      "self_ref": "#/texts/7",
      "parent": {
        "$ref": "#/body"
      },
      "children": [],
      "content_layer": "body",
      "label": "code",
      "prov": [],
      "orig": "mkdir /etc/systemd/network",
      "text": "mkdir /etc/systemd/network",
      "captions": [],
      "references": [],
      "footnotes": [],
      "code_language": "unknown"
    },
    {
      "self_ref": "#/texts/8",
      "parent": {
        "$ref": "#/body"
      },
      "children": [],
      "content_layer": "body",
      "label": "paragraph",
      "prov": [],
      "orig": "Let's add a very simple network configuration for our ",
      "text": "Let's add a very simple network configuration for our "
    },
    {
      "self_ref": "#/texts/9",
      "parent": {
        "$ref": "#/body"
      },
      "children": [],
      "content_layer": "body",
      "label": "code",
      "prov": [],
      "orig": "eth0",
      "text": "eth0",
      "captions": [],
      "references": [],
      "footnotes": [],
      "code_language": "unknown"
    },
    {
      "self_ref": "#/texts/10",
      "parent": {
        "$ref": "#/body"
      },
      "children": [],
      "content_layer": "body",
      "label": "paragraph",
      "prov": [],
      "orig": " interface on both hosts:",
      "text": " interface on both hosts:"
    },
    {
      "self_ref": "#/texts/11",
      "parent": {
        "$ref": "#/body"
      },
      "children": [],
      "content_layer": "body",
      "label": "code",
      "prov": [],
      "orig": "# cat /etc/systemd/network/eth0.network\n[Match]\nName=eth0\n\n[Network]\nAddress=x.x.x.x/24\nGateway=x.x.x.x\nDNS=8.8.8.8\nDNS=8.8.4.4",
      "text": "# cat /etc/systemd/network/eth0.network\n[Match]\nName=eth0\n\n[Network]\nAddress=x.x.x.x/24\nGateway=x.x.x.x\nDNS=8.8.8.8\nDNS=8.8.4.4",
      "captions": [],
      "references": [],
      "footnotes": [],
      "code_language": "unknown"
    },
    {
      "self_ref": "#/texts/12",
      "parent": {
        "$ref": "#/body"
      },
      "children": [],
      "content_layer": "body",
      "label": "paragraph",
      "prov": [],
      "orig": "Do this on  both servers  and be sure to fill in the ",
      "text": "Do this on  both servers  and be sure to fill in the "
    },
    {
      "self_ref": "#/texts/13",
      "parent": {
        "$ref": "#/body"
      },
      "children": [],
      "content_layer": "body",
      "label": "code",
      "prov": [],
      "orig": "Address",
      "text": "Address",
      "captions": [],
      "references": [],
      "footnotes": [],
      "code_language": "unknown"
    },
    {
      "self_ref": "#/texts/14",
      "parent": {
        "$ref": "#/body"
      },
      "children": [],
      "content_layer": "body",
      "label": "paragraph",
      "prov": [],
      "orig": " and ",
      "text": " and "
    },
    {
      "self_ref": "#/texts/15",
      "parent": {
        "$ref": "#/body"
      },
      "children": [],
      "content_layer": "body",
      "label": "code",
      "prov": [],
      "orig": "Gateway",
      "text": "Gateway",
      "captions": [],
      "references": [],
      "footnotes": [],
      "code_language": "unknown"
    },
    {
      "self_ref": "#/texts/16",
      "parent": {
        "$ref": "#/body"
      },
      "children": [],
      "content_layer": "body",
      "label": "paragraph",
      "prov": [],
      "orig": " lines with the correct data for your servers. Also, feel free to use something other than Google's DNS servers if needed.",
      "text": " lines with the correct data for your servers. Also, feel free to use something other than Google's DNS servers if needed."
    },
    {
      "self_ref": "#/texts/17",
      "parent": {
        "$ref": "#/body"
      },
      "children": [],
      "content_layer": "body",
      "label": "paragraph",
      "prov": [],
      "orig": "It's time to get our services in order so that systemd-networkd will handle our networking after a reboot:",
      "text": "It's time to get our services in order so that systemd-networkd will handle our networking after a reboot:"
    },
    {
      "self_ref": "#/texts/18",
      "parent": {
        "$ref": "#/body"
      },
      "children": [],
      "content_layer": "body",
      "label": "code",
      "prov": [],
      "orig": "systemctl disable network\nsystemctl disable NetworkManager\nsystemctl enable systemd-networkd\nsystemctl enable systemd-resolved\nsystemctl start systemd-resolved\nrm -f /etc/resolv.conf\nln -s /run/systemd/resolve/resolv.conf /etc/resolv.conf",
      "text": "systemctl disable network\nsystemctl disable NetworkManager\nsystemctl enable systemd-networkd\nsystemctl enable systemd-resolved\nsystemctl start systemd-resolved\nrm -f /etc/resolv.conf\nln -s /run/systemd/resolve/resolv.conf /etc/resolv.conf",
      "captions": [],
      "references": [],
      "footnotes": [],
      "code_language": "unknown"
    },
    {
      "self_ref": "#/texts/19",
      "parent": {
        "$ref": "#/body"
      },
      "children": [],
      "content_layer": "body",
      "label": "paragraph",
      "prov": [],
      "orig": "Don't start systemd-networkd yet.  Having systemd-networkd and NetworkManager fight over your interfaces can lead to a bad day.",
      "text": "Don't start systemd-networkd yet.  Having systemd-networkd and NetworkManager fight over your interfaces can lead to a bad day."
    },
    {
      "self_ref": "#/texts/20",
      "parent": {
        "$ref": "#/body"
      },
      "children": [],
      "content_layer": "body",
      "label": "paragraph",
      "prov": [],
      "orig": "Reboot both hosts and wait for them to come back online.",
      "text": "Reboot both hosts and wait for them to come back online."
    },
    {
      "self_ref": "#/texts/21",
      "parent": {
        "$ref": "#/body"
      },
      "children": [],
      "content_layer": "body",
      "label": "section_header",
      "prov": [],
      "orig": "Configure the GRE tunnel",
      "text": "Configure the GRE tunnel",
      "level": 1
    },
    {
      "self_ref": "#/texts/22",
      "parent": {
        "$ref": "#/body"
      },
      "children": [],
      "content_layer": "body",
      "label": "paragraph",
      "prov": [],
      "orig": "A GRE tunnel is a simple way to encapsulate packets between two hosts and send almost any protocol across the tunnel you build. However, it's not encrypted. (If you're planning to use this long-term, consider only using encrypted streams across the link or add IPSec on top of the GRE tunnel.)",
      "text": "A GRE tunnel is a simple way to encapsulate packets between two hosts and send almost any protocol across the tunnel you build. However, it's not encrypted. (If you're planning to use this long-term, consider only using encrypted streams across the link or add IPSec on top of the GRE tunnel.)"
    },
    {
      "self_ref": "#/texts/23",
      "parent": {
        "$ref": "#/body"
      },
      "children": [],
      "content_layer": "body",
      "label": "paragraph",
      "prov": [],
      "orig": "If we want to route traffic over the GRE tunnel, we will need IP addresses on both sides. I'll use 192.168.254.0/24 for this example, but you're free to use any subnet of any size (except /32!) for this network.",
      "text": "If we want to route traffic over the GRE tunnel, we will need IP addresses on both sides. I'll use 192.168.254.0/24 for this example, but you're free to use any subnet of any size (except /32!) for this network."
    },
    {
      "self_ref": "#/texts/24",
      "parent": {
        "$ref": "#/body"
      },
      "children": [],
      "content_layer": "body",
      "label": "paragraph",
      "prov": [],
      "orig": "We need to tell systemd-networkd about a new network device that it doesn't know about. We do this with ",
      "text": "We need to tell systemd-networkd about a new network device that it doesn't know about. We do this with "
    },
    {
      "self_ref": "#/texts/25",
      "parent": {
        "$ref": "#/body"
      },
      "children": [],
      "content_layer": "body",
      "label": "code",
      "prov": [],
      "orig": ".netdev",
      "text": ".netdev",
      "captions": [],
      "references": [],
      "footnotes": [],
      "code_language": "unknown"
    },
    {
      "self_ref": "#/texts/26",
      "parent": {
        "$ref": "#/body"
      },
      "children": [],
      "content_layer": "body",
      "label": "paragraph",
      "prov": [],
      "orig": " files. Create this file on both hosts:",
      "text": " files. Create this file on both hosts:"
    },
    {
      "self_ref": "#/texts/27",
      "parent": {
        "$ref": "#/body"
      },
      "children": [],
      "content_layer": "body",
      "label": "code",
      "prov": [],
      "orig": "# cat /etc/systemd/network/gre-example.netdev\n[NetDev]\nName=gre-example\nKind=gre\nMTUBytes=1480\n\n[Tunnel]\nRemote=[public ip of remote server]\nLocal=[public ip of local server]",
      "text": "# cat /etc/systemd/network/gre-example.netdev\n[NetDev]\nName=gre-example\nKind=gre\nMTUBytes=1480\n\n[Tunnel]\nRemote=[public ip of remote server]\nLocal=[public ip of local server]",
      "captions": [],
      "references": [],
      "footnotes": [],
      "code_language": "unknown"
    },
    {
      "self_ref": "#/texts/28",
      "parent": {
        "$ref": "#/body"
      },
      "children": [],
      "content_layer": "body",
      "label": "paragraph",
      "prov": [],
      "orig": "We're making a new network device called ",
      "text": "We're making a new network device called "
    },
    {
      "self_ref": "#/texts/29",
      "parent": {
        "$ref": "#/body"
      },
      "children": [],
      "content_layer": "body",
      "label": "code",
      "prov": [],
      "orig": "gre-example",
      "text": "gre-example",
      "captions": [],
      "references": [],
      "footnotes": [],
      "code_language": "unknown"
    },
    {
      "self_ref": "#/texts/30",
      "parent": {
        "$ref": "#/body"
      },
      "children": [],
      "content_layer": "body",
      "label": "paragraph",
      "prov": [],
      "orig": " here and we're telling systemd-networkd about the servers participating in the link. Add this configuration file to  both hosts  but be sure that your ",
      "text": " here and we're telling systemd-networkd about the servers participating in the link. Add this configuration file to  both hosts  but be sure that your "
    },
    {
      "self_ref": "#/texts/31",
      "parent": {
        "$ref": "#/body"
      },
      "children": [],
      "content_layer": "body",
      "label": "code",
      "prov": [],
      "orig": "Remote=",
      "text": "Remote=",
      "captions": [],
      "references": [],
      "footnotes": [],
      "code_language": "unknown"
    },
    {
      "self_ref": "#/texts/32",
      "parent": {
        "$ref": "#/body"
      },
      "children": [],
      "content_layer": "body",
      "label": "paragraph",
      "prov": [],
      "orig": " line is correct. If you're writing the configuration file for the  first  host, then the ",
      "text": " line is correct. If you're writing the configuration file for the  first  host, then the "
    },
    {
      "self_ref": "#/texts/33",
      "parent": {
        "$ref": "#/body"
      },
      "children": [],
      "content_layer": "body",
      "label": "code",
      "prov": [],
      "orig": "Remote=",
      "text": "Remote=",
      "captions": [],
      "references": [],
      "footnotes": [],
      "code_language": "unknown"
    },
    {
      "self_ref": "#/texts/34",
      "parent": {
        "$ref": "#/body"
      },
      "children": [],
      "content_layer": "body",
      "label": "paragraph",
      "prov": [],
      "orig": " line should have the IP address of your  second  host. Do the same thing on the second host, but use the IP address of your first host there.",
      "text": " line should have the IP address of your  second  host. Do the same thing on the second host, but use the IP address of your first host there."
    },
    {
      "self_ref": "#/texts/35",
      "parent": {
        "$ref": "#/body"
      },
      "children": [],
      "content_layer": "body",
      "label": "paragraph",
      "prov": [],
      "orig": "Now that we have a network device, we need to tell systemd-networkd how to configure the IP address on these new GRE tunnels. Let's make a ",
      "text": "Now that we have a network device, we need to tell systemd-networkd how to configure the IP address on these new GRE tunnels. Let's make a "
    },
    {
      "self_ref": "#/texts/36",
      "parent": {
        "$ref": "#/body"
      },
      "children": [],
      "content_layer": "body",
      "label": "code",
      "prov": [],
      "orig": ".network",
      "text": ".network",
      "captions": [],
      "references": [],
      "footnotes": [],
      "code_language": "unknown"
    },
    {
      "self_ref": "#/texts/37",
      "parent": {
        "$ref": "#/body"
      },
      "children": [],
      "content_layer": "body",
      "label": "paragraph",
      "prov": [],
      "orig": " file for our GRE tunnel.",
      "text": " file for our GRE tunnel."
    },
    {
      "self_ref": "#/texts/38",
      "parent": {
        "$ref": "#/body"
      },
      "children": [],
      "content_layer": "body",
      "label": "paragraph",
      "prov": [],
      "orig": "On the first host:",
      "text": "On the first host:"
    },
    {
      "self_ref": "#/texts/39",
      "parent": {
        "$ref": "#/body"
      },
      "children": [],
      "content_layer": "body",
      "label": "code",
      "prov": [],
      "orig": "# cat /etc/systemd/network/gre-example.network\n[Match]\nName=gre-example\n\n[Network]\nAddress=192.168.254.1/24",
      "text": "# cat /etc/systemd/network/gre-example.network\n[Match]\nName=gre-example\n\n[Network]\nAddress=192.168.254.1/24",
      "captions": [],
      "references": [],
      "footnotes": [],
      "code_language": "unknown"
    },
    {
      "self_ref": "#/texts/40",
      "parent": {
        "$ref": "#/body"
      },
      "children": [],
      "content_layer": "body",
      "label": "paragraph",
      "prov": [],
      "orig": "On the second host:",
      "text": "On the second host:"
    },
    {
      "self_ref": "#/texts/41",
      "parent": {
        "$ref": "#/body"
      },
      "children": [],
      "content_layer": "body",
      "label": "code",
      "prov": [],
      "orig": "# cat /etc/systemd/network/gre-example.network\n[Match]\nName=gre-example\n\n[Network]\nAddress=192.168.254.2/24",
      "text": "# cat /etc/systemd/network/gre-example.network\n[Match]\nName=gre-example\n\n[Network]\nAddress=192.168.254.2/24",
      "captions": [],
      "references": [],
      "footnotes": [],
      "code_language": "unknown"
    },
    {
      "self_ref": "#/texts/42",
      "parent": {
        "$ref": "#/body"
      },
      "children": [],
      "content_layer": "body",
      "label": "section_header",
      "prov": [],
      "orig": "Bringing up the tunnel",
      "text": "Bringing up the tunnel",
      "level": 1
    },
    {
      "self_ref": "#/texts/43",
      "parent": {
        "$ref": "#/body"
      },
      "children": [],
      "content_layer": "body",
      "label": "paragraph",
      "prov": [],
      "orig": "Although systemd-networkd knows we have a tunnel configured now, it's not sure which interface should manage the tunnel. In our case, our public interface (",
      "text": "Although systemd-networkd knows we have a tunnel configured now, it's not sure which interface should manage the tunnel. In our case, our public interface ("
    },
    {
      "self_ref": "#/texts/44",
      "parent": {
        "$ref": "#/body"
      },
      "children": [],
      "content_layer": "body",
      "label": "code",
      "prov": [],
      "orig": "eth0",
      "text": "eth0",
      "captions": [],
      "references": [],
      "footnotes": [],
      "code_language": "unknown"
    },
    {
      "self_ref": "#/texts/45",
      "parent": {
        "$ref": "#/body"
      },
      "children": [],
      "content_layer": "body",
      "label": "paragraph",
      "prov": [],
      "orig": ") is required to be up for this tunnel to function. Go back to your original ",
      "text": ") is required to be up for this tunnel to function. Go back to your original "
    },
    {
      "self_ref": "#/texts/46",
      "parent": {
        "$ref": "#/body"
      },
      "children": [],
      "content_layer": "body",
      "label": "code",
      "prov": [],
      "orig": "eth0.network",
      "text": "eth0.network",
      "captions": [],
      "references": [],
      "footnotes": [],
      "code_language": "unknown"
    },
    {
      "self_ref": "#/texts/47",
      "parent": {
        "$ref": "#/body"
      },
      "children": [],
      "content_layer": "body",
      "label": "paragraph",
      "prov": [],
      "orig": " files and add one line under the ",
      "text": " files and add one line under the "
    },
    {
      "self_ref": "#/texts/48",
      "parent": {
        "$ref": "#/body"
      },
      "children": [],
      "content_layer": "body",
      "label": "code",
      "prov": [],
      "orig": "[Network]",
      "text": "[Network]",
      "captions": [],
      "references": [],
      "footnotes": [],
      "code_language": "unknown"
    },
    {
      "self_ref": "#/texts/49",
      "parent": {
        "$ref": "#/body"
      },
      "children": [],
      "content_layer": "body",
      "label": "paragraph",
      "prov": [],
      "orig": " section for our tunnel:",
      "text": " section for our tunnel:"
    },
    {
      "self_ref": "#/texts/50",
      "parent": {
        "$ref": "#/body"
      },
      "children": [],
      "content_layer": "body",
      "label": "code",
      "prov": [],
      "orig": "[Network]\nTunnel=gre-example",
      "text": "[Network]\nTunnel=gre-example",
      "captions": [],
      "references": [],
      "footnotes": [],
      "code_language": "unknown"
    },
    {
      "self_ref": "#/texts/51",
      "parent": {
        "$ref": "#/body"
      },
      "children": [],
      "content_layer": "body",
      "label": "paragraph",
      "prov": [],
      "orig": "Restart systemd-networkd on  both hosts  and check the network interfaces:",
      "text": "Restart systemd-networkd on  both hosts  and check the network interfaces:"
    },
    {
      "self_ref": "#/texts/52",
      "parent": {
        "$ref": "#/body"
      },
      "children": [],
      "content_layer": "body",
      "label": "code",
      "prov": [],
      "orig": "# systemctl restart systemd-networkd\n# networkctl\nIDX LINK             TYPE               OPERATIONAL SETUP\n  1 lo               loopback           carrier     unmanaged\n  2 eth0             ether              routable    configured\n  3 eth1             ether              off         unmanaged\n  4 gre0             ipgre              off         unmanaged\n  5 gretap0          ether              off         unmanaged\n  6 gre-example      ipgre              routable    configured\n\n6 links listed.",
      "text": "# systemctl restart systemd-networkd\n# networkctl\nIDX LINK             TYPE               OPERATIONAL SETUP\n  1 lo               loopback           carrier     unmanaged\n  2 eth0             ether              routable    configured\n  3 eth1             ether              off         unmanaged\n  4 gre0             ipgre              off         unmanaged\n  5 gretap0          ether              off         unmanaged\n  6 gre-example      ipgre              routable    configured\n\n6 links listed.",
      "captions": [],
      "references": [],
      "footnotes": [],
      "code_language": "unknown"
    },
    {
      "self_ref": "#/texts/53",
      "parent": {
        "$ref": "#/body"
      },
      "children": [],
      "content_layer": "body",
      "label": "paragraph",
      "prov": [],
      "orig": "Hooray! Our GRE tunnel is up! However, we have a firewall in the way.",
      "text": "Hooray! Our GRE tunnel is up! However, we have a firewall in the way."
    },
    {
      "self_ref": "#/texts/54",
      "parent": {
        "$ref": "#/body"
      },
      "children": [],
      "content_layer": "body",
      "label": "section_header",
      "prov": [],
      "orig": "Fixing the firewall",
      "text": "Fixing the firewall",
      "level": 1
    },
    {
      "self_ref": "#/texts/55",
      "parent": {
        "$ref": "#/body"
      },
      "children": [],
      "content_layer": "body",
      "label": "paragraph",
      "prov": [],
      "orig": "We need to tell the firewall two things: trust the GRE interface and trust the public IP of the other server. Trusting the GRE interface is easy with firewalld &#8212; just add this on both hosts:",
      "text": "We need to tell the firewall two things: trust the GRE interface and trust the public IP of the other server. Trusting the GRE interface is easy with firewalld &#8212; just add this on both hosts:"
    },
    {
      "self_ref": "#/texts/56",
      "parent": {
        "$ref": "#/body"
      },
      "children": [],
      "content_layer": "body",
      "label": "code",
      "prov": [],
      "orig": "firewall-cmd --add-interface=gre-example --zone=trusted",
      "text": "firewall-cmd --add-interface=gre-example --zone=trusted",
      "captions": [],
      "references": [],
      "footnotes": [],
      "code_language": "unknown"
    },
    {
      "self_ref": "#/texts/57",
      "parent": {
        "$ref": "#/body"
      },
      "children": [],
      "content_layer": "body",
      "label": "paragraph",
      "prov": [],
      "orig": "Now, we need a rich rule to tell firewalld to trust the public IP of each host. I talked about this  last year  on the blog. Run this command on both hosts:",
      "text": "Now, we need a rich rule to tell firewalld to trust the public IP of each host. I talked about this  last year  on the blog. Run this command on both hosts:"
    },
    {
      "self_ref": "#/texts/58",
      "parent": {
        "$ref": "#/body"
      },
      "children": [],
      "content_layer": "body",
      "label": "code",
      "prov": [],
      "orig": "firewall-cmd --zone=public --add-rich-rule='rule family=\"ipv4\" source address=\"[IP ADDRESS]\" accept'",
      "text": "firewall-cmd --zone=public --add-rich-rule='rule family=\"ipv4\" source address=\"[IP ADDRESS]\" accept'",
      "captions": [],
      "references": [],
      "footnotes": [],
      "code_language": "unknown"
    },
    {
      "self_ref": "#/texts/59",
      "parent": {
        "$ref": "#/body"
      },
      "children": [],
      "content_layer": "body",
      "label": "paragraph",
      "prov": [],
      "orig": "If you run this on your first host, use the public IP address of your second host in the ",
      "text": "If you run this on your first host, use the public IP address of your second host in the "
    },
    {
      "self_ref": "#/texts/60",
      "parent": {
        "$ref": "#/body"
      },
      "children": [],
      "content_layer": "body",
      "label": "code",
      "prov": [],
      "orig": "firewall-cmd",
      "text": "firewall-cmd",
      "captions": [],
      "references": [],
      "footnotes": [],
      "code_language": "unknown"
    },
    {
      "self_ref": "#/texts/61",
      "parent": {
        "$ref": "#/body"
      },
      "children": [],
      "content_layer": "body",
      "label": "paragraph",
      "prov": [],
      "orig": " command. Use the first host's public IP address when you run the command on the second host.",
      "text": " command. Use the first host's public IP address when you run the command on the second host."
    },
    {
      "self_ref": "#/texts/62",
      "parent": {
        "$ref": "#/body"
      },
      "children": [],
      "content_layer": "body",
      "label": "paragraph",
      "prov": [],
      "orig": "Save your configuration permanently on  both hosts :",
      "text": "Save your configuration permanently on  both hosts :"
    },
    {
      "self_ref": "#/texts/63",
      "parent": {
        "$ref": "#/body"
      },
      "children": [],
      "content_layer": "body",
      "label": "code",
      "prov": [],
      "orig": "firewall-cmd --runtime-to-permanent",
      "text": "firewall-cmd --runtime-to-permanent",
      "captions": [],
      "references": [],
      "footnotes": [],
      "code_language": "unknown"
    },
    {
      "self_ref": "#/texts/64",
      "parent": {
        "$ref": "#/body"
      },
      "children": [],
      "content_layer": "body",
      "label": "paragraph",
      "prov": [],
      "orig": "Try to ping between your servers using the IP addresses we configured on the GRE tunnel and you should get some replies!",
      "text": "Try to ping between your servers using the IP addresses we configured on the GRE tunnel and you should get some replies!"
    },
    {
      "self_ref": "#/texts/65",
      "parent": {
        "$ref": "#/body"
      },
      "children": [],
      "content_layer": "body",
      "label": "section_header",
      "prov": [],
      "orig": "Final words",
      "text": "Final words",
      "level": 1
    },
    {
      "self_ref": "#/texts/66",
      "parent": {
        "$ref": "#/body"
      },
      "children": [],
      "content_layer": "body",
      "label": "paragraph",
      "prov": [],
      "orig": "Remember that GRE tunnels  are not encrypted . You can add IPSec over the tunnel or you can ensure that you use encrypted streams across the tunnel at all times (SSL, ssh, etc).",
      "text": "Remember that GRE tunnels  are not encrypted . You can add IPSec over the tunnel or you can ensure that you use encrypted streams across the tunnel at all times (SSL, ssh, etc)."
    }
  ],
  "pictures": [],
  "tables": [],
  "key_value_items": [],
  "form_items": [],
  "pages": {}
}